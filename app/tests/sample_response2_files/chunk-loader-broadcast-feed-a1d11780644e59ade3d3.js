webpackJsonp([103],{1181:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(176),s=a(1233),i=n(s),o=a(1257),l=n(o),u=function(){return r.eventManager.publish(i.default.REGISTER_USER_INTERACTION)},d=function(e){var t=e.playAction;return r.eventManager.publish(i.default.PLAYBACK_REQUEST,{playAction:t})},c=function(){return r.eventManager.publish(i.default.PLAY_REQUEST)},p=function(){return r.eventManager.publish(i.default.PAUSE_REQUEST)},f=function(){return r.eventManager.publish(i.default.MUTE_REQUEST)},h=function(){return r.eventManager.publish(i.default.UNMUTE_REQUEST)},m=function(){return r.eventManager.publish(i.default.AD_SKIP_REQUEST)},y=function(e){var t=e.isAdPlaying;return r.eventManager.publish(l.default.ON_AD_STATE_UPDATE,{isAdPlaying:t})},v=function(e){var t=e.currentTime,a=e.played,n=e.duration,s=e.currentMonotonicTime;return r.eventManager.publish(l.default.ON_TIME_UPDATE,{currentTime:t,played:a,duration:n,currentMonotonicTime:s})},g=function(){return r.eventManager.publish(l.default.ON_ENDED)};t.default={registerUserInteraction:u,playbackRequest:d,playRequest:c,pauseRequest:p,muteRequest:f,unmuteRequest:h,adSkipRequest:m,onAdStateUpdate:y,onTimeUpdate:v,onEnded:g}},1183:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.spam=t.selfharm=t.producerviolation=t.dmcaunban=t.dmcapermanent=t.dmca=t.deactivate=t.content=t.common=void 0;var r=a(1199),s=n(r),i=a(1200),o=n(i),l=a(1201),u=n(l),d=a(1202),c=n(d),p=a(1203),f=n(p),h=a(1204),m=n(h),y=a(1205),v=n(y),g=a(1206),b=n(g),T=a(1207),E=n(T);t.default={common:s.default,content:o.default,deactivate:u.default,dmca:c.default,dmcapermanent:f.default,dmcaunban:m.default,producerviolation:v.default,selfharm:b.default,spam:E.default},t.common=s.default,t.content=o.default,t.deactivate=u.default,t.dmca=c.default,t.dmcapermanent=f.default,t.dmcaunban=m.default,t.producerviolation=v.default,t.selfharm=b.default,t.spam=E.default},1184:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.watchedTimePerViewer=t.watchedTimePerMinute=t.watchedTime=t.viewersPerMinute=t.viewers=t.total=t.topBroadcasts=t.title=t.sortBy=t.shorter=t.settings=t.seconds=t.replayWatchedTimePerViewer=t.replayWatchedTimePerMinute=t.replayWatchedTime=t.replayViewersPerMinute=t.replayViewers=t.replayHeartsPerMinute=t.replayHearts=t.replay=t.publicBroadcasts=t.privateBroadcasts=t.outliersTip=t.outliers=t.older=t.noBroadcastsFound=t.newer=t.longer=t.liveWatchedTimePerViewer=t.liveWatchedTimePerMinute=t.liveWatchedTime=t.liveViewersPerMinute=t.liveViewers=t.liveHeartsPerMinute=t.liveHearts=t.live=t.letterZ=t.letterA=t.lastNumber=t.heartsPerMinute=t.hearts=t.filters=t.featured=t.exportData=t.emptyDescription=t.duration=t.download=t.descending=t.date=t.customizeColumns=t.columns=t.byMetric=t.broadcasts=t.broadcast=t.beta=t.ascending=t.analytics=t.all=t.advancedOptions=void 0;var n=a(3),r=(0,n.defineMessages)({advancedOptions:{id:"stats.ADVANCED_OPTIONS",defaultMessage:"Advanced Options"},all:{id:"stats.ALL",defaultMessage:"All"},analytics:{id:"stats.ANALYTICS",defaultMessage:"Analytics"},ascending:{id:"stats.ASCENDING",defaultMessage:"Ascending"},beta:{id:"stats.BETA",defaultMessage:"Beta"},broadcast:{id:"stats.BROADCAST",defaultMessage:"Broadcast"},broadcasts:{id:"stats.BROADCASTS",defaultMessage:"Broadcasts"},byMetric:{id:"stats.BY_METRIC",defaultMessage:"By {formattedMessage}"},columns:{id:"stats.COLUMNS",defaultMessage:"Columns"},customizeColumns:{id:"stats.CUSTOMIZE_COLUMNS",defaultMessage:"Customize Columns"},date:{id:"stats.DATE",defaultMessage:"Date"},descending:{id:"stats.DESCENDING",defaultMessage:"Descending"},download:{id:"stats.DOWNLOAD",defaultMessage:"Download .csv"},duration:{id:"stats.DURATION",defaultMessage:"Duration"},emptyDescription:{id:"stats.EMPTY_DESCRIPTION",defaultMessage:"Go live in the Periscope app, then check here to learn about your viewers, hearts, and other interesting analytics."},exportData:{id:"stats.EXPORT_DATA",defaultMessage:"Export"},featured:{id:"stats.FEATURED",defaultMessage:"Featured"},filters:{id:"stats.FILTERS",defaultMessage:"Filters"},hearts:{id:"stats.HEARTS",defaultMessage:"Hearts"},heartsPerMinute:{id:"stats.HEARTS_PER_MINUTE",defaultMessage:"Hearts per Broadcast Minute"},lastNumber:{id:"stats.LAST_NUMBER",defaultMessage:"Last {formattedNumber}"},letterA:{id:"stats.LETTER_A",defaultMessage:"A"},letterZ:{id:"stats.LETTER_Z",defaultMessage:"Z"},live:{id:"stats.LIVE",defaultMessage:"Live"},liveHearts:{id:"stats.LIVE_HEARTS",defaultMessage:"Live Hearts"},liveHeartsPerMinute:{id:"stats.LIVE_HEARTS_PER_MINUTE",defaultMessage:"Live Hearts per Broadcast Minute"},liveViewers:{id:"stats.LIVE_VIEWERS",defaultMessage:"Live Viewers"},liveViewersPerMinute:{id:"stats.LIVE_VIEWERS_PER_MINUTE",defaultMessage:"Live Viewers per Broadcast Minute"},liveWatchedTime:{id:"stats.LIVE_WATCHED_TIME",defaultMessage:"Live Time Watched"},liveWatchedTimePerMinute:{id:"stats.LIVE_WATCHED_TIME_PER_MINUTE",defaultMessage:"Live Time Watched per Broadcast Minute"},liveWatchedTimePerViewer:{id:"stats.LIVE_WATCHED_TIME_PER_VIEWER",defaultMessage:"Live Time Watched per Viewer"},longer:{id:"stats.LONGER",defaultMessage:"Longer"},newer:{id:"stats.NEWER",defaultMessage:"Newer"},noBroadcastsFound:{id:"stats.NO_BROADCASTS_FOUND",defaultMessage:"No Broadcasts Found"},older:{id:"stats.OLDER",defaultMessage:"Older"},outliers:{id:"stats.OUTLIERS",defaultMessage:"Outliers"},outliersTip:{id:"stats.OUTLIERS_TIP",defaultMessage:"Removing outliers helps legibility. An outlier is a broadcast that significantly deviates from the average."},privateBroadcasts:{id:"stats.PRIVATE_BROADCASTS",defaultMessage:"Private"},publicBroadcasts:{id:"stats.PUBLIC_BROADCASTS",defaultMessage:"Public"},replay:{id:"stats.REPLAY",defaultMessage:"Replay"},replayHearts:{id:"stats.REPLAY_HEARTS",defaultMessage:"Replay Hearts"},replayHeartsPerMinute:{id:"stats.REPLAY_HEARTS_PER_MINUTE",defaultMessage:"Replay Hearts per Broadcast Minute"},replayViewers:{id:"stats.REPLAY_VIEWERS",defaultMessage:"Replay Viewers"},replayViewersPerMinute:{id:"stats.REPLAY_VIEWERS_PER_MINUTE",defaultMessage:"Replay Viewers per Broadcast Minute"},replayWatchedTime:{id:"stats.REPLAY_WATCHED_TIME",defaultMessage:"Replay Time Watched"},replayWatchedTimePerMinute:{id:"stats.REPLAY_WATCHED_TIME_PER_MINUTE",defaultMessage:"Replay Time Watched per Broadcast Minute"},replayWatchedTimePerViewer:{id:"stats.REPLAY_WATCHED_TIME_PER_VIEWER",defaultMessage:"Replay Time Watched per Viewer"},seconds:{id:"stats.SECONDS",defaultMessage:"Seconds"},settings:{id:"stats.SETTINGS",defaultMessage:"Settings"},shorter:{id:"stats.SHORTER",defaultMessage:"Shorter"},sortBy:{id:"stats.SORT_BY",defaultMessage:"Sort By"},title:{id:"stats.TITLE",defaultMessage:"Title"},topBroadcasts:{id:"stats.TOP_BROADCASTS",defaultMessage:"Top Broadcasts"},total:{id:"stats.TOTAL",defaultMessage:"Total"},viewers:{id:"stats.VIEWERS",defaultMessage:"Viewers"},viewersPerMinute:{id:"stats.VIEWERS_PER_MINUTE",defaultMessage:"Viewers per Broadcast Minute"},watchedTime:{id:"stats.WATCHED_TIME",defaultMessage:"Time Watched"},watchedTimePerMinute:{id:"stats.WATCHED_TIME_PER_MINUTE",defaultMessage:"Time Watched per Broadcast Minute"},watchedTimePerViewer:{id:"stats.WATCHED_TIME_PER_VIEWER",defaultMessage:"Time Watched per Viewer"}}),s=r.advancedOptions,i=r.all,o=r.analytics,l=r.ascending,u=r.beta,d=r.broadcast,c=r.broadcasts,p=r.byMetric,f=r.columns,h=r.customizeColumns,m=r.date,y=r.descending,v=r.download,g=r.duration,b=r.emptyDescription,T=r.exportData,E=r.featured,P=r.filters,_=r.hearts,M=r.heartsPerMinute,C=r.lastNumber,k=r.letterA,S=r.letterZ,w=r.live,R=r.liveHearts,I=r.liveHeartsPerMinute,N=r.liveViewers,A=r.liveViewersPerMinute,O=r.liveWatchedTime,D=r.liveWatchedTimePerMinute,L=r.liveWatchedTimePerViewer,H=r.longer,B=r.newer,U=r.noBroadcastsFound,V=r.older,F=r.outliers,W=r.outliersTip,j=r.privateBroadcasts,x=r.publicBroadcasts,q=r.replay,G=r.replayHearts,Y=r.replayHeartsPerMinute,K=r.replayViewers,z=r.replayViewersPerMinute,J=r.replayWatchedTime,Z=r.replayWatchedTimePerMinute,Q=r.replayWatchedTimePerViewer,X=r.seconds,$=r.settings,ee=r.shorter,te=r.sortBy,ae=r.title,ne=r.topBroadcasts,re=r.total,se=r.viewers,ie=r.viewersPerMinute,oe=r.watchedTime,le=r.watchedTimePerMinute,ue=r.watchedTimePerViewer;t.default={advancedOptions:s,all:i,analytics:o,ascending:l,beta:u,broadcast:d,broadcasts:c,byMetric:p,columns:f,customizeColumns:h,date:m,descending:y,download:v,duration:g,emptyDescription:b,exportData:T,featured:E,filters:P,hearts:_,heartsPerMinute:M,lastNumber:C,letterA:k,letterZ:S,live:w,liveHearts:R,liveHeartsPerMinute:I,liveViewers:N,liveViewersPerMinute:A,liveWatchedTime:O,liveWatchedTimePerMinute:D,liveWatchedTimePerViewer:L,longer:H,newer:B,noBroadcastsFound:U,older:V,outliers:F,outliersTip:W,privateBroadcasts:j,publicBroadcasts:x,replay:q,replayHearts:G,replayHeartsPerMinute:Y,replayViewers:K,replayViewersPerMinute:z,replayWatchedTime:J,replayWatchedTimePerMinute:Z,replayWatchedTimePerViewer:Q,seconds:X,settings:$,shorter:ee,sortBy:te,title:ae,topBroadcasts:ne,total:re,viewers:se,viewersPerMinute:ie,watchedTime:oe,watchedTimePerMinute:le,watchedTimePerViewer:ue},t.advancedOptions=s,t.all=i,t.analytics=o,t.ascending=l,t.beta=u,t.broadcast=d,t.broadcasts=c,t.byMetric=p,t.columns=f,t.customizeColumns=h,t.date=m,t.descending=y,t.download=v,t.duration=g,t.emptyDescription=b,t.exportData=T,t.featured=E,t.filters=P,t.hearts=_,t.heartsPerMinute=M,t.lastNumber=C,t.letterA=k,t.letterZ=S,t.live=w,t.liveHearts=R,t.liveHeartsPerMinute=I,t.liveViewers=N,t.liveViewersPerMinute=A,t.liveWatchedTime=O,t.liveWatchedTimePerMinute=D,t.liveWatchedTimePerViewer=L,t.longer=H,t.newer=B,t.noBroadcastsFound=U,t.older=V,t.outliers=F,t.outliersTip=W,t.privateBroadcasts=j,t.publicBroadcasts=x,t.replay=q,t.replayHearts=G,t.replayHeartsPerMinute=Y,t.replayViewers=K,t.replayViewersPerMinute=z,t.replayWatchedTime=J,t.replayWatchedTimePerMinute=Z,t.replayWatchedTimePerViewer=Q,t.seconds=X,t.settings=$,t.shorter=ee,t.sortBy=te,t.title=ae,t.topBroadcasts=ne,t.total=re,t.viewers=se,t.viewersPerMinute=ie,t.watchedTime=oe,t.watchedTimePerMinute=le,t.watchedTimePerViewer=ue},1189:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(277),s=n(r),i=a(474),o=n(i),l=a(5),u=n(l),d=a(1),c=n(d),p=a(2),f=n(p),h=a(7),m=n(h),y=a(6),v=n(y),g=a(0),b=n(g),T=a(99),E=n(T),P=a(179),_=n(P),M=a(487),C=n(M),k=a(1193),S=a(1235),w=a(484),R=a(12),I=n(R),N=["Blur"],A=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.unmounted=!0,a.updateImage=a.updateImage.bind(a),a}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.unmounted=!1}},{key:"shouldComponentUpdate",value:function(e){var t=this,a=["img","blurRadius"];return a.some(function(a){return t.props[a]!==e[a]})}},{key:"componentWillUnmount",value:function(){this.pendingUpdateImage&&this.pendingUpdateImage.cancel(),this.unmounted=!0}},{key:"updateImage",value:function(e){var t=this;this.pendingUpdateImage&&this.pendingUpdateImage.cancel(),this.pendingUpdateImage=_.default.runAfterInteractions(function(){if(!t.unmounted)try{var a=t.props,n=a.blurRadius,r=a.useImageResolution,s=(0,w.isImageData)(e),i=e.width,o=e.height,l=E.default.findDOMNode(t.refs.canvas);if(!r){var u=E.default.findDOMNode(t);u&&(i=u.offsetWidth||i,o=u.offsetHeight||o)}l.width=i,l.height=o,s?(0,S.microBlur)(e,l,n):(0,k.stackBlurImage)(e,l,n,i,o),t.props.onLoadFunction()}catch(e){I.default.warn("Blur","updateImage","error",e),t.props.onLoadFailFunction()}},"blur-update")}},{key:"render",value:function(){var e=this.props,t=e.img,a=e.className,n=e.canvasClass,r=e.children,i=e.canvasStyle,l=N.slice(0);return a&&l.push(a),b.default.createElement("div",{className:(0,o.default)(new s.default(l)).join(" ")},b.default.createElement(C.default,{src:t,onload:this.updateImage}),b.default.createElement("canvas",{className:n,style:i,ref:"canvas"}),r)}}]),t}(b.default.Component);A.defaultProps={blurRadius:0,onLoadFunction:function(){},onLoadFailFunction:function(){}},A.propTypes={children:b.default.PropTypes.node,img:w.isStringOrImageData,blurRadius:b.default.PropTypes.number,onLoadFunction:b.default.PropTypes.func,onLoadFailFunction:b.default.PropTypes.func,useImageResolution:b.default.PropTypes.bool,className:b.default.PropTypes.string,canvasStyle:b.default.PropTypes.object,canvasClass:b.default.PropTypes.string},t.default=A},1190:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),s=n(r),i=a(34),o=a(20),l=a(36),u=a(1214);t.default={broadcast:i.broadcastPropType,commentInputState:u.commentInputShape,couchmode:s.default.PropTypes.bool,dispatch:s.default.PropTypes.func.isRequired,nextBroadcastCallback:s.default.PropTypes.func,player:s.default.PropTypes.object,profileIsVisible:s.default.PropTypes.bool,toggleProfileSidebar:s.default.PropTypes.func,user:o.userPropType,viewers:s.default.PropTypes.number,auth:l.authPropType}},1191:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.vip=t.tos=t.partners=t.nav=t.banning=void 0;var r=a(1183),s=n(r),i=a(482),o=n(i),l=a(1185),u=n(l),d=a(1186),c=n(d),p=a(1187),f=n(p);t.default={banning:s.default,nav:o.default,partners:u.default,tos:c.default,vip:f.default},t.banning=s.default,t.nav=o.default,t.partners=u.default,t.tos=c.default,t.vip=f.default},1192:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return(0,o.objectAssignWithAccessors)({},e,c)}Object.defineProperty(t,"__esModule",{value:!0}),t.drawerPropType=void 0,t.convertToDrawer=r;var s=a(0),i=n(s),o=a(9),l=a(511),u=n(l),d=i.default.PropTypes.shape({dismissable:i.default.PropTypes.bool}),c=(t.drawerPropType=i.default.PropTypes.shape({visible:i.default.PropTypes.bool,component:i.default.PropTypes.func,componentProps:i.default.PropTypes.object,options:d}),{get isSafari360AlertVisible(){return this.visible&&this.component===u.default}})},1193:function(e,t,a){"use strict";function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function r(e,t,a,r,s,l){if(!(isNaN(l)||l<1)){l|=0;for(var u=e.getContext("2d"),d=u.getImageData(t,a,r,s),c=d.data,p=void 0,f=void 0,h=void 0,m=void 0,y=void 0,v=void 0,g=void 0,b=void 0,T=void 0,E=void 0,P=void 0,_=void 0,M=void 0,C=void 0,k=void 0,S=void 0,w=void 0,R=l+l+1,I=r-1,N=s-1,A=l+1,O=A*(A+1)/2,D=new n,L=D,H=void 0,B=1;B<R;B++)L=L.next=new n,B===A&&(H=L);L.next=D;var U=null,V=null;m=h=0;for(var F=i[l],W=o[l],j=0;j<s;j++){P=_=M=y=v=g=0,b=A*(C=c[h]),T=A*(k=c[h+1]),E=A*(S=c[h+2]),y+=O*C,v+=O*k,g+=O*S,L=D;for(var x=0;x<A;x++)L.r=C,L.g=k,L.b=S,L=L.next;for(var q=1;q<A;q++)p=h+((I<q?I:q)<<2),y+=(L.r=C=c[p])*(w=A-q),v+=(L.g=k=c[p+1])*w,g+=(L.b=S=c[p+2])*w,P+=C,_+=k,M+=S,L=L.next;U=D,V=H;for(var G=0;G<r;G++)c[h]=y*F>>W,c[h+1]=v*F>>W,c[h+2]=g*F>>W,y-=b,v-=T,g-=E,b-=U.r,T-=U.g,E-=U.b,p=m+((p=G+l+1)<I?p:I)<<2,P+=U.r=c[p],_+=U.g=c[p+1],M+=U.b=c[p+2],y+=P,v+=_,g+=M,U=U.next,b+=C=V.r,T+=k=V.g,E+=S=V.b,P-=C,_-=k,M-=S,V=V.next,h+=4;m+=r}for(var Y=0;Y<r;Y++){_=M=P=v=g=y=0,h=Y<<2,b=A*(C=c[h]),T=A*(k=c[h+1]),E=A*(S=c[h+2]),y+=O*C,v+=O*k,g+=O*S,L=D;for(var K=0;K<A;K++)L.r=C,L.g=k,L.b=S,L=L.next;f=r;for(var z=1;z<=l;z++)h=f+Y<<2,y+=(L.r=C=c[h])*(w=A-z),v+=(L.g=k=c[h+1])*w,g+=(L.b=S=c[h+2])*w,P+=C,_+=k,M+=S,L=L.next,z<N&&(f+=r);h=Y,U=D,V=H;for(var J=0;J<s;J++)p=h<<2,c[p]=y*F>>W,c[p+1]=v*F>>W,c[p+2]=g*F>>W,y-=b,v-=T,g-=E,b-=U.r,T-=U.g,E-=U.b,p=Y+((p=J+A)<N?p:N)*r<<2,y+=P+=U.r=c[p],v+=_+=U.g=c[p+1],g+=M+=U.b=c[p+2],U=U.next,b+=C=V.r,T+=k=V.g,E+=S=V.b,P-=C,_-=k,M-=S,V=V.next,h+=r}u.putImageData(d,t,a)}}function s(e,t,a,n,s){var i=e.naturalWidth,o=e.naturalHeight;t.width=n,t.height=s;var l=t.getContext("2d");l.clearRect(0,0,n,s);var u=1;u=i/n>o/s?o/s:i/n;var d=i/u,c=o/u;l.drawImage(e,Math.floor((d-n)/-2),Math.floor((c-s)/-2),Math.ceil(d),Math.ceil(c)),isNaN(a)||a<1||r(t,0,0,n,s,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.stackBlurCanvasRGB=r,t.stackBlurImage=s;var i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24]},1196:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(3),g=a(272),b=a(1179),T=n(b),E=a(465),P=a(1270),_=n(P),M=a(9),C={baseClass:"ViewerBadge-mode",liveClass:"live",replayClass:"replay"},k=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getViewers",value:function(){var e=this.props,t=e.isLive,a=e.chat,n=e.ignoreChatOccupancyCount,r=e.viewers;return n?r:t&&a&&a.occupancy||r}},{key:"hideViewerCount",value:function(){return 0===this.props.viewers}},{key:"renderCountText",value:function(){if(!this.hideViewerCount())return this.props.isLive?m.default.createElement(_.default,{useSmallIcon:this.props.isConjoined,count:this.getViewers()}):m.default.createElement(_.default,{includeIcon:!1,count:this.props.viewers})}},{key:"possiblyRender360Label",value:function(){if(this.props.is360)return m.default.createElement("span",{className:"ViewerBadge-360"},"360")}},{key:"renderMode",value:function(){var e=this,t=[C.baseClass],a=void 0;if(this.props.isLive){if(this.props.hideLiveBadge)return;a=g.live,t.push(C.liveClass)}else{if(!this.props.includeEndedLabel)return;a=g.ended,t.push(C.replayClass)}return m.default.createElement(v.FormattedMessage,a,function(a){return m.default.createElement("span",{className:t.join(" ")},a,e.possiblyRender360Label())})}},{key:"render",value:function(){var e=["ViewerBadge"];if(this.props.isHidden&&e.push("ViewerBadge--hidden"),this.props.isConjoined&&!this.hideViewerCount()&&e.push("ViewerBadge--conjoined"),this.props.isLive){var t=String((0,M.abbreviatedInteger)(this.getViewers())).length;e.push("ViewerBadge--"+t+"Digits")}return this.props.withFixedWidth&&e.push("ViewerBadge--withFixedWidth"),m.default.createElement("div",{className:e.join(" ")},this.renderMode(),m.default.createElement("div",{className:"ViewerBadge-count"},this.renderCountText()))}}]),t}(m.default.Component);k.propTypes={viewers:m.default.PropTypes.number,intl:m.default.PropTypes.object,isLive:m.default.PropTypes.bool,is360:m.default.PropTypes.bool,isHidden:m.default.PropTypes.bool,isConjoined:m.default.PropTypes.bool,includeEndedLabel:m.default.PropTypes.bool,hideLiveBadge:m.default.PropTypes.bool,withFixedWidth:m.default.PropTypes.bool,chat:E.chatPropType,ignoreChatOccupancyCount:m.default.PropTypes.bool},k.defaultProps={isLive:!1,is360:!1,isHidden:!1,isConjoined:!1,includeEndedLabel:!1,hideLiveBadge:!1,ignoreChatOccupancyCount:!1,viewers:0},t.default=(0,y.connect)(T.default)((0,v.injectIntl)(k))},1197:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settings=t.producer=t.myStats=t.myProfile=t.logout=t.developer=void 0;var n=a(3),r=(0,n.defineMessages)({developer:{id:"authMenu.DEVELOPER",defaultMessage:"Developer Settings"},logout:{id:"authMenu.LOGOUT",defaultMessage:"Log Out"},myProfile:{id:"authMenu.MY_PROFILE",defaultMessage:"Profile"},myStats:{id:"authMenu.MY_STATS",defaultMessage:"Analytics"},producer:{id:"authMenu.PRODUCER",defaultMessage:"Producer"},settings:{id:"authMenu.SETTINGS",defaultMessage:"Settings"}}),s=r.developer,i=r.logout,o=r.myProfile,l=r.myStats,u=r.producer,d=r.settings;t.default={developer:s,logout:i,myProfile:o,myStats:l,producer:u,settings:d},t.developer=s,t.logout=i,t.myProfile=o,t.myStats=l,t.producer=u,t.settings=d},1198:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sparkle=void 0;var n=a(3),r=(0,n.defineMessages)({sparkle:{id:"sparkle.SPARKLE",defaultMessage:"SPARKLE"}}),s=r.sparkle;t.default={sparkle:s},t.sparkle=s},1199:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restore=t.ok=t.learnMore=t.done=t.copyrightPolicy=void 0;var n=a(3),r=(0,n.defineMessages)({copyrightPolicy:{id:"vanity.banning.common.COPYRIGHT_POLICY",defaultMessage:"Copyright Policy"},done:{id:"vanity.banning.common.DONE",defaultMessage:"Done"},learnMore:{id:"vanity.banning.common.LEARN_MORE",defaultMessage:"Learn more"},ok:{id:"vanity.banning.common.OK",defaultMessage:"OK"},restore:{id:"vanity.banning.common.RESTORE",defaultMessage:"RESTORE"}}),s=r.copyrightPolicy,i=r.done,o=r.learnMore,l=r.ok,u=r.restore;t.default={copyrightPolicy:s,done:i,learnMore:o,ok:l,restore:u},t.copyrightPolicy=s,t.done=i,t.learnMore=o,t.ok=l,t.restore=u},1200:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.permanentHelpEmail=t.permanentContent2=t.permanentContent1=t.content4=t.content3=t.content2=t.content1=t.communityGuidelines=void 0;var n=a(3),r=(0,n.defineMessages)({communityGuidelines:{id:"vanity.banning.content.COMMUNITY_GUIDELINES",defaultMessage:"Community Guidelines"},content1:{id:"vanity.banning.content.CONTENT_1",defaultMessage:"Your account was suspended because one or more of your broadcasts was found to be in violation of the {communityGuidelines}."},content2:{id:"vanity.banning.content.CONTENT_2",defaultMessage:"We have removed this content."},content3:{id:"vanity.banning.content.CONTENT_3",defaultMessage:"Your account will be suspended for 2 hours."},content4:{id:"vanity.banning.content.CONTENT_4",defaultMessage:"Please keep in mind that another violation of this type will result in a permanent suspension."},permanentContent1:{id:"vanity.banning.content.PERMANENT_CONTENT_1",defaultMessage:"Your account has been permanently suspended for violating the {communityGuidelines}."},permanentContent2:{id:"vanity.banning.content.PERMANENT_CONTENT_2",defaultMessage:"Please contact {helpEmail} with questions."},permanentHelpEmail:{id:"vanity.banning.content.PERMANENT_HELP_EMAIL",defaultMessage:"help@pscp.tv"}}),s=r.communityGuidelines,i=r.content1,o=r.content2,l=r.content3,u=r.content4,d=r.permanentContent1,c=r.permanentContent2,p=r.permanentHelpEmail;t.default={communityGuidelines:s,content1:i,content2:o,content3:l,content4:u,permanentContent1:d,permanentContent2:c,permanentHelpEmail:p},t.communityGuidelines=s,t.content1=i,t.content2=o,t.content3=l,t.content4=u,t.permanentContent1=d,t.permanentContent2=c,t.permanentHelpEmail=p},1201:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.title=t.contentTime=t.contentNoTime=void 0;var n=a(3),r=(0,n.defineMessages)({contentNoTime:{id:"vanity.banning.deactivate.CONTENT_NO_TIME",defaultMessage:"You deactivated your account."},contentTime:{id:"vanity.banning.deactivate.CONTENT_TIME",defaultMessage:"You deactivated your account on {banned_at}."},title:{id:"vanity.banning.deactivate.TITLE",defaultMessage:"Welcome back"}}),s=r.contentNoTime,i=r.contentTime,o=r.title;t.default={contentNoTime:s,contentTime:i,title:o},t.contentNoTime=s,t.contentTime=i,t.title=o},1202:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.title=t.content3=t.content2=t.content1=void 0;var n=a(3),r=(0,n.defineMessages)({content1:{id:"vanity.banning.dmca.CONTENT_1",defaultMessage:"Your account has been disabled for 4 hours in response to a DMCA takedown request from a copyright owner."},content2:{id:"vanity.banning.dmca.CONTENT_2",defaultMessage:"In order to restore your account, please confirm that you understand our {copyrightPolicy}."},content3:{id:"vanity.banning.dmca.CONTENT_3",defaultMessage:"Please be aware that your account may be permanently suspended for repeat infringement."},title:{id:"vanity.banning.dmca.TITLE",defaultMessage:"Your broadcast was reported in a DMCA complaint."}}),s=r.content1,i=r.content2,o=r.content3,l=r.title;t.default={content1:s,content2:i,content3:o,title:l},t.content1=s,t.content2=i,t.content3=o,t.title=l},1203:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.title=t.content2=t.content1=void 0;var n=a(3),r=(0,n.defineMessages)({content1:{id:"vanity.banning.dmcapermanent.CONTENT_1",defaultMessage:"Your account has now been permanently disabled as a result of repeated copyright violations."},content2:{id:"vanity.banning.dmcapermanent.CONTENT_2",defaultMessage:"For more information please see our {copyrightPolicy}."},title:{id:"vanity.banning.dmcapermanent.TITLE",defaultMessage:"Your broadcast was reported in a DMCA complaint."}}),s=r.content1,i=r.content2,o=r.title;t.default={content1:s,content2:i,title:o},t.content1=s,t.content2=i,t.title=o},1204:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.title=t.content3=t.content2=t.content1=void 0;var n=a(3),r=(0,n.defineMessages)({content1:{id:"vanity.banning.dmcaunban.CONTENT_1",defaultMessage:"Your account was disabled in response to a DMCA takedown request from a copyright owner."},content2:{id:"vanity.banning.dmcaunban.CONTENT_2",defaultMessage:"Before restoring your account, please confirm that you understand our {copyrightPolicy}."},content3:{id:"vanity.banning.dmcaunban.CONTENT_3",defaultMessage:"Please be aware that your account may be permanently suspended for repeat infringement."},title:{id:"vanity.banning.dmcaunban.TITLE",defaultMessage:"Your broadcast was reported in a DMCA complaint."}}),s=r.content1,i=r.content2,o=r.content3,l=r.title;t.default={content1:s,content2:i,content3:o,title:l},t.content1=s,t.content2=i,t.content3=o,t.title=l},1205:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.content2=t.content1=void 0;var n=a(3),r=(0,n.defineMessages)({content1:{id:"vanity.banning.producerviolation.CONTENT_1",defaultMessage:"We have disabled one or more of your broadcasts for possible violation of our {rules} regarding acceptable content. As a result the Producer feature on your account has now been permanently disabled."},content2:{id:"vanity.banning.producerviolation.CONTENT_2",defaultMessage:"If you believe we removed your content in error, please respond to us at producer-help@pscp.tv with a statement under penalty of perjury that you are authorized to post the material, it complies with our acceptable content policy, and it was removed by mistake or misidentification."}}),s=r.content1,i=r.content2;t.default={content1:s,content2:i},t.content1=s,t.content2=i},1206:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trustedPartners=t.content4=t.content3=t.content2=t.content1=void 0;var n=a(3),r=(0,n.defineMessages)({content1:{id:"vanity.banning.selfharm.CONTENT_1",defaultMessage:"Hello -"},content2:{id:"vanity.banning.selfharm.CONTENT_2",defaultMessage:"Someone from our community believes that you might be going through a difficult time. We want you to know that we care, and we'd like to offer you some support."},content3:{id:"vanity.banning.selfharm.CONTENT_3",defaultMessage:"If you are having thoughts of self-harm or suicide, please consider reaching out to one of our {trustedPartners}."},content4:{id:"vanity.banning.selfharm.CONTENT_4",defaultMessage:"You are not alone."},trustedPartners:{id:"vanity.banning.selfharm.TRUSTED_PARTNERS",defaultMessage:"trusted partners"}}),s=r.content1,i=r.content2,o=r.content3,l=r.content4,u=r.trustedPartners;t.default={content1:s,content2:i,content3:o,content4:l,trustedPartners:u},t.content1=s,t.content2=i,t.content3=o,t.content4=l,t.trustedPartners=u},1207:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.title=t.content=void 0;var n=a(3),r=(0,n.defineMessages)({content:{id:"vanity.banning.spam.CONTENT",defaultMessage:"To verify the safety of our App we want to perform a check to make sure you are not a robot. Beep Boop."},title:{id:"vanity.banning.spam.TITLE",defaultMessage:"Strange activity has been detected on your account."}}),s=r.content,i=r.title;t.default={content:s,title:i},t.content=s,t.title=i},1208:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(175),g=a(1181),b=n(g),T=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.toggleMute=a.toggleMute.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"toggleMute",value:function(e){e.preventDefault();var t=this.props.muted;return t?b.default.unmuteRequest():b.default.muteRequest(),t?this.props.onClickOverride?this.props.onClickOverride(!1):this.props.dispatchAudioOn():this.props.onClickOverride?this.props.onClickOverride(!0):this.props.dispatchAudioOff()}},{key:"render",value:function(){var e=["MuteButton"];return this.props.active&&e.push("MuteButton--isActive"),m.default.createElement("a",{href:"#",className:e.join(" "),onClick:this.toggleMute},this.props.muted?m.default.createElement("div",{className:"MuteButton-off"}):m.default.createElement("div",{className:"MuteButton-on"}))}}]),t}(m.default.Component);T.defaultProps={muted:!1,active:!1},T.propTypes={dispatchAudioOff:m.default.PropTypes.func,dispatchAudioOn:m.default.PropTypes.func,muted:m.default.PropTypes.bool,active:m.default.PropTypes.bool,onClickOverride:m.default.PropTypes.func},t.default=(0,y.connect)(function(){return{}},v.videoPlayerDispatchMapper)(T)},1209:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EmbedLinkClass=void 0;var r=a(4),s=n(r),i=a(22),o=n(i),l=a(5),u=n(l),d=a(1),c=n(d),p=a(2),f=n(p),h=a(7),m=n(h),y=a(6),v=n(y),g=a(0),b=n(g),T=a(15),E=a(1180),P=a(34),_=a(1215),M=a(268),C=a(20),k=a(24),S=a(1268),w=a(27),R=a(122),I=a(79),N=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.href=null,a.postMessage={outbound:{openLink:function(){}}},a.setProperties(e),a.handleClick=a.handleClick.bind(a),a}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",
value:function(){"object"===("undefined"==typeof window?"undefined":(0,o.default)(window))&&(this.postMessage=(0,S.postMessage)(window.parent))}},{key:"componentWillReceiveProps",value:function(e){this.setProperties(e)}},{key:"setProperties",value:function(e){var t=e.disabled,a=e.broadcast,n=e.twitterEvent,r=e.user;t?this.href=null:n&&n.url?(this.title=n.title,this.href=n.url):a&&a.id?this.href=this.buildLinkWithParams(e,a.urlWithUsername):r&&r.username?this.href=r.url:this.href="#"}},{key:"buildLinkWithParams",value:function(e,t){var a=e.broadcast,n=e.replay;if(a.isRunning||!n)return t;var r=Math.round(n.elapsed),i=(0,s.default)({},(0,w.withAutoplay)(),(0,w.withTime)(r));return(0,I.withQuery)(t,i)}},{key:"handleClick",value:function(e){var t=this.props,a=t.user,n=t.broadcast,r=t.disabled;if(this.props.onClick(e),!r){var s=a&&a.username?"user":"missing",i=n&&n.id?"broadcast":s;this.props.dispatch((0,k.trackEvent)("VIEW_ON_PERISCOPE",{contentType:i})),this.postMessage.outbound.openLink(this.href)}}},{key:"render",value:function(){return b.default.createElement("a",(0,s.default)({className:"EmbedLink"},(0,R.getOverrideProps)(this.props,t.OverrideProps),{title:this.title,href:this.href,onClick:this.handleClick,target:"_blank"}),this.props.children)}}]),t}(b.default.Component);N.OverrideProps=["className"],N.defaultProps={disabled:!1,dispatch:function(){},onClick:function(){}},N.propTypes={className:b.default.PropTypes.string,broadcast:P.broadcastPropType,twitterEvent:_.twitterEventPropType,replay:M.replayPropType.isRequired,user:C.userPropType,disabled:b.default.PropTypes.bool,onClick:b.default.PropTypes.func,dispatch:b.default.PropTypes.func,children:b.default.PropTypes.node};t.EmbedLinkClass=N;t.default=(0,T.connect)(E.replayFullMapper)(N)},1210:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s.default.createElement("svg",{viewBox:"0 0 34 34",className:"PlayIcon"},s.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.default.createElement("g",{transform:"translate(-1370.000000, -955.000000)",fill:"#FFFFFF"},s.default.createElement("polygon",{transform:"translate(1387.000000, 972.000000) rotate(90.000000) translate(-1387.000000, -972.000000)",points:"1387 955 1404 989 1370 989"}))))};var r=a(0),s=n(r)},1211:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="BROADCAST",r="USER",s="ANDROID",i="IOS",o="PERISCOPE";t.CONTENT_TYPE_BROADCAST=n,t.CONTENT_TYPE_USER=r,t.PLATFORM_TYPE_ANDROID=s,t.PLATFORM_TYPE_IOS=i,t.PLATFORM_TYPE_NATIVE=o},1213:function(e,t,a){"use strict";function n(e){var t=e.CommentInput,a={};return a.commentInputState={},t&&(a.commentInputState.replyUsername=t.replyUsername,a.commentInputState.isFocused=t.isFocused),a}Object.defineProperty(t,"__esModule",{value:!0}),t.commentInputStateToProps=n},1214:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.commentInputShape=void 0;var r=a(0),s=n(r);t.commentInputShape=s.default.PropTypes.shape({isFocused:s.default.PropTypes.bool,replyUsername:s.default.PropTypes.string})},1215:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.twitterEventPropType=t.twitterEventShape=void 0;var r=a(0),s=n(r),i=t.twitterEventShape={title:s.default.PropTypes.string,url:s.default.PropTypes.string};t.twitterEventPropType=s.default.PropTypes.shape(i)},1216:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getModerationPrompt=t.isModeratedForBroadcast=void 0;var r=a(1256),s=n(r),i=a(515),o=n(i),l=a(1261);t.isModeratedForBroadcast=function(e,t){return!!e&&(e.sentence_type!==s.default.COMMENTING_SUSPENDED&&e.sentence_type!==s.default.COMMENTING_DISABLED||t.id===e.broadcast_id)},t.getModerationPrompt=function(e,t){var a=t.formatMessage,n=void 0,r=e.report_type,i=e.message_body;if(r)switch(r){case o.default.ABUSE:n=a(l.reportTypeAbuse);break;case o.default.SPAM:n=a(l.reportTypeSpam);break;case o.default.OTHER:default:n=a(l.reportTypeOther)}if(r&&i)switch(i="*"+i+"*",e.sentence_type){case s.default.COMMENTING_SUSPENDED:return a(l.commentingSuspendedWithReportAndMessage,{messageBody:i,reportTypeString:n});case s.default.COMMENTING_DISABLED:return a(l.commentingDisabledWithReportAndMessage,{messageBody:i,reportTypeString:n});case s.default.GLOBAL_COMMENTING_SUSPENDED:return a(l.globalCommentingSuspendedWithReportAndMessage,{messageBody:i,reportTypeString:n});case s.default.GLOBAL_COMMENTING_DISABLED:return a(l.globalCommentingDisabledWithReportAndMessage,{messageBody:i,reportTypeString:n});default:return""}else if(r)switch(e.sentence_type){case s.default.COMMENTING_SUSPENDED:return a(l.commentingSuspendedWithReport,{reportTypeString:n});case s.default.COMMENTING_DISABLED:return a(l.commentingDisabledWithReport,{reportTypeString:n});case s.default.GLOBAL_COMMENTING_SUSPENDED:return a(l.globalCommentingSuspendedWithReport,{reportTypeString:n});case s.default.GLOBAL_COMMENTING_DISABLED:return a(l.globalCommentingDisabledWithReport,{reportTypeString:n});default:return""}else switch(e.sentence_type){case s.default.COMMENTING_SUSPENDED:return a(l.commentingSuspended);case s.default.COMMENTING_DISABLED:return a(l.commentingDisabled);case s.default.GLOBAL_COMMENTING_SUSPENDED:return a(l.globalCommentingSuspended);case s.default.GLOBAL_COMMENTING_DISABLED:return a(l.globalCommentingDisabled);default:return""}}},1217:function(e,t,a){"use strict";function n(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,s.abbreviatedInteger)(t);return a?0===t?e.formatMessage(r.countLabelNoViewers):1===t?e.formatMessage(r.countLabelOneViewer):e.formatMessage(r.countLabelPlural,{viewerCount:n}):n}Object.defineProperty(t,"__esModule",{value:!0}),t.getViewers=n;var r=a(1224),s=a(9)},1218:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),s=n(r),i=a(0),o=n(i),l=a(15),u=a(21),d=a(67),c=n(d),p=a(462),f=a(1333),h=n(f),m=a(464),y=a(467),v=function(e){return o.default.createElement(h.default,(0,s.default)({},e,{modal:(0,s.default)({},e.modal,{visible:e.modal.visible&&!e.modal.options.isGlobal})}))};v.propTypes={dispatch:o.default.PropTypes.func.isRequired,modal:m.modalPropType.isRequired,broadcastSidebar:y.broadcastSidebarPropType},v.defaultProps={modal:m.modalDefaultProps},t.default=(0,l.connect)((0,u.compose)(p.modalStateToProps,(0,c.default)(["broadcastSidebar"])),p.modalDispatchToProps)(v)},1219:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return i.default.createElement("span",{className:"ViewersText"},(0,l.getViewers)(e.intl,e.count,e.withText))}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),i=n(s),o=a(3),l=a(1217);r.propTypes={intl:o.intlShape.isRequired,count:i.default.PropTypes.number.isRequired,withText:i.default.PropTypes.bool},r.defaultProps={count:0},t.default=(0,o.injectIntl)(r)},1220:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=["InfoIcon"];return e.isActive&&t.push("isActive"),i.default.createElement("svg",{className:t.join(" "),viewBox:"0 0 30 30"},i.default.createElement("path",{className:"InfoIcon-innerCircle",d:"M15,27.9C7.9,27.9,2.1,22.1,2.1,15S7.9,2.1,15,2.1S27.9,7.9,27.9,15S22.1,27.9,15,27.9z"}),i.default.createElement("g",null,i.default.createElement("path",{className:"InfoIcon-i",d:"M13.1,9h3.1V6.2h-3.1V9z M13.1,23.8h3.1V11.2h-3.1V23.8z"})),i.default.createElement("path",{className:"InfoIcon-outerCircle",d:"M15,0C6.7,0,0,6.7,0,15s6.7,15,15,15s15-6.7,15-15S23.3,0,15,0z M15,27.9C7.9,27.9,2.1,22.1,2.1,15S7.9,2.1,15,2.1S27.9,7.9,27.9,15S22.1,27.9,15,27.9z"}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s=a(0),i=n(s);r.propTypes={isActive:i.default.PropTypes.bool}},1221:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.analyticsEventValues=void 0;var r=a(11),s=n(r),i="on_intend_to_play",o="on_ad_skip",l="on_play",u="on_pause",d="on_mute",c="on_unmute",p="on_tick_event",f="on_track_finished",h="on_replay",m={ON_INTEND_TO_PLAY:i,ON_AD_SKIP:o,ON_PLAY:l,ON_PAUSE:u,ON_MUTE:d,ON_UNMUTE:c,ON_TICK_EVENT:p,ON_TRACK_FINISHED:f,ON_REPLAY:h},y=(0,s.default)(m).map(function(e){return m[e]});t.analyticsEventValues=y,t.default=m},1222:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.tweet=t.timecode=t.button=void 0;var r=a(282),s=n(r),i=a(500),o=n(i),l=a(1277),u=n(l);t.default={button:s.default,timecode:o.default,tweet:u.default},t.button=s.default,t.timecode=o.default,t.tweet=u.default},1223:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.analytics=void 0;var n=a(3),r=(0,n.defineMessages)({analytics:{id:"teaching.ANALYTICS",defaultMessage:"Now you can view your analytics!"}}),s=r.analytics;t.default={analytics:s},t.analytics=s},1224:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countLabelPlural=t.countLabelOneViewer=t.countLabelNoViewers=void 0;var n=a(3),r=(0,n.defineMessages)({countLabelNoViewers:{id:"viewers.COUNT_LABEL_NO_VIEWERS",defaultMessage:"No Viewers"},countLabelOneViewer:{id:"viewers.COUNT_LABEL_ONE_VIEWER",defaultMessage:"1 Viewer"},countLabelPlural:{id:"viewers.COUNT_LABEL_PLURAL",defaultMessage:"{viewerCount} Viewers"}}),s=r.countLabelNoViewers,i=r.countLabelOneViewer,o=r.countLabelPlural;t.default={countLabelNoViewers:s,countLabelOneViewer:i,countLabelPlural:o},t.countLabelNoViewers=s,t.countLabelOneViewer=i,t.countLabelPlural=o},1229:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CommentContainer=void 0;var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(3),g=a(46),b=a(24),T=a(47),E=a(1179),P=a(1225),_=n(P),M=a(34),C=a(461),k=a(1214),S=a(36),w=a(472),R=n(w),I=a(1322),N=n(I),A=a(1213),O=a(275),D=a(9),L=a(1216),H=a(21),B=a(274),U=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.state={isCoolDown:!1,isCommentError:!1},a.onMouseDown=a.onMouseDown.bind(a),a.commentError=a.commentError.bind(a),a.startCoolDown=a.startCoolDown.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.setFocusTimeout),clearTimeout(this.coolDownTimer),clearTimeout(this.commentErrorTimer)}},{key:"isAuthed",value:function(){return this.props.auth.isLoggedIn}},{key:"onMouseDown",value:function(e){var t=this;this.isAuthed()?!this.props.commentInputState.isFocused&&e.target.className.indexOf("CommentInput-input")<0&&(clearTimeout(this.setFocusTimeout),this.setFocusTimeout=setTimeout(function(){return t.props.dispatch((0,O.commentInputSetFocus)(!0))})):this.handleSignInCta()}},{key:"handleSignInCta",value:function(){this.props.dispatch((0,g.openSignInModal)({openedFrom:"COMMENT"})),this.props.dispatch((0,b.trackEvent)("SIGN_IN_COMMENT_CLICK"))}},{key:"isDisabled",value:function(){var e=this.props,t=e.chat,a=e.broadcast,n=e.video;return(0,L.isModeratedForBroadcast)(t.moderation,a)||this.isAuthed()&&n&&!n.canChat}},{key:"getChatStreamDisabled",value:function(){var e=this.props,t=e.video,a=e.chat;return t&&t.canChat?!!a.sessionError:t&&t.type||void 0}},{key:"getParticipantColorName",value:function(){return(0,D.getParticipantColorName)(this.props.chat.chatSession.participant_index)}},{key:"renderComment",value:function(){var e=["CommentContainer-comment"],t={};return this.isAuthed()&&(t.backgroundImage="url("+this.props.auth.user.avatarUrl+")",this.props.chat.chatSession&&this.props.chat.chatSession.participant_index&&e.push("CommentContainer-participant"+this.getParticipantColorName())),m.default.createElement("div",{className:e.join(" "),onMouseDown:this.onMouseDown},m.default.createElement("div",{className:"CommentContainer-avatarContainer"},m.default.createElement("div",{className:"CommentContainer-avatar",style:t}),this.state.isCoolDown&&m.default.createElement("div",{className:"CommentContainer-pieLoaderContainer"},m.default.createElement("div",{className:"CommentContainer-pieLoader"},m.default.createElement("span",null)))),this.renderCommentBody())}},{key:"renderCommentBody",value:function(){if(this.isAuthed())return m.default.createElement("div",{className:"CommentContainer-body"},m.default.createElement(N.default,{authUser:this.props.auth.user,broadcast:this.props.broadcast,chatStreamDisabled:this.getChatStreamDisabled(),commentError:this.commentError,dispatch:this.props.dispatch,intl:this.props.intl,isCoolDown:this.state.isCoolDown,isFocused:this.props.commentInputState.isFocused,moderation:this.props.chat.moderation,replyUsername:this.props.commentInputState.replyUsername,startCoolDown:this.startCoolDown,onChange:this.props.onChange}));var e=this.getChatStreamDisabled()?m.default.createElement(v.FormattedMessage,B.loginHeart):m.default.createElement(v.FormattedMessage,B.loginComment);return m.default.createElement("div",{className:"CommentContainer-body"},m.default.createElement("div",{className:"CommentContainer-text"},e))}},{key:"getDisabledCommentsReason",value:function(){return"Broadcast too full"}},{key:"startCoolDown",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;this.setState({isCoolDown:!0}),clearTimeout(this.coolDownTimer),this.coolDownTimer=setTimeout(function(){e.setState({isCoolDown:!1})},t)}},{key:"commentError",value:function(){var e=this;this.setState({isCommentError:!0}),clearTimeout(this.commentErrorTimer),this.commentErrorTimer=setTimeout(function(){e.setState({isCommentError:!1})},500)}},{key:"render",value:function(){var e=["CommentContainer"];return this.props.commentInputState.isFocused&&e.push("CommentContainer--focused"),this.isAuthed()||e.push("CommentContainer--unauthed"),this.state.isCoolDown&&e.push("CommentContainer--isCoolDown"),this.state.isCommentError&&e.push("CommentContainer--isCommentError"),this.isDisabled()&&e.push("CommentContainer--isDisabled"),m.default.createElement("div",{className:e.join(" ")},this.props.isLive?this.renderComment():null,this.props.children)}}]),t}(m.default.Component);U.defaultProps={commentInputState:{}},U.propTypes={commentInputState:k.commentInputShape,auth:S.authPropType,broadcast:M.broadcastPropType,chat:E.chatSessionPropType,dispatch:m.default.PropTypes.func.isRequired,intl:v.intlShape.isRequired,isLive:m.default.PropTypes.bool,video:C.videoPropType,children:m.default.PropTypes.oneOfType([m.default.PropTypes.element,m.default.PropTypes.arrayOf(m.default.PropTypes.element)]),onChange:m.default.PropTypes.func},t.CommentContainer=U,t.default=(0,y.connect)((0,H.compose)(_.default,A.commentInputStateToProps,T.authStateToProps,E.chatSessionMapper))((0,v.injectIntl)((0,R.default)(U)))},1230:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(3),v=a(16),g=n(v),b=a(463),T=n(b),E=a(60),P=n(E),_=a(34),M=a(1215),C=a(20),k=a(512),S=n(k),w=a(1345),R=n(w),I=a(1209),N=n(I),A=a(57),O=n(A),D=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.clickHandler=a.clickHandler.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"has360Broadcast",value:function(){return this.props.broadcast&&this.props.broadcast.broadcast&&this.props.broadcast.broadcast.has360Video}},{key:"hasBroadcast",value:function(){return this.props.broadcast&&this.props.broadcast.id}},{key:"hasUser",value:function(){return this.props.user&&this.props.user.id}},{key:"hasEvent",value:function(){return this.props.twitterEvent&&this.props.twitterEvent.title&&this.props.twitterEvent.url}},{key:"shouldRenderPeriscopeCTA",value:function(){return!O.default.isEnabled("CardEventCTA")&&(this.hasBroadcast()||this.hasUser())}},{key:"shouldRenderEventCTA",value:function(){return!O.default.isDisabled("CardEventCTA")&&this.hasEvent()}},{key:"clickHandler",value:function(e){e.stopPropagation(),this.props.onClick()}},{key:"shouldDisableLink",value:function(){return!!this.has360Broadcast()||g.default.isDevice()}},{key:"renderCTAText",value:function(e){return m.default.createElement("p",{className:"EmbedHeader-ctaText"},e)}},{key:"render",value:function(){if(this.shouldRenderEventCTA())return m.default.createElement("div",{className:"EmbedHeader"},m.default.createElement(N.default,{onClick:this.clickHandler,twitterEvent:this.props.twitterEvent},m.default.createElement("div",{className:"EmbedHeader-cta EmbedHeader-cta--twitterEvent u-pullLeft"},m.default.createElement("p",{className:"EmbedHeader-ctaText"},this.props.twitterEvent.title),m.default.createElement(R.default,null))));if(this.shouldRenderPeriscopeCTA()){var e=this.props.user?P.default.periscopeLink:T.default.external;return m.default.createElement("div",{className:"EmbedHeader"},m.default.createElement(N.default,{onClick:this.clickHandler,broadcast:this.props.broadcast,user:this.props.user,disabled:this.shouldDisableLink()},m.default.createElement("div",{className:"EmbedHeader-cta EmbedHeader-cta--periscope u-pullRight"},m.default.createElement(y.FormattedMessage,e,this.renderCTAText),m.default.createElement(S.default,null))))}return null}}]),t}(m.default.Component);D.defaultProps={onClick:function(){}},D.propTypes={broadcast:_.broadcastPropType,onClick:m.default.PropTypes.func,twitterEvent:M.twitterEventPropType,user:C.userPropType},t.default=D},1231:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.size,a=e.style,n=(0,i.default)({fontSize:t,lineHeight:p*t+"px"},a);return l.default.createElement("div",{className:"BetaBadge",style:n},l.default.createElement(u.FormattedMessage,c.default.beta))}Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),i=n(s);t.default=r;var o=a(0),l=n(o),u=a(3),d=a(1184),c=n(d),p=19/14;r.defaultProps={size:14},r.propTypes={size:l.default.PropTypes.number,style:l.default.PropTypes.object}},1232:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t={};return e.isVertical||(t.transform="rotate(90deg)"),i.default.createElement("svg",{className:"Ellipsis",style:t,width:"4px",height:"20px",viewBox:"0 0 4 20"},i.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none"},i.default.createElement("g",{transform:"translate(-868.000000, -37.000000)",fill:"#40A4C4"},i.default.createElement("g",{transform:"translate(868.000000, 37.000000)"},i.default.createElement("circle",{cx:"2",cy:"2",r:"2"}),i.default.createElement("circle",{cx:"2",cy:"10",r:"2"}),i.default.createElement("circle",{cx:"2",cy:"18",r:"2"})))))}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),i=n(s);r.propTypes={isVertical:i.default.PropTypes.bool},r.defaultProps={isVertical:!0},t.default=r},1233:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.userEventValues=void 0;var r=a(11),s=n(r),i=a(124),o=n(i),l=(0,o.default)({REGISTER_USER_INTERACTION:!0,AD_SKIP_REQUEST:!0,MUTE_REQUEST:!0,PAUSE_REQUEST:!0,PLAY_REQUEST:!0,PLAYBACK_REQUEST:!0,REPLAY_REQUEST:!0,UNMUTE_REQUEST:!0});t.userEventValues=(0,s.default)(l);t.default=l},1234:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.recommended=t.form=t.button=t.viewBroadcast=t.title=t.newNormalButton=t.newButton=t.new360Button=t.desc=t.banned2=t.banned1=void 0;var r=a(3),s=a(1273),i=n(s),o=a(1274),l=n(o),u=a(1275),d=n(u),c=(0,r.defineMessages)({banned1:{id:"producer.BANNED_1",defaultMessage:"We have disabled one or more of your broadcasts for possible violation of our {rules} regarding acceptable content. As a result the Producer feature on your account has now been permanently disabled."},banned2:{id:"producer.BANNED_2",defaultMessage:"If you believe we removed your content in error, please respond to us at producer-help@pscp.tv with a statement under penalty of perjury that you are authorized to post the material, it complies with our acceptable content policy, and it was removed by mistake or misidentification."},desc:{id:"producer.DESC",defaultMessage:"This information allows you to connect from outside encoding sources. For more information please visit our {helpCenter}"},new360Button:{id:"producer.NEW_360_BUTTON",defaultMessage:"360 Source"},newButton:{id:"producer.NEW_BUTTON",defaultMessage:"Create New Source"},newNormalButton:{id:"producer.NEW_NORMAL_BUTTON",defaultMessage:"Normal Source"},title:{id:"producer.TITLE",defaultMessage:"Producer"},viewBroadcast:{id:"producer.VIEW_BROADCAST",defaultMessage:"View Broadcast"}}),p=c.banned1,f=c.banned2,h=c.desc,m=c.new360Button,y=c.newButton,v=c.newNormalButton,g=c.title,b=c.viewBroadcast;t.default={banned1:p,banned2:f,desc:h,new360Button:m,newButton:y,newNormalButton:v,title:g,viewBroadcast:b,button:i.default,form:l.default,recommended:d.default},t.banned1=p,t.banned2=f,t.desc=h,t.new360Button=m,t.newButton=y,t.newNormalButton=v,t.title=g,t.viewBroadcast=b,t.button=i.default,t.form=l.default,t.recommended=d.default},1235:function(e,t,a){"use strict";function n(e,t){var a=document.createElement("canvas"),n=a.getContext("2d"),r=a.width=e.width,s=a.height=e.height,i=t.width,o=t.height;n.putImageData(e,0,0);var l=r/i,u=s/o,d=l>u,c=d?u:l,p=r/c,f=s/c,h=Math.floor((p-i)/-2),m=Math.floor((f-o)/-2),y=Math.ceil(p),v=Math.ceil(f),g=t.getContext("2d");g.clearRect(0,0,i,o),g.drawImage(a,h,m,y,v)}function r(e,t,a){t.width=300,t.height=150,n(e,t),(0,s.stackBlurCanvasRGB)(t,0,0,t.width,t.height,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.microBlur=r;var s=a(1193)},1245:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.dispatch,a=e.user,n=e.withDisplayName;return i.default.createElement(u.default,{dispatch:t,user:a,withDisplayName:n})}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),i=n(s),o=a(15),l=a(1342),u=n(l);r.propTypes={dispatch:i.default.PropTypes.func.isRequired,user:i.default.PropTypes.object.isRequired,withDisplayName:i.default.PropTypes.bool},t.default=(0,o.connect)()(r)},1246:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(21),g=a(1180),b=a(175),T=a(268),E=a(189),P=a(476),_=n(P),M=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.onSeekComplete=a.onSeekComplete.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"onSeekComplete",value:function(e){this.props.dispatchSeekTo(e),this.props.dispatchPlayVideo()}},{key:"render",value:function(){return m.default.createElement(_.default,{onSeekComplete:this.onSeekComplete,replay:this.props.replay,videoStartDate:this.props.videoStartDate,disableInteraction:this.props.disableInteraction})}}]),t}(m.default.Component);M.propTypes={dispatchSeekTo:m.default.PropTypes.func.isRequired,dispatchPlayVideo:m.default.PropTypes.func.isRequired,replay:T.replayPropType.isRequired,videoStartDate:E.dateString.isRequired,disableInteraction:m.default.PropTypes.bool},t.default=(0,y.connect)((0,v.compose)(g.replayFullMapper),(0,v.compose)(g.replayDispatchMapper,b.videoPlayerDispatchMapper))(M)},1247:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(3),v=a(24),g=a(1211),b=a(1260),T=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.trackClick=a.trackClick.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"trackClick",value:function(){this.props.dispatch((0,v.trackEvent)(this.props.trackEventName,{location:this.props.trackEventLocation}))}},{key:"possiblyRenderIcon",value:function(){switch(this.props.platform){case g.PLATFORM_TYPE_ANDROID:return m.default.createElement("span",{className:"AppLink-icon AppLink-icon--playstore"},m.default.createElement("img",{src:"/v/images/logo_playstore.svg"}));case g.PLATFORM_TYPE_IOS:return m.default.createElement("span",{className:"AppLink-icon AppLink-icon--apple"},m.default.createElement("img",{src:"/v/images/logo_apple.svg"}));case g.PLATFORM_TYPE_NATIVE:return m.default.createElement("span",{className:"AppLink-icon AppLink-icon--native"},m.default.createElement("img",{src:"/v/images/largepin.svg"}));default:return null}}},{key:"render",value:function(){var e=["AppLink","AppLink--cta"];return this.props.platform&&e.push("AppLink--withIcon"),m.default.createElement("a",{className:e.join(" "),href:this.props.href,onClick:this.trackClick},this.possiblyRenderIcon(),this.props.children)}}]),t}(m.default.Component);t.default=T,T.propTypes={children:m.default.PropTypes.node,href:m.default.PropTypes.string.isRequired,platform:m.default.PropTypes.oneOf([g.PLATFORM_TYPE_ANDROID,g.PLATFORM_TYPE_IOS,g.PLATFORM_TYPE_NATIVE]),dispatch:m.default.PropTypes.func.isRequired,trackEventName:m.default.PropTypes.string,trackEventLocation:m.default.PropTypes.string},T.defaultProps={children:m.default.createElement(y.FormattedMessage,b.app.open),trackEventLocation:"",platform:null}},1248:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(1189),v=n(y),g=a(98),b=a(34),T=a(9),E=n(T),P=a(16),_=n(P),M={baseClass:"BroadcastBackground",readyState:"ready",flexClass:"u-flexParent"},C={baseClass:"BackgroundImage",dimOpacity:"u-opacity-50",brightOpacity:"u-opacity-90",transition:"u-transition-1",flexClass:"u-flexItem"},k=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.reset()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.revealImageTimeout)}},{key:"componentWillReceiveProps",value:function(e){(!this.props.broadcast&&e.broadcast||this.props.broadcast&&e.broadcast&&(e.broadcast.id!==this.props.broadcast.id||e.broadcast.state!==this.props.broadcast.state))&&(this.props.dispatch((0,g.playerBackgroundReady)(!1)),this.reset())}},{key:"componentWillUnmount",value:function(){clearTimeout(this.revealImageTimeout)}},{key:"reset",value:function(){this.backgroundShown=!1,this.setState({imageFadeOut:!1}),this.broadcastBackgroundReady()}},{key:"broadcastBackgroundReady",value:function(e){this.backgroundShown||(this.backgroundShown=!0,this.props.dispatch((0,g.playerBackgroundReady)(!0)),e&&e.target&&e.target.width>e.target.height&&this.props.player.height>this.props.player.width&&this.props.dispatch((0,g.playerCurrentOrientation)(270)))}},{key:"buildImageClasses",value:function(){var e=this,t=[C.baseClass,C.flexClass],a=!1;return(this.props.player.isPlayback&&this.props.broadcast.isEnded||_.default.shouldUseMobileLayout())&&(a=!0),a?this.state&&this.state.imageFadeOut?(t.push(C.transition),t.push(C.dimOpacity)):(t.push(C.brightOpacity),clearTimeout(this.revealImageTimeout),this.revealImageTimeout=setTimeout(function(){e.setState({imageFadeOut:!0})})):t.push(C.brightOpacity),this.props.broadcast.isEnded&&(t=t.filter(function(e){return e!==C.brightOpacity}),t.push(C.dimOpacity)),E.default.onlyUnique(t).join(" ")}},{key:"possiblyRenderBackgroundImage",value:function(){if(this.props.broadcast.image_url){var e=""!==this.props.broadcast.localThumbnailUrl?this.props.broadcast.localThumbnailUrl:this.props.broadcast.image_url;if(!this.props.shouldBlur){var t={backgroundImage:"url("+e+")"};return m.default.createElement("div",{className:this.buildImageClasses(),style:t},m.default.createElement("img",{style:{display:"none"},src:e}))}return m.default.createElement(v.default,{className:this.buildImageClasses(),canvasClass:"u-fullScreen",img:e,blurRadius:80})}}},{key:"buildBackgroundClasses",value:function(){var e=[M.baseClass,M.flexClass],t=this.props.player&&this.props.player.playerBackgroundReady;return this.props.player.videoHasStarted&&this.props.player.isPlayback&&!_.default.mobile()&&(t=!1),t&&e.push(M.readyState),E.default.onlyUnique(e).join(" ")}},{key:"render",value:function(){return m.default.createElement("div",{className:this.buildBackgroundClasses()},this.possiblyRenderBackgroundImage())}}]),t}(m.default.Component);t.default=k,k.defaultProps={shouldBlur:!0},k.propTypes={dispatch:m.default.PropTypes.func.isRequired,player:m.default.PropTypes.object.isRequired,broadcast:b.broadcastPropType,shouldBlur:m.default.PropTypes.bool}},1249:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){switch(e){case"ERROR":return S.default.error;case"NOT_FOUND":return S.default.notFound;case"LIVE":return S.default.live;case"CONNECTED":return S.default.connected;case"ENDED_AGO":return S.default.endedAgo;case"CONNECTING":return S.default.connecting;default:return S.default.ended}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(22),i=n(s),o=a(4),l=n(o),u=a(5),d=n(u),c=a(1),p=n(c),f=a(2),h=n(f),m=a(7),y=n(m),v=a(6),g=n(v),b=a(0),T=n(b),E=a(3),P=a(16),_=n(P),M=a(34),C=a(268),k=a(272),S=n(k),w=9e4,R=function(e){function t(e){(0,p.default)(this,t);var a=(0,y.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.state={endedCounter:0},a}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.endedTimer||(this.endedTimer=setInterval(function(){e.setState({endedCounter:e.state.endedCounter+1})},w))}},{key:"componentWillUnmount",value:function(){this.endedTimer&&clearInterval(this.endedTimer)}},{key:"possiblyIncludeReplayNotice",value:function(){if(!this.props.broadcastError.isServerError&&!this.props.broadcastError.isNotFound&&!this.props.broadcastError.isUnavailable&&this.props.broadcast.isEnded&&!this.props.replay.replayAvailable)return T.default.createElement("p",{className:"BroadcastState-noReplay"},"Replay Unavailable")}},{key:"broadcastState",value:function(){return this.props.broadcastError.isServerError?"ERROR":this.props.broadcastError.isNotFound||this.props.broadcastError.isUnavailable?"NOT_FOUND":!this.props.broadcast.isRunning||!this.props.broadcastError.isUnavailable&&_.default.isVideoSupported()?this.props.broadcast.isRunning&&this.props.player.isConnecting?"CONNECTING":this.props.player.playerIsUnavailable||this.props.player.isConnected?"CONNECTED":this.props.broadcast.isEnded?"ENDED_AGO":_.default.hasInlineAutoplayVideo()?"CONNECTING":"CONNECTED":"LIVE"}},{key:"render",value:function(){var e=this,t=this.broadcastState(),a=["BroadcastState"];switch(t){case"ERROR":case"NOT_FOUND":a.push("BroadcastState--error");break;case"ENDED_AGO":}var n=r(t);if(this.props.broadcast&&"ENDED_AGO"===t){var s=function(){var t=e.props.broadcast.endTime;return{v:T.default.createElement("div",{className:a.join(" ")},T.default.createElement("p",null,T.default.createElement(E.FormattedRelative,{value:t},function(e){return T.default.createElement("time",{dateTime:t,title:t},T.default.createElement(E.FormattedMessage,(0,l.default)({},n,{values:{ended_ago:e}})))})),e.possiblyIncludeReplayNotice())}}();if("object"===("undefined"==typeof s?"undefined":(0,i.default)(s)))return s.v;
}return T.default.createElement("div",{className:a.join(" ")},T.default.createElement("p",null,T.default.createElement(E.FormattedMessage,n)))}}]),t}(T.default.Component);t.default=R,R.propTypes={player:T.default.PropTypes.object,replay:C.replayPropType,broadcast:M.broadcastPropType,broadcastError:T.default.PropTypes.object}},1250:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(3),v=a(24),g=a(46),b=a(34),T=a(20),E=a(463),P=n(E),_=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.handleOpenGetAppCta=a.handleOpenGetAppCta.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"handleOpenGetAppCta",value:function(){this.props.dispatch((0,g.openGetAppModal)({broadcast:this.props.broadcast,user:this.props.user})),this.props.dispatch((0,v.trackEvent)("GET_APP_CTA_CLICK",{location:this.props.location}))}},{key:"render",value:function(){var e=["AppLink","AppLink--cta"];return this.props.withoutBottomMargin&&e.push("AppLink--withoutBottomMargin"),m.default.createElement("div",{className:"GetAppCTA"},m.default.createElement("div",{className:e.join(" "),onClick:this.handleOpenGetAppCta},m.default.createElement(y.FormattedMessage,P.default.get)))}}]),t}(m.default.Component);_.propTypes={dispatch:m.default.PropTypes.func.isRequired,broadcast:b.broadcastPropType,user:T.userPropType,location:m.default.PropTypes.oneOf(["Header","BroadcastDetails"]),withoutBottomMargin:m.default.PropTypes.bool},_.defaultProps={location:"Header"},t.default=_},1251:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(3),v=a(272),g="LoadingOverlay--isLoading",b=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"possiblyRenderMessage",value:function(){if(!this.props.player.videoHasStarted&&this.props.player.isLoadingVideo){var e=this.props.player.isLiveMode?v.connecting:v.loading;return m.default.createElement(y.FormattedMessage,e,function(e){return m.default.createElement("span",{className:"LoadingOverlay-text"},e)})}}},{key:"render",value:function(){var e=["LoadingOverlay"];return this.props.player.isLoadingVideo&&e.push(g),m.default.createElement("div",{className:e.join(" ")},this.possiblyRenderMessage())}}]),t}(m.default.Component);b.propTypes={player:m.default.PropTypes.object},t.default=b},1252:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),s=n(r),i=a(5),o=n(i),l=a(1),u=n(l),d=a(2),c=n(d),p=a(7),f=n(p),h=a(6),m=n(h),y=a(0),v=n(y),g=a(15),b=a(175),T=a(1265),E=n(T),P=a(1255),_=n(P),M=a(1210),C=n(M),k=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.handleClick=a.handleClick.bind(a),a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"handleClick",value:function(){E.default.togglePlayback(this.props)}},{key:"render",value:function(){var e=["PlaybackControls"].concat((0,s.default)(E.default.buildStateClasses(this.props.player)));return v.default.createElement("div",{className:e.join(" ")},v.default.createElement("div",{className:"PlaybackControls-button",onClick:this.handleClick},v.default.createElement("div",{className:"PlaybackControls-pause"},v.default.createElement(_.default,null)),v.default.createElement("div",{className:"PlaybackControls-play"},v.default.createElement(C.default,null))))}}]),t}(v.default.Component);k.propTypes={dispatchPauseVideo:v.default.PropTypes.func.isRequired,dispatchPlayVideo:v.default.PropTypes.func.isRequired,player:v.default.PropTypes.object},t.default=(0,g.connect)(function(){return{}},b.videoPlayerDispatchMapper)(k)},1253:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(34),v={baseClass:"VideoInterstitial",hiddenModifier:"VideoInterstitial--hidden",delayModifier:"VideoInterstitial--delay"},g=1e3,b={flexParent:"u-flexParent",fullHeight:"u-fullHeight"},T=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.state={shouldHide:!1},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.hideTimeout),clearTimeout(this.shouldHideTimeout)}},{key:"render",value:function(){var e=this,t=this.props.player,a=[v.baseClass,b.fullHeight,b.flexParent];return t.isPlayback&&t.videoHasStarted&&(a=a.concat([v.hiddenModifier,v.delayModifier]),this.state.shouldHide||(clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){return e.setState({shouldHide:!0})},g))),t.isPlayback||(a=a.filter(function(e){return e!==v.delayModifier||e!==v.hiddenModifier}),this.state.shouldHide&&(clearTimeout(this.shouldHideTimeout),this.shouldHideTimeout=setTimeout(function(){return e.setState({shouldHide:!1})}))),this.props.baseClass&&a.push(this.props.baseClass),this.state.shouldHide?null:m.default.createElement("div",{className:a.join(" ")},this.props.children)}}]),t}(m.default.Component);T.propTypes={baseClass:m.default.PropTypes.string,children:m.default.PropTypes.node,player:m.default.PropTypes.object,broadcast:y.broadcastPropType},t.default=T},1254:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(1246),v=n(y),g=a(1318),b=n(g),T=a(1287),E=n(T),P=a(1332),_=n(P),M=a(1208),C=n(M),k=a(1334),S=n(k),w=a(1252),R=n(w),I=a(1337),N=n(I),A=a(1338),O=n(A),D=a(1303),L=n(D),H=a(1196),B=n(H),U=a(16),V=n(U),F=a(1190),W=n(F),j=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"shouldRenderReplayElement",value:function(){return V.default.isVideoSupported()&&this.props.broadcast.isEnded}},{key:"allowVideoInteractivity",value:function(){return this.props.broadcast&&this.props.broadcast.has360Video}},{key:"possiblyIncludePlaybackControlsOverlay",value:function(){if(this.shouldRenderReplayElement()&&!this.allowVideoInteractivity())return m.default.createElement(S.default,{player:this.props.player,broadcast:this.props.broadcast,dispatch:this.props.dispatch})}},{key:"possiblyIncludeVideoSeeker",value:function(){if(this.shouldRenderReplayElement())return m.default.createElement(v.default,{videoStartDate:this.props.broadcast.start,disableInteraction:V.default.mobile()})}},{key:"possiblyIncludeUsersActivity",value:function(){if(!this.shouldRenderReplayElement())return m.default.createElement(L.default,null)}},{key:"possiblyIncludePlaybackControls",value:function(){if(this.shouldRenderReplayElement())return m.default.createElement(R.default,{player:this.props.player,broadcast:this.props.broadcast,dispatch:this.props.dispatch})}},{key:"possiblyIncludeNextBroadcastButton",value:function(){if(this.props.couchmode)return m.default.createElement(b.default,{player:this.props.player,nextBroadcast:this.props.nextBroadcastCallback})}},{key:"renderMessages",value:function(){var e=this.shouldRenderReplayElement();return m.default.createElement(_.default,{broadcast:this.props.broadcast,isLive:!e})}},{key:"renderShareBroadcastButton",value:function(){var e=this.props,t=e.broadcast,a=e.user,n=t?t.status:"",r=a&&a.isShellAccount;return m.default.createElement(O.default,{active:V.default.mobile(),broadcastTitle:n,broadcast:t,useBroadcastUrl:r})}},{key:"renderMuteButton",value:function(){return m.default.createElement(C.default,{active:V.default.mobile(),muted:this.props.player.muted})}},{key:"renderViewerBadge",value:function(){var e=this.shouldRenderReplayElement();return m.default.createElement(B.default,{hideLiveBadge:V.default.mobile(),withFixedWidth:!0,viewers:this.props.viewers,isLive:!e,is360:this.props.broadcast.has360Video})}},{key:"renderHeartsContainer",value:function(){var e=V.default.mobile();return m.default.createElement(E.default,{broadcast:this.props.broadcast,width:e?0:void 0,disableUserHeart:e})}},{key:"renderSeekingOverlay",value:function(){return m.default.createElement(N.default,{player:this.props.player})}}]),t}(m.default.Component);j.propTypes=W.default,t.default=j},1255:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s.default.createElement("svg",{viewBox:"0 0 27 33",className:"PauseIcon"},s.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.default.createElement("g",{transform:"translate(-1371.000000, -954.000000)",fill:"#FFFFFF"},s.default.createElement("g",{transform:"translate(1371.000000, 954.000000)"},s.default.createElement("rect",{x:"0",y:"0",width:"9",height:"33"}),s.default.createElement("rect",{x:"18",y:"0",width:"9",height:"33"})))))};var r=a(0),s=n(r)},1256:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={COMMENTING_SUSPENDED:1,COMMENTING_DISABLED:2,GLOBAL_COMMENTING_SUSPENDED:3,GLOBAL_COMMENTING_DISABLED:4}},1257:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(124),s=n(r);t.default=(0,s.default)({ON_AD_STATE_UPDATE:!0,ON_TIME_UPDATE:!0,ON_ENDED:!0})},1258:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skip=t.advertisement=void 0;var n=a(3),r=(0,n.defineMessages)({advertisement:{id:"ad.ADVERTISEMENT",defaultMessage:"Ad"},skip:{id:"ad.SKIP",defaultMessage:"Skip"}}),s=r.advertisement,i=r.skip;t.default={advertisement:s,skip:i},t.advertisement=s,t.skip=i},1259:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.videoStreamDisabledUnkown=t.videoStreamDisabledTooFull=t.videoStreamDisabledFriendOnly=t.placeholder=t.limited=t.disabledForBroadcast=void 0;var n=a(3),r=(0,n.defineMessages)({disabledForBroadcast:{id:"commenting.DISABLED_FOR_BROADCAST",defaultMessage:"disabled for this broadcast"},limited:{id:"commenting.LIMITED",defaultMessage:"chat limited, reactivated {relativeTime}"},placeholder:{id:"commenting.PLACEHOLDER",defaultMessage:"Say something..."},videoStreamDisabledFriendOnly:{id:"commenting.VIDEO_STREAM_DISABLED_FRIEND_ONLY",defaultMessage:"Limited by broadcaster"},videoStreamDisabledTooFull:{id:"commenting.VIDEO_STREAM_DISABLED_TOO_FULL",defaultMessage:"Chatroom too full…"},videoStreamDisabledUnkown:{id:"commenting.VIDEO_STREAM_DISABLED_UNKOWN",defaultMessage:"Unable to connect to chatroom…"}}),s=r.disabledForBroadcast,i=r.limited,o=r.placeholder,l=r.videoStreamDisabledFriendOnly,u=r.videoStreamDisabledTooFull,d=r.videoStreamDisabledUnkown;t.default={disabledForBroadcast:s,limited:i,placeholder:o,videoStreamDisabledFriendOnly:l,videoStreamDisabledTooFull:u,videoStreamDisabledUnkown:d},t.disabledForBroadcast=s,t.limited=i,t.placeholder=o,t.videoStreamDisabledFriendOnly=l,t.videoStreamDisabledTooFull=u,t.videoStreamDisabledUnkown=d},1260:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.vip=t.viewers=t.vanity=t.validators=t.user=t.textLink=t.teaching=t.system=t.support=t.stats=t.sparkle=t.signup=t.signin=t.share=t.settings=t.search=t.report=t.producer=t.moderation=t.help=t.follow=t.errors=t.download=t.common=t.commenting=t.chat=t.channels=t.broadcast=t.banned=t.authmenu=t.app=t.alert=t.ad=void 0;var r=a(1258),s=n(r),i=a(518),o=n(i),l=a(463),u=n(l),d=a(1197),c=n(d),p=a(1368),f=n(p),h=a(520),m=n(h),y=a(279),v=n(y),g=a(498),b=n(g),T=a(1259),E=n(T),P=a(473),_=n(P),M=a(289),C=n(M),k=a(290),S=n(k),w=a(471),R=n(w),I=a(521),N=n(I),A=a(1369),O=n(A),D=a(1234),L=n(D),H=a(522),B=n(H),U=a(1212),V=n(U),F=a(181),W=n(F),j=a(1222),x=n(j),q=a(1370),G=n(q),Y=a(523),K=n(Y),z=a(1198),J=n(z),Z=a(1184),Q=n(Z),X=a(1371),$=n(X),ee=a(1262),te=n(ee),ae=a(1223),ne=n(ae),re=a(525),se=n(re),ie=a(60),oe=n(ie),le=a(280),ue=n(le),de=a(1191),ce=n(de),pe=a(1224),fe=n(pe),he=a(1372),me=n(he);t.default={ad:s.default,alert:o.default,app:u.default,authmenu:c.default,banned:f.default,broadcast:m.default,channels:v.default,chat:b.default,commenting:E.default,common:_.default,download:C.default,errors:S.default,follow:R.default,help:N.default,moderation:O.default,producer:L.default,report:B.default,search:V.default,settings:W.default,share:x.default,signin:G.default,signup:K.default,sparkle:J.default,stats:Q.default,support:$.default,system:te.default,teaching:ne.default,textLink:se.default,user:oe.default,validators:ue.default,vanity:ce.default,viewers:fe.default,vip:me.default},t.ad=s.default,t.alert=o.default,t.app=u.default,t.authmenu=c.default,t.banned=f.default,t.broadcast=m.default,t.channels=v.default,t.chat=b.default,t.commenting=E.default,t.common=_.default,t.download=C.default,t.errors=S.default,t.follow=R.default,t.help=N.default,t.moderation=O.default,t.producer=L.default,t.report=B.default,t.search=V.default,t.settings=W.default,t.share=x.default,t.signin=G.default,t.signup=K.default,t.sparkle=J.default,t.stats=Q.default,t.support=$.default,t.system=te.default,t.teaching=ne.default,t.textLink=se.default,t.user=oe.default,t.validators=ue.default,t.vanity=ce.default,t.viewers=fe.default,t.vip=me.default},1261:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeSpam=t.reportTypeOther=t.reportTypeAbuse=t.globalCommentingSuspendedWithReportAndMessage=t.globalCommentingSuspendedWithReport=t.globalCommentingSuspended=t.globalCommentingDisabledWithReportAndMessage=t.globalCommentingDisabledWithReport=t.globalCommentingDisabled=t.commentingSuspendedWithReportAndMessage=t.commentingSuspendedWithReport=t.commentingSuspended=t.commentingDisabledWithReportAndMessage=t.commentingDisabledWithReport=t.commentingDisabled=void 0;var n=a(3),r=(0,n.defineMessages)({commentingDisabled:{id:"moderation.banned.COMMENTING_DISABLED",defaultMessage:"One or more of your comments was hidden. Commenting is disabled for this broadcast."},commentingDisabledWithReport:{id:"moderation.banned.COMMENTING_DISABLED_WITH_REPORT",defaultMessage:"One or more of your comments was hidden for {reportTypeString}. Commenting is disabled for this broadcast."},commentingDisabledWithReportAndMessage:{id:"moderation.banned.COMMENTING_DISABLED_WITH_REPORT_AND_MESSAGE",defaultMessage:"Your comment {messageBody} was hidden for {reportTypeString}. Commenting is disabled for this broadcast."},commentingSuspended:{id:"moderation.banned.COMMENTING_SUSPENDED",defaultMessage:"One or more of your comments was hidden. Commenting is temporarily limited for this broadcast"},commentingSuspendedWithReport:{id:"moderation.banned.COMMENTING_SUSPENDED_WITH_REPORT",defaultMessage:"One or more of your comments was hidden for {reportTypeString}. Commenting is temporarily limited for this broadcast"},commentingSuspendedWithReportAndMessage:{id:"moderation.banned.COMMENTING_SUSPENDED_WITH_REPORT_AND_MESSAGE",defaultMessage:"Your comment {messageBody} was hidden for {reportTypeString}. Commenting is temporarily limited for this broadcast."},globalCommentingDisabled:{id:"moderation.banned.GLOBAL_COMMENTING_DISABLED",defaultMessage:"One or more of your comments was hidden. Commenting is disabled for all broadcasts."},globalCommentingDisabledWithReport:{id:"moderation.banned.GLOBAL_COMMENTING_DISABLED_WITH_REPORT",defaultMessage:"One or more of your comments was hidden for {reportTypeString}. Commenting is disabled for all broadcasts."},globalCommentingDisabledWithReportAndMessage:{id:"moderation.banned.GLOBAL_COMMENTING_DISABLED_WITH_REPORT_AND_MESSAGE",defaultMessage:"Your comment {messageBody} was hidden for {reportTypeString}. Commenting is disabled for all broadcasts."},globalCommentingSuspended:{id:"moderation.banned.GLOBAL_COMMENTING_SUSPENDED",defaultMessage:"One or more of your comments was hidden. Commenting is temporarily limited for all broadcasts."},globalCommentingSuspendedWithReport:{id:"moderation.banned.GLOBAL_COMMENTING_SUSPENDED_WITH_REPORT",defaultMessage:"One or more of your comments was hidden for {reportTypeString}. Commenting is temporarily limited for all broadcasts."},globalCommentingSuspendedWithReportAndMessage:{id:"moderation.banned.GLOBAL_COMMENTING_SUSPENDED_WITH_REPORT_AND_MESSAGE",defaultMessage:"Your comment {messageBody} was hidden for {reportTypeString}. Commenting is temporarily limited for all broadcasts."},reportTypeAbuse:{id:"moderation.banned.REPORT_TYPE_ABUSE",defaultMessage:"abuse"},reportTypeOther:{id:"moderation.banned.REPORT_TYPE_OTHER",defaultMessage:"other"},reportTypeSpam:{id:"moderation.banned.REPORT_TYPE_SPAM",defaultMessage:"spam"}}),s=r.commentingDisabled,i=r.commentingDisabledWithReport,o=r.commentingDisabledWithReportAndMessage,l=r.commentingSuspended,u=r.commentingSuspendedWithReport,d=r.commentingSuspendedWithReportAndMessage,c=r.globalCommentingDisabled,p=r.globalCommentingDisabledWithReport,f=r.globalCommentingDisabledWithReportAndMessage,h=r.globalCommentingSuspended,m=r.globalCommentingSuspendedWithReport,y=r.globalCommentingSuspendedWithReportAndMessage,v=r.reportTypeAbuse,g=r.reportTypeOther,b=r.reportTypeSpam;t.default={commentingDisabled:s,commentingDisabledWithReport:i,commentingDisabledWithReportAndMessage:o,commentingSuspended:l,commentingSuspendedWithReport:u,commentingSuspendedWithReportAndMessage:d,globalCommentingDisabled:c,globalCommentingDisabledWithReport:p,globalCommentingDisabledWithReportAndMessage:f,globalCommentingSuspended:h,globalCommentingSuspendedWithReport:m,globalCommentingSuspendedWithReportAndMessage:y,reportTypeAbuse:v,reportTypeOther:g,reportTypeSpam:b},t.commentingDisabled=s,t.commentingDisabledWithReport=i,t.commentingDisabledWithReportAndMessage=o,t.commentingSuspended=l,t.commentingSuspendedWithReport=u,t.commentingSuspendedWithReportAndMessage=d,t.globalCommentingDisabled=c,t.globalCommentingDisabledWithReport=p,t.globalCommentingDisabledWithReportAndMessage=f,t.globalCommentingSuspended=h,t.globalCommentingSuspendedWithReport=m,t.globalCommentingSuspendedWithReportAndMessage=y,t.reportTypeAbuse=v,t.reportTypeOther=g,t.reportTypeSpam=b},1262:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userMuted=t.pressHoldSeek=t.pressAndHold=t.commentReported=void 0;var n=a(3),r=(0,n.defineMessages)({commentReported:{id:"system.COMMENT_REPORTED",defaultMessage:"Thank you. You won't see any more messages from {username} in this broadcast."},pressAndHold:{id:"system.PRESS_AND_HOLD",defaultMessage:"Press & Hold"},pressHoldSeek:{id:"system.PRESS_HOLD_SEEK",defaultMessage:"{pressAndHold} the video to skip ahead"},userMuted:{id:"system.USER_MUTED",defaultMessage:"You won't see any more messages from {username}"}}),s=r.commentReported,i=r.pressAndHold,o=r.pressHoldSeek,l=r.userMuted;t.default={commentReported:s,pressAndHold:i,pressHoldSeek:o,userMuted:l},t.commentReported=s,t.pressAndHold=i,t.pressHoldSeek=o,t.userMuted=l},1263:function(e,t,a){"use strict";function n(e){var t=e.GlobalDrawer;return{drawer:(0,s.convertToDrawer)(t)}}function r(e){return{dispatchShowSafari360Drawer:function(){e(i.showSafari360Alert.apply(void 0,arguments))},dispatchHideDrawer:function(){e(i.hideDrawer.apply(void 0,arguments))},dispatch:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.drawerDispatchToProps=void 0,t.drawerStateToProps=n;var s=a(1192),i=a(528),o=a(132);t.drawerDispatchToProps=(0,o.memoize)(r)},1264:function(e,t,a){"use strict";function n(e){var t=e.Chat,a=e.Roster,n={},r=t&&t.chatSession&&t.chatSession.room_id;return r&&a&&a.rooms[r]&&(n.roster=a.rooms[r].roster),n}function r(e){return{dispatchRosterReceive:function(t,a){e((0,s.rosterReceive)(t,a))},dispatchRosterRemoveUser:function(t,a){e((0,s.rosterRemoveUser)(t,a))},dispatchRosterAddUser:function(t,a){e((0,s.rosterAddUser)(t,a))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.rosterDispatchToProps=void 0,t.rosterStateToProps=n;var s=a(293),i=a(132);t.rosterDispatchToProps=(0,i.memoize)(r)},1265:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=1,a=1,n=2,r=0,s=1,i=new TimelineLite;i.fromTo(e,t/2,{opacity:r},{opacity:s,bezier:{values:[{x:.25,y:.46},{x:.45,y:.94}]}}).to(e,t/2,{opacity:r,bezier:{values:[{x:.25,y:.46},{x:.45,y:.94}]}}).fromTo(e,t,{scale:a},{scale:n,transformOrigin:"center center",bezier:{values:[{x:.19,y:1},{x:.22,y:1}]}},0)}function s(e){var t=[];return e.isExpectingVideo?t.push("is-playing"):t.push("is-paused"),t}function i(e){e.player.isExpectingVideo?(u.default.pauseRequest(),r(c),e.dispatchPauseVideo(),e.dispatch((0,o.trackEvent)("VIDEO_PAUSE"))):(u.default.playRequest(),r(d),e.dispatchPlayVideo(),e.dispatch((0,o.trackEvent)("VIDEO_UNPAUSE")))}Object.defineProperty(t,"__esModule",{value:!0});var o=a(24),l=a(1181),u=n(l),d=".PlaybackControlsOverlay-hud .PlaybackControlsOverlay-play svg",c=".PlaybackControlsOverlay-hud .PlaybackControlsOverlay-pause svg";t.default={buildStateClasses:s,togglePlayback:i}},1267:function(e,t){function a(e){var t=e?e.length:0;return t?e[t-1]:void 0}e.exports=a},1268:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.postMessage=void 0;var r=a(4),s=n(r),i=a(1272),o=n(i),l=a(1221),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ORIGIN,a=o.default.Shared,n=o.default.Outbound,r=o.default.Inbound,u=function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,s.default)({type:a},n);e.postMessage(r,t)},d={init:function(e){return u(a.INIT,e)},stopPolling:function(){return u(a.STOP_POLLING)}},c={};return l.analyticsEventValues.forEach(function(e){c[e]=function(t){return u(e,t)}}),{inbound:(0,s.default)({},d,{update:function(e){return u(r.UPDATE,e)},updateError:function(){return u(r.UPDATE_ERROR)},startPlaying:function(){return u(r.START_PLAYING)},stopPlaying:function(){return u(r.STOP_PLAYING)},adResponse:function(e){return u(r.AD_RESPONSE,e)}}),outbound:(0,s.default)({},d,c,{openLink:function(e){return u(n.OPEN_LINK,{url:e})},adRequest:function(){return u(n.AD_REQUEST)}})}};t.postMessage=u},1270:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=["Viewers"];return e.useSmallIcon&&t.push("Viewers--small"),e.includeIcon||t.push("Viewers--noIcon"),i.default.createElement("div",{className:t.join(" "),title:(0,d.getViewers)(e.intl,e.count,!0)},i.default.createElement(u.default,{withText:!e.includeIcon,count:e.count}))}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),i=n(s),o=a(3),l=a(1219),u=n(l),d=a(1217);r.propTypes={intl:o.intlShape.isRequired,count:i.default.PropTypes.number.isRequired,includeIcon:i.default.PropTypes.bool,useSmallIcon:i.default.PropTypes.bool},r.defaultProps={useSmallIcon:!1,includeIcon:!0,count:0},t.default=(0,o.injectIntl)(r)},1272:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ORIGIN=void 0;var r=a(4),s=n(r),i=a(1221),o=n(i),l="init",u="update",d="update_error",c="ad_request",p="ad_response",f="start_playing",h="stop_playing",m="stop_polling",y="open_link",v={INIT:l,STOP_POLLING:m},g=(0,s.default)({},v,o.default,{OPEN_LINK:y,AD_REQUEST:c}),b=(0,s.default)({},v,{UPDATE:u,UPDATE_ERROR:d,START_PLAYING:f,STOP_PLAYING:h,AD_RESPONSE:p}),T="https://twitter.com";t.ORIGIN=T,t.default={Shared:v,Outbound:g,Inbound:b}},1273:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.waiting=t.stop=t.preview=t.goLive=t.error=t.cancel=void 0;var n=a(3),r=(0,n.defineMessages)({cancel:{id:"producer.button.CANCEL",defaultMessage:"Cancel Preview"},error:{id:"producer.button.ERROR",defaultMessage:"Fix Errors To Preview"},goLive:{id:"producer.button.GO_LIVE",defaultMessage:"Go LIVE"},preview:{id:"producer.button.PREVIEW",defaultMessage:"Preview Broadcast"},stop:{id:"producer.button.STOP",defaultMessage:"STOP BROADCAST"},waiting:{id:"producer.button.WAITING",defaultMessage:"Checking for Source..."}}),s=r.cancel,i=r.error,o=r.goLive,l=r.preview,u=r.stop,d=r.waiting;t.default={cancel:s,error:i,goLive:o,preview:l,stop:u,waiting:d},t.cancel=s,t.error=i,t.goLive=o,t.preview=l,t.stop=u,t.waiting=d},1274:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tweetBroadcast=t.streamKey=t.serverUrl=t.limitChat=t.displayName=t.broadcastTitle=void 0;var n=a(3),r=(0,n.defineMessages)({broadcastTitle:{id:"producer.form.BROADCAST_TITLE",defaultMessage:"Broadcast Title"},displayName:{id:"producer.form.DISPLAY_NAME",defaultMessage:"Source Display Name (optional)"},limitChat:{id:"producer.form.LIMIT_CHAT",defaultMessage:"Only users you follow can chat"},serverUrl:{id:"producer.form.SERVER_URL",defaultMessage:"Server URL"},streamKey:{id:"producer.form.STREAM_KEY",defaultMessage:"Stream Name / Stream Key"},tweetBroadcast:{id:"producer.form.TWEET_BROADCAST",defaultMessage:"Share this broadcast on Twitter"}}),s=r.broadcastTitle,i=r.displayName,o=r.limitChat,l=r.serverUrl,u=r.streamKey,d=r.tweetBroadcast;t.default={broadcastTitle:s,displayName:i,limitChat:o,serverUrl:l,streamKey:u,tweetBroadcast:d},t.broadcastTitle=s,t.displayName=i,t.limitChat=o,t.serverUrl=l,t.streamKey=u,t.tweetBroadcast=d},1275:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warningTitle=t.warningHide=t.warning=t.title=t.show=t.hide=t.errorsTitle=t.errorsHide=t.errors=void 0;var n=a(3),r=(0,n.defineMessages)({errors:{id:"producer.recommended.ERRORS",defaultMessage:"Show Errors"},errorsHide:{id:"producer.recommended.ERRORS_HIDE",defaultMessage:"Hide Errors"},errorsTitle:{id:"producer.recommended.ERRORS_TITLE",defaultMessage:"Errors"},hide:{id:"producer.recommended.HIDE",defaultMessage:"Hide Recommended Settings"},show:{id:"producer.recommended.SHOW",defaultMessage:"Show Recommended Settings"},title:{id:"producer.recommended.TITLE",defaultMessage:"Recommended Settings"},warning:{id:"producer.recommended.WARNING",defaultMessage:"Show Warnings"},warningHide:{id:"producer.recommended.WARNING_HIDE",defaultMessage:"Hide Warnings"},warningTitle:{id:"producer.recommended.WARNING_TITLE",defaultMessage:"Warnings"}}),s=r.errors,i=r.errorsHide,o=r.errorsTitle,l=r.hide,u=r.show,d=r.title,c=r.warning,p=r.warningHide,f=r.warningTitle;t.default={errors:s,errorsHide:i,errorsTitle:o,hide:l,show:u,title:d,warning:c,warningHide:p,warningTitle:f},t.errors=s,t.errorsHide=i,t.errorsTitle=o,t.hide=l,t.show=u,t.title=d,t.warning=c,t.warningHide=p,t.warningTitle=f},1277:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.goLiveWithTitle=void 0;var n=a(3),r=(0,n.defineMessages)({goLiveWithTitle:{id:"share.tweet.GO_LIVE_WITH_TITLE",defaultMessage:"{title}"}}),s=r.goLiveWithTitle;t.default={goLiveWithTitle:s},t.goLiveWithTitle=s},1281:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(21),g=a(78),b=a(1304),T=n(b),E=a(180),P=n(E),_=a(1354),M=n(_),C=a(1331),k=n(C),S=a(462),w=a(47),R=a(464),I=a(36),N=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.tooltipRef=null,a.toggleSignInModal=a.toggleSignInModal.bind(a),a.toggleDropdown=a.toggleDropdown.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"toggleSignInModal",value:function(e,t){e.preventDefault();var a=this.props,n=a.dispatchOpenSignInModal,r=a.dispatchHideModal,s=a.modal;if(s.isSignInModalVisible)r();else{var i={openedFrom:"HEADER"};t&&(i.initialState=t),n(i)}}},{key:"toggleDropdown",value:function(){var e=this.props,t=e.dispatch,a=e.auth;t((0,g.showTooltip)({component:M.default,target:this.tooltipRef,position:"bottom",componentProps:{user:a.user}}))}},{key:"renderProfilePic",value:function(){return m.default.createElement("button",{onClick:this.toggleDropdown,className:"AuthToggle-ToggleButton"},m.default.createElement(P.default,{user:this.props.auth.user,size:32,withoutBorder:!0}))}},{key:"render",value:function(){var e=this,t=["AuthToggle"];return this.props.auth.isLoggedIn&&t.push("AuthToggle--isLoggedIn"),this.props.onlyIcon&&t.push("AuthToggle--isOnlyIcon"),m.default.createElement("div",{ref:function(t){e.tooltipRef=t},className:t.join(" ")},this.props.auth.isLoggedIn?this.renderProfilePic(this.props.auth.user):m.default.createElement(k.default,{buttonClass:this.props.buttonClass,withIcon:this.props.withIcon,onlyIcon:this.props.onlyIcon,onClick:this.toggleSignInModal}),this.tooltipRef&&this.props.auth.isLoggedIn&&m.default.createElement(T.default,{user:this.props.auth.user,target:this.tooltipRef,onTargetClick:this.toggleDropdown}))}}]),t}(h.Component);N.propTypes={buttonClass:m.default.PropTypes.string,auth:I.authPropType,dispatch:m.default.PropTypes.func.isRequired,dispatchOpenSignInModal:m.default.PropTypes.func.isRequired,dispatchHideModal:m.default.PropTypes.func.isRequired,modal:R.modalPropType.isRequired,withIcon:m.default.PropTypes.bool,onlyIcon:m.default.PropTypes.bool},t.default=(0,y.connect)((0,v.compose)(w.authStateToProps,S.modalStateToProps),(0,v.compose)(S.modalDispatchToProps))(N)},1283:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ChatFunctionalComponent=void 0;var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(1383),g=n(v),b=a(1384),T=n(b),E=a(34),P=a(465),_=a(20),M=a(36),C=a(501),k=a(103),S=a(68),w=a(26),R=a(1179),I=n(R),N=a(67),A=n(N),O=a(47),D=a(504),L=n(D),H=a(1298),B=n(H),U=a(176),V=a(12),F=n(V),W=a(21),j="safety",x=new Date("Oct 31 2016 GMT"),q=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.inFlightHearts=[],a.inFlightChats=[],a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.checkChatState(this.props)}},{key:"componentWillUnmount",value:function(){this.reset()}},{key:"componentWillReceiveProps",value:function(e){this.removeResolvedInflightHearts(e),this.checkChatState(e)}},{key:"checkChatState",value:function(e){this.broadcastDidChange(e)&&this.reset(),e.chat&&e.chat.queuedMessages.hearts.length&&(this.sendUserHearts(e.chat.queuedMessages.hearts,e.broadcast.isEnded),e.dispatch((0,S.chatClearMessageQueue)())),e.chat&&e.chat.queuedMessages.chats.length&&(this.sendUserChats(e.chat.queuedMessages.chats,e.broadcast.isEnded),e.dispatch((0,S.chatClearMessageQueue)())),this.needsToFetchSafetyServiceToken(e)&&this.fetchSafetyServiceToken(e),this.needsToSetupChatman(e)?this.setupChatman(e):e.chat&&e.chat.inited&&!U.eventManager.hasTimer()?this.setUpTimer(e):e.chat&&e.chat.needsMoreMessages&&!e.chat.fetching&&this.chatNeedsMoreMessages(e)}},{key:"needsToFetchSafetyServiceToken",value:function(e){return e.broadcast&&e.auth.isLoggedIn&&!e.safetyServiceToken.token&&!e.safetyServiceToken.pending}},{key:"fetchSafetyServiceToken",value:function(e){var t=e.api;(0,C.fetchServiceToken)({api:t,service:j})}},{key:"sendUserHearts",value:function(e,t){var a=this;if(this.chatman){var n=this.inFlightHearts;(0,g.default)(e,n,"uuid").forEach(function(e){a.inFlightHearts.push(e),t?a.props.dispatch((0,S.chatAddNewReplayHeart)(e)):a.chatman.sendLiveHeart.call(a.chatman,e)})}}},{key:"sendUserChats",
value:function(e,t){var a=this;if(this.chatman&&!t){var n=this.inFlightChats;(0,g.default)(e,n,"uuid").forEach(function(e){a.inFlightChats.push(e),a.chatman.sendLiveChat.call(a.chatman,e)})}}},{key:"removeResolvedInflightHearts",value:function(e){var t=this,a=e.chat.queuedMessages.hearts,n=(0,g.default)(this.inFlightHearts,a,"uuid");n.forEach(function(e){return(0,T.default)(t.inFlightHearts,{uuid:e.uuid})})}},{key:"broadcastDidChange",value:function(e){var t=this.props.broadcast,a=e.broadcast,n=!t&&a,r=t&&a,s=r&&a.id!==t.id,i=r&&a.state!==t.state,o=s||i;return n||o}},{key:"chatmanSessionDidChange",value:function(e){var t=this.props.chat.chatSession,a=e.chat.chatSession;return t.endpoint!==a.endpoint||t.access_token!==a.access_token}},{key:"needsToSetupChatman",value:function(e){return!this.chatman||this.chatmanSessionDidChange(e)||this.broadcastDidChange(e)}},{key:"setupChatman",value:function(e){var t={endpoint:e.chat.chatSession.endpoint,access_token:e.chat.chatSession.access_token,broadcastId:e.broadcast.id};if(t.endpoint&&t.access_token&&t.broadcastId){var a=e.broadcast.isEnded;this.chatman&&this.chatman.closeSocket();var n=e.broadcast.created_at&&new Date(e.broadcast.created_at)<x;this.chatman=new L.default({videoData:t,broadcastEnded:a,wrappedApi:e.api,useLegacyJoins:n}),this.chatman.init({broadcastHasReplay:a,chatSession:e.chat.chatSession,authUser:e.auth.user,locale:e.locale})}}},{key:"onNewHeartEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.props.broadcast.isEnded||this.props.dispatch((0,k.userCacheAddHearts)(this.props.user,e.length))}},{key:"setUpTimer",value:function(e){if(e.isPlayback){var t=e.broadcast.isEnded,a=new B.default({mostRecentNTP:e.chat.currentNtp,replay:t,dispatch:e.dispatch,options:{onNewHeartEvents:this.onNewHeartEvents.bind(this)}});U.eventManager.setTimer(a),t&&this.chatman.backfillReplay()}}},{key:"reset",value:function(){this.chatman&&(this.chatman.endBroadcast(),this.chatman=null);var e=this.props.dispatch;e((0,S.chatReset)(!0))}},{key:"chatNeedsMoreMessages",value:function(e){var t=e.chat,a=t.config,n=t.backfill;n?(F.default.log("--------BACKFILL CASE"),this.chatman.backfillReplay(a)):a.cursor&&this.chatman.getHistory(a)}},{key:"render",value:function(){return null}}]),t}(m.default.Component);q.propTypes={api:w.wrappedApiShape.isRequired,auth:M.authPropType,broadcast:E.broadcastPropType.isRequired,chat:P.chatPropType,dispatch:m.default.PropTypes.func.isRequired,isPlayback:m.default.PropTypes.bool,safetyServiceToken:m.default.PropTypes.object,user:_.userPropType},t.ChatFunctionalComponent=q,t.default=(0,y.connect)((0,W.compose)(I.default,(0,A.default)(["safetyServiceToken","locale"]),O.authStateToProps))((0,w.injectApi)(q))},1285:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return i.default.createElement(c.default,{className:"EmbedCTA",broadcast:e.broadcast,user:e.user,disabled:u.default.isDevice(),onClick:e.onClick},e.children)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),i=n(s),o=a(15),l=a(16),u=n(l),d=a(1209),c=n(d),p=a(34),f=a(20),h=a(123),m=a(126),y=n(m);r.defaultProps={dispatch:function(){},onClick:function(){}},r.propTypes={broadcast:p.broadcastPropType,children:i.default.PropTypes.node,dispatch:i.default.PropTypes.func,player:h.playerPropType,user:f.userPropType,onClick:i.default.PropTypes.func},t.default=(0,o.connect)(y.default)(r)},1286:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.disabled?l.default.isEnabled(e.feature):!l.default.isEnabled(e.feature);return t?null:e.children}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s=a(0),i=n(s),o=a(57),l=n(o);r.propTypes={disbaled:i.default.PropTypes.bool,feature:i.default.PropTypes.string.isRequired,children:i.default.PropTypes.node}},1287:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HeartsContainer=void 0;var r=a(0),s=n(r),i=a(15),o=a(34),l=a(1214),u=a(36),d=a(1330),c=n(d),p=a(1340),f=n(p),h=a(47),m=a(1213),y=a(21),v=function(e){var t=e.auth,a=e.broadcast,n=e.classNames,r=e.commentInputState,i=e.width,o=e.disableUserHeart,l=a.isEnded,u=["HeartsContainer"].concat(n);return s.default.createElement("div",{className:u.join(" ")},o||s.default.createElement(f.default,{commentIsFocused:r&&r.isFocused,isAuthed:t.isLoggedIn,isLive:!l,authUser:t.user}),s.default.createElement(c.default,{broadcast:a,isLive:!l,width:i}))};v.defaultProps={classNames:[]},v.propTypes={auth:u.authPropType,broadcast:o.broadcastPropType,commentInputState:l.commentInputShape,classNames:s.default.PropTypes.arrayOf(s.default.PropTypes.string),dispatch:s.default.PropTypes.func.isRequired,width:s.default.PropTypes.number,disableUserHeart:s.default.PropTypes.bool},t.HeartsContainer=v,t.default=(0,i.connect)((0,y.compose)(h.authStateToProps,m.commentInputStateToProps))(v)},1289:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_CLASSES=t.FADE_DURATION=t.BLUR_RADIUS=void 0;var r=a(277),s=n(r),i=a(474),o=n(i),l=a(5),u=n(l),d=a(1),c=n(d),p=a(2),f=n(p),h=a(7),m=n(h),y=a(6),v=n(y),g=a(0),b=n(g),T=a(1189),E=n(T),P=a(494),_=n(P),M=a(58),C=n(M),k=t.BLUR_RADIUS=40,S=t.FADE_DURATION=4500,w=t.BASE_CLASSES=["u-fullScreen","PlaybackBackground"],R=function(e){function t(){return(0,c.default)(this,t),(0,m.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this.props.broadcast,t=this.props.image,a=w.slice(0);return!t&&e&&(t=e.image_url,a.push("PlaybackBackground--isThumb")),t?b.default.createElement("div",{className:(0,o.default)(new s.default(a)).join(" ")},b.default.createElement(_.default,{value:t,duration:S,onUpdate:this.props.onUpdate,renderValue:function(e,t,a){return b.default.createElement(E.default,{key:t,img:e,blurRadius:k,canvasClass:"u-fullScreen",onLoadFunction:a})}})):null}}]),t}(b.default.Component);R.propTypes={image:b.default.PropTypes.oneOfType([b.default.PropTypes.object,b.default.PropTypes.string]),broadcast:C.default,onUpdate:b.default.PropTypes.func},t.default=R},1290:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),s=n(r),i=a(5),o=n(i),l=a(1),u=n(l),d=a(2),c=n(d),p=a(7),f=n(p),h=a(6),m=n(h),y=a(0),v=n(y),g=a(46),b=a(286),T=n(b),E=a(1352),P=n(E),_=a(1350),M=n(_),C=a(9),k=a(530),S=a(269),w=n(S),R=a(513),I=n(R),N=a(34),A=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.messageClick=a.messageClick.bind(a),a.handleEntered=function(){a.props.message.entered=!0},a.handleExited=function(){var e=a.props.message;e.exiting&&(e.exited=!0)},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.elementNode.addEventListener("animationend",this.handleEntered),this.elementNode.addEventListener("transitionend",this.handleExited)}},{key:"componentWillUnmount",value:function(){this.elementNode.removeEventListener("animationend",this.handleEntered),this.elementNode.removeEventListener("transitionend",this.handleExited)}},{key:"messageClick",value:function(){var e=this.props.message,t=e.usernames?e.usernames[e.usernames.length-1]:e.username;this.props.dispatch((0,g.openProfileModal)({message:e,username:t,params:{}}))}},{key:"getBaseMessageProps",value:function(){var e=this.props,t=e.broadcast,a=e.messageDidAnimateOut,n=e.animationTime,r=e.isLive,s=e.message,i=e.timelineTimeOffset,o=e.timeOnScreen;return{broadcast:t,messageDidAnimateOut:a,animationTime:n,isLive:r,message:s,timelineTimeOffset:i,timeOnScreen:o}}},{key:"renderChat",value:function(e){var t=this.props,a=t.broadcast,n=t.mutedUsers,r=t.blocked;return v.default.createElement(T.default,(0,s.default)({},this.getBaseMessageProps(),{handleVideoJump:this.props.handleVideoJump,getCurrentTime:this.props.getCurrentTime,pauseChat:this.props.pauseChat,messageClick:this.messageClick,participantColor:(0,C.getParticipantColorName)(e.participant_index),isMuted:(0,k.isMuted)(e,{mutedUsers:n,broadcast:a,blocked:r})}))}},{key:"renderSystem",value:function(){return v.default.createElement(P.default,this.getBaseMessageProps())}},{key:"renderJoin",value:function(e){return v.default.createElement(M.default,(0,s.default)({},this.getBaseMessageProps(),{messageClick:this.messageClick,collapsed:e.collapsed,participantColor:(0,C.getParticipantColorName)(e.participant_index)}))}},{key:"renderChatMessage",value:function(e){switch(e.type){case w.default.USER_CHAT:case w.default.CHAT:return this.renderChat(e);case w.default.SYSTEM:case w.default.SENTENCE:return this.renderSystem();case w.default.JOIN:return this.renderJoin(e);default:return null}}},{key:"renderControlMessage",value:function(e){switch(e.type){case I.default.JOIN:return this.renderJoin(e);default:return null}}},{key:"renderMessage",value:function(e){return e.isControl?this.renderControlMessage(e):this.renderChatMessage(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.message,n=t.isFirst;if(a.hidden)return null;var r=this.renderMessage(a),s=["MessageElement"];return a.entered||s.push("enter"),n&&s.push("first"),a.exiting&&s.push("exit"),a.exited&&s.push("exited"),a.exitNow&&s.push("exit-now"),a.slideOut&&s.push("slide-out"),a.delay&&s.push("delay-"+a.delay),v.default.createElement("div",{ref:function(t){e.elementNode=t},className:s.join(" ")},r)}}]),t}(v.default.Component);A.propTypes={blocked:v.default.PropTypes.object,broadcast:N.broadcastPropType,timelineTimeOffset:v.default.PropTypes.number,animationTime:v.default.PropTypes.number,messageDidAnimateOut:v.default.PropTypes.func,mutedUsers:v.default.PropTypes.object,dispatch:v.default.PropTypes.func,message:v.default.PropTypes.object,timeOnScreen:v.default.PropTypes.number,isLive:v.default.PropTypes.bool,isFirst:v.default.PropTypes.bool,handleVideoJump:v.default.PropTypes.func,getCurrentTime:v.default.PropTypes.func,pauseChat:v.default.PropTypes.func},t.default=A},1291:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PeriscopeVideoTest=t.BroadcastVideoTest=t.NewPeriscopeVideo=t.PeriscopeVideoWithAd=t.PeriscopeVideo=t.BroadcastVideo=void 0;var r=a(460),s=n(r),i=a(1309),o=n(i),l=a(1312),u=n(l),d=a(1313),c=n(d),p=a(1314),f=n(p),h=a(1311),m=n(h),y=a(1310),v=n(y),g=t.BroadcastVideo=(0,o.default)((0,f.default)(s.default)),b=t.PeriscopeVideo=(0,m.default)((0,u.default)((0,v.default)(g))),T=(t.PeriscopeVideoWithAd=(0,c.default)(b),t.NewPeriscopeVideo=(0,u.default)((0,v.default)(g)),t.BroadcastVideoTest=(0,f.default)(s.default,!0));t.PeriscopeVideoTest=(0,u.default)(T,!0)},1295:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(102),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(461),c=a(517),p=function(){function e(t){(0,o.default)(this,e),this.wrappedApi=t,this.possiblyNeedStopWatching=this.possiblyNeedStopWatching.bind(this),this.handleStartWatching=this.handleStartWatching.bind(this),this.updateSession=this.updateSession.bind(this),window&&window.addEventListener&&navigator&&navigator.sendBeacon&&window.addEventListener("unload",this.possiblyNeedStopWatching,!1)}return(0,u.default)(e,[{key:"possiblyNeedStopWatching",value:function(){if(this.isWatching){var e=this.wrappedApi.apiService,t=e.host,a=e.store,n=a.getState(),r=this.isReplay?"videoStopWatchingReplay":"videoStopWatchingLive",i=this.wrappedApi.apiService.getEndpoint(r),o=i.path,l={session:this.session};this.isReplay&&(l.n_hearts=n.Chat.replayHearts),navigator.sendBeacon(t+o,(0,s.default)(l))}}},{key:"updateLifeCycleToken",value:function(e){this.lifeCycleToken=e,this.isWatching&&(this.stopWatching(),this.handleStartWatching())}},{key:"updateSession",value:function(e){this.session=e}},{key:"updateIsReplay",value:function(e){this.isReplay=e}},{key:"updateWatchTimeDelay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.WATCH_TIME_DELAY_DEFAULT;this.watchTimeDelay=1e3*e}},{key:"setStartWatchingTimer",value:function(){this.startWatchingTimer=setTimeout(this.handleStartWatching,this.watchTimeDelay)}},{key:"clearStartWatchingTimer",value:function(){this.startWatchingTimer&&clearTimeout(this.startWatchingTimer)}},{key:"handleStartWatching",value:function(){if(!this.isWatching){this.stopPingWatching();var e=(0,d.videoStartWatching)(this.wrappedApi,this.lifeCycleToken,this.isReplay,this.isVideoPreview).then(this.updateSession);return this.startPingWatching(),this.isWatching=!0,e}}},{key:"startPingWatching",value:function(){var e=this;this.stopPingWatching(),this.pingWatchingTimer=setInterval(function(){e.isWatching?(0,d.videoPingWatching)(e.wrappedApi,e.session,e.isReplay):e.stopPingWatching()},1e3*c.WATCH_TIME_PING_INTERVAL)}},{key:"stopPingWatching",value:function(){clearInterval(this.pingWatchingTimer)}},{key:"startWatching",value:function(){return this.isVideoPreview=!1,this.handleStartWatching()}},{key:"startWatchingPreview",value:function(){this.isVideoPreview=!0,this.clearStartWatchingTimer(),this.setStartWatchingTimer()}},{key:"update",value:function(e){var t=e.lifeCycleToken,a=e.isReplay,n=e.watchTimeDelay;"undefined"!=typeof t&&t!==this.lifeCycleToken&&this.updateLifeCycleToken(t),"undefined"!=typeof a&&a!==this.isReplay&&this.updateIsReplay(a),this.updateWatchTimeDelay(n)}},{key:"stopWatching",value:function(){this.isWatching&&(this.stopPingWatching(),(0,d.videoStopWatching)(this.wrappedApi,this.session,this.isReplay),this.isWatching=!1)}},{key:"destroy",value:function(){this.stopWatching(),this.clearStartWatchingTimer(),this.isVideoPreview=void 0,this.lifeCycleToken=void 0,this.session=void 0,this.isReplay=void 0,this.isWatching=void 0,this.pingWatchingTimer=void 0,window.removeEventListener("unload",this.possiblyNeedStopWatching,!1)}}]),e}();t.default=p},1296:function(e,t,a){"use strict";e.exports=function(){return'\n    <svg width="59px" height="51px" viewBox="0 0 59 51" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <path class="shape" d="M29.49943,7.65161487 C25.9971398,3.36065766 21.3354001,1.00688573 16.3190991,1.00688573 C8.89269356,1.00688573 1,6.61990304 1,17.0265358 C1,27.7304026 10.4295058,35.2014193 17.3143789,40.6549172 C19.9228554,42.7252266 21.8347501,44.191887 23.3909435,45.3865611 C25.850071,47.2709558 27.083625,48.216596 28.4140848,49.5478371 C28.7025222,49.839333 29.0890053,50 29.49943,50 C29.9087145,50 30.2940576,49.8404806 30.5847751,49.5489847 C32.3439006,47.7885332 33.9411365,46.569759 38.2209533,43.3036279 L41.6628198,40.6721315 C47.3722823,36.3042837 58,28.1733845 58,16.919807 C58,6.57858866 50.116427,1 42.6991419,1 C37.6760006,1 33.0051403,3.35721479 29.49943,7.65161487 Z"></path>\n      <path class="border" d="M28.8489053,5.43563138 C25.3562996,1.92109055 20.983681,0.00688572968 16.3190991,0.00688572968 C7.42056774,0.00688572968 0,6.9226236 0,17.0265358 C0,22.1855834 2.04040306,26.8994736 5.8050462,31.4472774 C8.51671937,34.7230613 11.1601088,37.0558326 16.6934678,41.4387983 C18.8340729,43.1377656 20.2000846,44.1976641 22.7820008,46.1797754 C25.8185185,48.5066165 26.5846544,49.1319613 27.7067705,50.2547363 C28.1795143,50.7325106 28.8219412,51 29.49943,51 C30.174979,51 30.8149096,50.7343422 31.2928267,50.2551454 C31.3897022,50.1581975 31.4862687,50.0627605 31.5823952,49.9689814 C31.8413936,49.7163076 32.0991169,49.4737977 32.3655459,49.2321313 C33.5909252,48.1206415 34.6153918,47.3131352 38.8276213,44.0985832 L42.2701943,41.4665472 C47.2216019,37.6786259 49.9293458,35.342457 52.7360007,32.0238757 C56.7562017,27.2704007 59,22.282734 59,16.919807 C59,6.87456591 51.5862887,0 42.6991419,0 C37.7334993,0 33.0959278,2.16670511 29.499546,6.12003291 C29.4876099,6.1038208 29.3420814,5.93190494 28.8489053,5.43563138 Z M28.7247217,8.28393371 L29.4993625,9.2330129 L30.2740843,8.28399976 C33.5968976,4.21364357 37.9880426,2 42.6991419,2 C50.5140427,2 57,8.01428071 57,16.919807 C57,21.7505742 54.9485974,26.3105708 51.208916,30.7323601 C48.5231058,33.908055 45.8965364,36.1741887 41.0552127,39.8778937 L37.6135788,42.5092122 C33.3470424,45.7652079 32.307475,46.584617 31.0218502,47.7507529 C30.7374152,48.0087518 30.4620483,48.2678638 30.1857688,48.5373967 C30.0835118,48.6371567 29.9809075,48.7385608 29.877402,48.8421444 C29.7739718,48.9458508 29.6435344,49 29.49943,49 C29.3554589,49 29.2251022,48.945723 29.124911,48.8444694 C27.9147064,47.6335365 27.1074652,46.9746403 23.9991846,44.5928088 C21.4258429,42.6172797 20.0670532,41.5629847 17.9360533,39.8716415 C12.5104884,35.5740588 9.93892334,33.304672 7.34567784,30.1719523 C3.85559722,25.9558284 2,21.6688903 2,17.0265358 C2,8.05990959 8.49487798,2.00688573 16.3190991,2.00688573 C21.0231751,2.00688573 25.4052305,4.21693921 28.7247217,8.28393371 L28.7247217,8.28393371 Z"></path>\n    </svg>\n  '}},1297:function(e,t,a){"use strict";e.exports=function(){return'\n    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="56px" height="47px" viewBox="0 0 56 47" version="1.1">\n      <path d="M40.7493875,8 C39.8625724,4.55001545 36.7257061,2 33.0047247,2 L22.9952753,2 C19.2670618,2 16.1348494,4.54892716 15.2499342,8 L9.99683765,8 C5.58030617,8 2,11.5813344 2,16.005662 L2,36.994338 C2,41.415743 5.57417059,45 9.99683765,45 L46.0031624,45 C50.4196938,45 54,41.4186656 54,36.994338 L54,16.005662 C54,11.584257 50.4258294,8 46.0031624,8 L40.7493875,8 Z" class="camera-fill"/>\n      <path d="M46.0031624,8 L46.0031624,8 L40.7493875,8 C39.8625724,4.55001545 36.7257061,2 33.0047247,2 L22.9952753,2 C19.2670618,2 16.1348494,4.54892716 15.2499342,8 L9.99683765,8 C5.58030617,8 2,11.5813344 2,16.005662 L2,36.994338 C2,41.415743 5.57417059,45 9.99683765,45 L46.0031624,45 C50.4196938,45 54,41.4186656 54,36.994338 L54,16.005662 C54,11.584257 50.4258294,8 46.0031624,8 L46.0031624,8 Z M46.0031624,6 C51.5290116,6 56,10.4782954 56,16.005662 L56,36.994338 C56,42.521845 51.5256529,47 46.0031624,47 L9.99683765,47 C4.47098837,47 0,42.5217046 0,36.994338 L0,16.005662 C0,10.478155 4.47434713,6 9.99683765,6 C9.99683765,6 13.8449707,5.96875 13.8377754,5.97928921 C15.4002867,2.41301236 18.9562991,0 22.9952753,0 L33.0047247,0 C37.5895478,0 40.5981825,2.4158698 42.1618752,5.98217617 C42.1568604,5.984375 46.0031624,6 46.0031624,6 Z" class="camera-outline" fill="#FFFFFF"/>\n      <path d="M28,36 C34.0751322,36 39,31.0751322 39,25 C39,18.9248678 34.0751322,14 28,14 C21.9248678,14 17,18.9248678 17,25 C17,31.0751322 21.9248678,36 28,36 L28,36 Z M28,38 L28,38 C20.8202983,38 15,32.1797017 15,25 C15,17.8202983 20.8202983,12 28,12 C35.1797017,12 41,17.8202983 41,25 C41,32.1797017 35.1797017,38 28,38 L28,38 Z" class="camera-lens" fill="#FFFFFF"/>\n    </svg>\n  '}},1298:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(22),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(11),c=n(d),p=a(287),f=n(p),h=a(269),m=n(h),y=a(176),v=a(270),g=a(68),b=a(271),T=a(9),E=a(12),P=n(E),_=100,M=50,C=[f.default.USER_CHAT.label,f.default.CHAT.label,f.default.HEART.label,f.default.JOIN.label,f.default.SYSTEM.label,f.default.VIDEO.label],k=function(e){var t=void 0;return(0,c.default)(f.default).forEach(function(a){f.default[a].kind===e&&(t=f.default[a].label)}),t},S="Periscope__DisableEventProcessing",w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.mostRecentNTP,n=t.replay,r=t.dispatch,s=t.options,i=void 0===s?{}:s;(0,o.default)(this,e),this.mostRecentNTP=a,this.replay=n,this.options=i,this.blockMoreMessagesHack=!0,this.dispatch=r,this.EventMemory={UserChatEventStack:[],ChatEventStack:[],ChatEventHeap:[],HeartEventStack:[],HeartEventHeap:[],JoinEventStack:[],JoinEventHeap:[],SystemEventStack:[],VideoEventStack:[],VideoEventHeap:[]},this.reset(),this.start()}return(0,u.default)(e,[{key:"start",value:function(){this.processStackInterval()}},{key:"flush",value:function(){this.EventMemory={UserChatEventStack:[],ChatEventStack:[],ChatEventHeap:[],HeartEventStack:[],HeartEventHeap:[],JoinEventStack:[],JoinEventHeap:[],SystemEventStack:[],VideoEventStack:[],VideoEventHeap:[]}}},{key:"stop",value:function(){clearTimeout(this.intervalId),this.intervalId=null}},{key:"processEvent",value:function(t,a){e.setEventTime(t,this.replay),e.setUUID(t);var n=k(a);this.EventMemory[n+"Stack"].push(t),this.EventMemory[n+"Stack"].filter(function(e,t,a){return a.indexOf(e)===t}),this.EventMemory[n+"Stack"]=this.EventMemory[n+"Stack"].sort(function(t,a){return e.getEventTime(t)-e.getEventTime(a)})}},{key:"reset",value:function(){this.mostRecentNTP=0,this.timerTick=0,this.previousNtp=this.mostRecentNTP,this.interpolatedTime=this.previousNtp}},{key:"processStackInterval",value:function(){var e=this;this.processStack(),clearTimeout(this.intervalId),this.intervalId=setTimeout(function(){return e.processStackInterval()},_)}},{key:"processStack",value:function(){var t=this;this.previousNtp===this.mostRecentNTP?(this.timerTick++,this.interpolatedTime=this.mostRecentNTP+this.timerTick*_/1e3):(this.timerTick=0,this.interpolatedTime=this.previousNtp=this.mostRecentNTP);for(var a=function(a){if(!t.intervalId)return P.default.log("no interval id, so breaking"),{v:void 0};if(window[S])return{v:void 0};var n=t.EventMemory[C[a]+"Stack"];if(0===n.length)return"continue";if(C[a]===f.default.SYSTEM.label)return y.eventManager.publish(v.CHAT_SYSTEM_MESSAGES,n),n.forEach(function(e){e.type===m.default.SENTENCE&&t.dispatch((0,g.chatUpdateModeration)(e))}),t.EventMemory[C[a]+"Stack"]=[],"continue";if(C[a]===f.default.JOIN.label)return y.eventManager.publish(v.CHAT_JOINS,n),t.EventMemory[C[a]+"Stack"]=[],"continue";var r=t.EventMemory[C[a]+"Heap"],s=e.binarySearch(n,function(a){return t.interpolatedTime-.2-e.getEventTime(a,!0)});s>0&&n.splice(0,s);var i=e.binarySearch(n,function(a){return t.interpolatedTime-e.getEventTime(a,!0)});if(i<0)return"continue";var o=n.splice(0,i+1);if(o.forEach(function(e){r.push(e)}),i>=0)switch(C[a]){case f.default.VIDEO.label:if(!t.EventMemory.VideoEventHeap.length)return{v:void 0};t.EventMemory.VideoEventHeap.forEach(function(e){0!==e.webClient_ntpInSeconds&&e.type===m.default.BROADCAST_ENDED&&(0,b.endLiveBroadcast)(t.dispatch,e.broadcastId)}),t.EventMemory.VideoEventHeap=[];break;case f.default.CHAT.label:if(!t.EventMemory.ChatEventHeap.length)return{v:void 0};y.eventManager.publish(v.CHAT_COMMENTS,t.EventMemory.ChatEventHeap.slice()),t.EventMemory.ChatEventHeap=[];break;case f.default.HEART.label:default:if(!t.EventMemory.HeartEventHeap.length)return{v:void 0};var l=t.EventMemory.HeartEventHeap.slice();y.eventManager.publish(v.CHAT_HEARTS,l),t.options.onNewHeartEvents&&t.options.onNewHeartEvents(l),t.EventMemory.HeartEventHeap=[]}},n=0;n<C.length;n++){var r=a(n);switch(r){case"continue":continue;default:if("object"===("undefined"==typeof r?"undefined":(0,s.default)(r)))return r.v}}for(var i=0,n=0;n<C.length;n++){var o=this.EventMemory[C[n]+"Stack"];i+=Number(o.length)}this.replay&&!this.blockMoreMessagesHack&&i<M&&this.dispatch((0,g.chatReplayNeedsMoreMessages)())}}],[{key:"binarySearch",value:function(e,t){for(var a=0,n=e.length-1,r=void 0,s=void 0,i=void 0;a<=n;){if(r=Math.floor((a+n)/2),s=t(e[r]),void 0!==i&&0!==s)return i;s>=0?a=r+1:n=r-1,0===s&&(i=r)}return void 0!==i||s>0?r:r-1}},{key:"setEventTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t&&!!e.ntpForBroadcasterFrame,n=a?e.ntpForBroadcasterFrame:e.ntpForLiveFrame||0;e.webClient_ntpInSeconds=parseFloat(n/4294967296)}},{key:"getEventTime",value:function(e){return e&&e.webClient_ntpInSeconds}},{key:"setUUID",value:function(e){e.uuid||(e.uuid=(0,T.guid)())}},{key:"sendEndBroadcast",value:function(){}}]),e}();t.default=w},1299:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return i.default.createElement(u.default,e)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),i=n(s),o=a(15),l=a(1316),u=n(l);t.default=(0,o.connect)()(r)},1300:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),s=n(r),i=a(15),o=a(1263),l=a(1329),u=n(l),d=a(1192),c=a(21),p=function(e){return s.default.createElement(u.default,e)};p.defaultProps={drawer:{visible:!1,component:null,componentProps:null,options:{}}},p.propTypes={dispatch:s.default.PropTypes.func.isRequired,drawer:d.drawerPropType.isRequired},t.default=(0,i.connect)((0,c.compose)(o.drawerStateToProps),o.drawerDispatchToProps)(p)},1301:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(47),g=a(1179),b=a(21),T=a(36),E=a(68),P=a(1344),_=n(P),M=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.sendHeart=a.sendHeart.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"sendHeart",value:function(){var e=this.props,t=e.auth,a=e.chat,n=e.dispatch;a&&a.paused||t.isLoggedIn&&n((0,E.chatAddNewUserHeart)({authUser:t.user}))}},{key:"render",value:function(){return m.default.createElement(_.default,{onClick:this.sendHeart},this.props.children)}}]),t}(m.default.Component);M.propTypes={auth:T.authPropType,chat:g.chatSessionPropType,dispatch:m.default.PropTypes.func.isRequired,children:m.default.PropTypes.oneOfType([m.default.PropTypes.element,m.default.PropTypes.arrayOf(m.default.PropTypes.element)])},t.default=(0,y.connect)((0,b.compose)(v.authStateToProps,g.chatSessionMapper))(M)},1302:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.modal,a=e.active,n=a||t.isShareOverlayVisible;return i.default.createElement(c.default,{active:n})}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),i=n(s),o=a(15),l=a(462),u=a(464),d=a(1364),c=n(d);r.propTypes={modal:u.modalPropType.isRequired,active:i.default.PropTypes.bool},r.defaultProps={modal:u.modalDefaultProps},t.default=(0,o.connect)(l.modalStateToProps)(r)},1303:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return i.default.createElement("div",{className:"UsersActivity-container"},i.default.createElement(u.default,null),i.default.createElement(c.default,e))}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),i=n(s),o=a(15),l=a(1305),u=n(l),d=a(1341),c=n(d),p=a(131),f=a(1264),h=a(21);r.propTypes={dispatch:i.default.PropTypes.func.isRequired,following:i.default.PropTypes.arrayOf(i.default.PropTypes.string),roster:i.default.PropTypes.arrayOf(i.default.PropTypes.object)},t.default=(0,o.connect)((0,h.compose)(p.authFollowingMapper,f.rosterStateToProps))(r)},1304:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(26),g=a(179),b=n(g),T=a(67),E=n(T),P=a(20),_=a(281),M=a(78),C=a(100),k=a(1353),S=n(k),w=a(21),R=a(12),I=new R.FileDebugger("AnalyticsCallout",!0),N=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.displayCallout()}},{key:"componentDidUpdate",value:function(){this.displayCallout()}},{key:"componentWillUnmount",value:function(){this.handleCallout&&this.handleCallout.cancel()}},{key:"displayCallout",value:function(){var e=this,t=this.props.settings;if(!t.teaching[C.SETTINGS_TAUGHT_ANALYTICS])return this.handleCallout?I.warn("handleCallout running"):void(this.handleCallout=b.default.runAfterInteractions(function(){var t=e.props,a=t.user,n=t.target,r=t.api;(0,_.fetchUserBroadcastHistory)(r,a.id).then(function(t){var a=t.broadcasts;return I.debug("broadcasts",a),a.length?(I.debug("dispatch analytics callout",n),void e.props.dispatch((0,M.showTooltip)({component:S.default,target:n,position:"bottom",callout:{circle:!0,onTargetClick:function(){e.props.onTargetClick()},onDismiss:function(){e.props.dispatch((0,C.taughtAnalytics)())}}}))):I.debug("No broadcasts, do not show analytics callout")})},"handle-analytics-callout"))}},{key:"render",value:function(){return null}}]),t}(m.default.Component);N.defaultProps={onTargetClick:function(){return I.warn("onTargetClick not provided")}},N.propTypes={user:P.userPropType.isRequired,target:m.default.PropTypes.any,onTargetClick:m.default.PropTypes.func,api:v.wrappedApiShape,dispatch:m.default.PropTypes.func,settings:C.settingsPropType.isRequired},t.default=(0,v.injectApi)((0,y.connect)((0,w.compose)((0,E.default)(["settings"])))(N))},1305:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(176),g=a(270),b=a(131),T=a(1264),E=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.newLeaveSub=v.eventManager.subscribe(g.CHAT_LEAVE,function(t,a){!a.user_id||!e.props.following||e.props.following.indexOf(a.user_id)<0||e.props.dispatchRosterRemoveUser(t,a)}),this.newJoinSub=v.eventManager.subscribe(g.CHAT_JOIN,function(t,a){!a.user_id||!e.props.following||e.props.following.indexOf(a.user_id)<0||e.props.dispatchRosterAddUser(t,a)})}},{key:"componentWillUnmount",value:function(){this.newRosterSub&&this.newRosterSub.remove(),this.newLeaveSub&&this.newLeaveSub.remove(),this.newJoinSub&&this.newJoinSub.remove(),this.newRosterSub=null,this.newLeaveSub=null,this.newJoinSub=null}},{key:"render",value:function(){return null}}]),t}(m.default.Component);E.propTypes={dispatchRosterReceive:m.default.PropTypes.func.isRequired,dispatchRosterRemoveUser:m.default.PropTypes.func.isRequired,dispatchRosterAddUser:m.default.PropTypes.func.isRequired,following:m.default.PropTypes.arrayOf(m.default.PropTypes.string)},t.default=(0,y.connect)(b.authFollowingMapper,T.rosterDispatchToProps)(E)},1307:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.VideoPlayerFunctionalComponent=void 0;var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(175),g=a(9),b=a(16),T=n(b),E=a(67),P=n(E),_=a(34),M=a(100),C=a(98),k=a(271),S=a(187),w=n(S),R=a(183),I=n(R),N=a(477),A=n(N),O=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.updatePlayerMode(this.props),this.updatePlayerAudio()}},{key:"componentWillUnmount",value:function(){(0,k.resetVideoState)(this.props.dispatch)}},{key:"componentWillReceiveProps",value:function(e){this.props.broadcast.id!==e.broadcast.id?((0,k.resetVideoState)(e.dispatch),this.updatePlayerAudio()):this.updatePlayerMode(e)}},{key:"updatePlayerMode",value:function(e){return!this.props.broadcast.isEnded&&e.broadcast.isEnded?void(0,k.endLiveBroadcast)(this.props.dispatch,this.props.broadcast.id):(e.broadcast.isRunning&&(0,g.playerFormatIsApp)(e.playerFormat)&&T.default.hasInlineAutoplayVideo()&&(e.player.isVideoPresentation||e.dispatch((0,C.playerPresentation)(I.default.VIDEO))),void(e.broadcast.isRunning?e.player.isLiveMode||e.dispatch((0,C.playerMode)(w.default.LIVE)):e.player.isReplayMode||e.dispatch((0,
C.playerMode)(w.default.REPLAY))))}},{key:"updatePlayerAudio",value:function(){var e=this.props.settings.muted;switch(this.props.playerFormat){case A.default.EMBED:this.props.dispatchAudioOff();break;case A.default.APP:default:T.default.isDesktop()&&!e&&this.props.dispatchAudioOn()}}},{key:"render",value:function(){return null}}]),t}(m.default.Component);O.defaultProps={playerFormat:A.default.APP,settings:M.settingsPropDefault},O.propTypes={dispatch:m.default.PropTypes.func.isRequired,dispatchAudioOn:m.default.PropTypes.func.isRequired,dispatchAudioOff:m.default.PropTypes.func.isRequired,playerFormat:m.default.PropTypes.oneOf(N.playerFormatValues).isRequired,broadcast:_.broadcastPropType.isRequired,player:m.default.PropTypes.object.isRequired,settings:M.settingsPropType},t.VideoPlayerFunctionalComponent=O,t.default=(0,y.connect)((0,P.default)(["settings"]),v.videoPlayerDispatchMapper)(O)},1309:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){return Math.min(Math.max(t,e),a)}function s(e){var t=function(t){function a(e){(0,c.default)(this,a);var t=(0,m.default)(this,(a.__proto__||(0,u.default)(a)).call(this,e));return(0,P.reconciler)(t),t.isPanning=!1,t.startX=0,t.startY=0,t.startT=0,t.velocityX=0,t.velocityY=0,t.pitch=0,t.yaw=0,t.keyStates={},t.setVideoRef=t.setVideoRef.bind(t),t.onSetup=t.onSetup.bind(t),t.onTimeUpdate=t.onTimeUpdate.bind(t),t.onSourceUpdate=t.onSourceUpdate.bind(t),t.handle360Inputs=t.handle360Inputs.bind(t),t.handleMouseDown=t.handleMouseDown.bind(t),t.handleMouseUp=t.handleMouseUp.bind(t),t.handleMouseMove=t.handleMouseMove.bind(t),t.handleTouchStart=t.handleTouchStart.bind(t),t.handleTouchEnd=t.handleTouchEnd.bind(t),t.handleTouchCancel=t.handleTouchCancel.bind(t),t.handleTouchMove=t.handleTouchMove.bind(t),t.handleKeyDown=t.handleKeyDown.bind(t),t.handleKeyUp=t.handleKeyUp.bind(t),t}return(0,v.default)(a,t),(0,f.default)(a,[{key:"componentWillReceiveProps",value:function(e){(0,P.reconciler)(this,e)}},{key:"componentWillUnmount",value:function(){this.remove360KeyboardListeners()}},{key:"setVideoRef",value:function(e){this.videoRef=e}},{key:"init",value:function(){this.remove360KeyboardListeners(),this.videoRef.is360()&&(this.videoRef.videoPlayer.vr.verticalFOV=D,this.add360InputListeners())}},{key:"onSetup",value:function(){this.init()}},{key:"onSourceUpdate",value:function(){this.init()}},{key:"onTimeUpdate",value:function(){this.videoRef.is360()&&(this.videoRef.videoPlayer.vr.verticalFOV=D)}},{key:"handleKeyboardInputs",value:function(){(this.keyStates[M.default.I]||this.keyStates[M.default.UP_ARROW])&&(this.pitch=r(this.pitch+A,-O,O)),(this.keyStates[M.default.J]||this.keyStates[M.default.LEFT_ARROW])&&(this.yaw+=A),(this.keyStates[M.default.K]||this.keyStates[M.default.DOWN_ARROW])&&(this.pitch=r(this.pitch-A,-O,O)),(this.keyStates[M.default.L]||this.keyStates[M.default.RIGHT_ARROW])&&(this.yaw-=A)}},{key:"handleKeyDown",value:function(e){switch(e.keyCode){case M.default.I:case M.default.J:case M.default.K:case M.default.L:case M.default.LEFT_ARROW:case M.default.UP_ARROW:case M.default.DOWN_ARROW:case M.default.RIGHT_ARROW:this.keyStates[e.keyCode]=!0}}},{key:"handleKeyUp",value:function(e){delete this.keyStates[e.keyCode]}},{key:"add360InputListeners",value:function(){var e=this.videoRef.videoPlayer,t=e&&e.element.parentNode;t&&this.props.touchEnabled&&(t.addEventListener("mousedown",this.handleMouseDown),t.addEventListener("mouseup",this.handleMouseUp),t.addEventListener("mousemove",this.handleMouseMove),t.addEventListener("touchstart",this.handleTouchStart),t.addEventListener("touchend",this.handleTouchEnd),t.addEventListener("touchcancel",this.handleTouchCancel),t.addEventListener("touchmove",this.handleTouchMove)),this.props.keyboardEnabled&&(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)),requestAnimationFrame(this.handle360Inputs)}},{key:"remove360KeyboardListeners",value:function(){var e=this.videoRef.videoPlayer,t=e&&e.element.parentNode;t&&(t.removeEventListener("mousedown",this.handleMouseDown),t.removeEventListener("mouseup",this.handleMouseUp),t.removeEventListener("mousemove",this.handleMouseMove),t.removeEventListener("touchstart",this.handleTouchStart),t.removeEventListener("touchend",this.handleTouchEnd),t.removeEventListener("touchcancel",this.handleTouchCancel),t.removeEventListener("touchmove",this.handleTouchMove)),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)}},{key:"handle360Inputs",value:function(){if(this.videoRef.videoPlayer){this.props.touchEnabled&&this.handleFlick(),this.props.keyboardEnabled&&this.handleKeyboardInputs();var e={};e.yaw=this.yaw*S,e.pitch=this.pitch*S,e.roll=this.roll*S,this.videoRef.videoPlayer.vr.direction=e,requestAnimationFrame(this.handle360Inputs)}}},{key:"handleMouseDown",value:function(e){this.isPanning=!0,this.startX=e.offsetX,this.startY=e.offsetY,this.startT=Date.now(),event.preventDefault(),event.stopPropagation()}},{key:"handleMouseUp",value:function(){this.isPanning=!1,event.preventDefault(),event.stopPropagation()}},{key:"handlePan",value:function(e,t){this.yaw+=e,this.pitch=r(this.pitch+t,-O,O);var a=Date.now()-this.startT;a>0&&(this.velocityX=e/a*N,this.velocityY=t/a*N)}},{key:"handleFlick",value:function(){this.isPanning||(this.yaw+=this.velocityX,this.pitch=r(this.pitch+this.velocityY,-O,O),this.velocityX*=I,this.velocityY*=I)}},{key:"handleMouseMove",value:function(e){if(this.isPanning){var t=(e.offsetX-this.startX)*R,a=(e.offsetY-this.startY)*R;this.handlePan(t,a),this.startX=e.offsetX,this.startY=e.offsetY,this.startT=Date.now(),event.preventDefault(),event.stopPropagation()}}},{key:"handleTouchStart",value:function(e){this.isPanning=!0,this.startX=e.touches[0].pageX,this.startY=e.touches[0].pageY,this.startT=Date.now(),event.stopPropagation()}},{key:"handleTouchEnd",value:function(e){this.isPanning=!1,event.stopPropagation(),e.preventDefault()}},{key:"handleTouchCancel",value:function(e){this.isPanning=!1,this.event.stopPropagation(),e.preventDefault()}},{key:"handleTouchMove",value:function(e){if(this.isPanning){var t=(e.touches[0].pageX-this.startX)*R,a=(e.touches[0].pageY-this.startY)*R;this.handlePan(t,a),this.startX=e.touches[0].pageX,this.startY=e.touches[0].pageY,this.startT=Date.now(),event.stopPropagation(),e.preventDefault()}}},{key:"render",value:function(){return b.default.createElement(e,(0,o.default)({},this.props,{setVideoRef:this.setVideoRef,onSetup:this.onSetup,onTimeUpdate:this.onTimeUpdate,onSourceUpdate:this.onSourceUpdate}))}}]),a}(b.default.Component);return(0,E.default)(t,e),t.displayName="With360("+(0,C.getDisplayName)(e)+")",t.WrappedComponent=e,t.propTypes={touchEnabled:b.default.PropTypes.bool,keyboardEnabled:b.default.PropTypes.bool},t.defaultProps={touchEnabled:!0,keyboardEnabled:!0},t}Object.defineProperty(t,"__esModule",{value:!0}),t.VERTICAL_FOV=t.PITCH_VIEW_LIMIT=t.KEYBOARD_TRANSLATION_FACTOR=void 0;var i=a(4),o=n(i),l=a(5),u=n(l),d=a(1),c=n(d),p=a(2),f=n(p),h=a(7),m=n(h),y=a(6),v=n(y);t.default=s;var g=a(0),b=n(g),T=a(97),E=n(T),P=a(460),_=a(177),M=n(_),C=a(122),k=Math.PI/2,S=180/Math.PI,w=.9,R=.0025*k,I=.85,N=5,A=t.KEYBOARD_TRANSLATION_FACTOR=.016*k,O=t.PITCH_VIEW_LIMIT=.7*k,D=t.VERTICAL_FOV=2*S*Math.atan2(Math.tan(k/2),w)},1310:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){return{image:e}}}function s(e){var t=function(t){function a(e){(0,c.default)(this,a);var t=(0,m.default)(this,(a.__proto__||(0,u.default)(a)).call(this,e));return(0,P.reconciler)(t),t.lastCaptureTime=null,t.state={image:null},t.setVideoRef=t.setVideoRef.bind(t),t.onInitialized=t.onInitialized.bind(t),t.onTimeUpdate=t.onTimeUpdate.bind(t),t.onSeeked=t.onSeeked.bind(t),t.doCapture=t.doCapture.bind(t),t.doCapture=k.default.throttle(t.doCapture,I),t}return(0,v.default)(a,t),(0,f.default)(a,[{key:"componentWillReceiveProps",value:function(e){(0,P.reconciler)(this,e)}},{key:"shouldCapture",value:function(){return!this.props.disableCapture}},{key:"doCapture",value:function(){if(!this.shouldCapture())return R.warn("blur disabled, skipping doCapture");if(!this.videoRef)return R.warn("videoRef not available for onSetupCapture");if(!this.videoRef.isVideoReady())return R.warn("video not ready");this.lastCaptureTime=this.videoRef.getCurrentMonotonicTime();try{var e=this.videoRef.getFrame();this.props.onBlurCapture(e),this.props.disableBlur||this.setState(r(e))}catch(e){R.warn("doCapture",e)}}},{key:"setVideoRef",value:function(e){this.videoRef=e}},{key:"onInitialized",value:function(){this.doCapture()}},{key:"onTimeUpdate",value:function(e){if(this.shouldCapture()){var t=e.currentMonotonicTime,a=this.state.image,n=Math.abs(t-this.lastCaptureTime)>N;a&&!n||this.doCapture()}}},{key:"onSeeked",value:function(){this.doCapture()}},{key:"render",value:function(){return b.default.createElement("div",null,!this.props.disableBlur&&b.default.createElement(M.default,(0,o.default)({},this.props,{image:this.state.image})),b.default.createElement(e,(0,o.default)({},this.props,{setVideoRef:this.setVideoRef,onInitialized:this.onInitialized,onTimeUpdate:this.onTimeUpdate,onSeeked:this.onSeeked})))}}]),a}(b.default.Component);return(0,E.default)(t,e),t.displayName="WithBlur("+(0,S.getDisplayName)(e)+")",t.WrappedComponent=e,t.defaultProps={onBlurCapture:function(){return R.warn("onBlurCapture not provided")}},t.propTypes={disableBlur:b.default.PropTypes.bool,disableCapture:b.default.PropTypes.bool,onBlurCapture:b.default.PropTypes.func},t}Object.defineProperty(t,"__esModule",{value:!0});var i=a(4),o=n(i),l=a(5),u=n(l),d=a(1),c=n(d),p=a(2),f=n(p),h=a(7),m=n(h),y=a(6),v=n(y);t.default=s;var g=a(0),b=n(g),T=a(97),E=n(T),P=a(460),_=a(1289),M=n(_),C=a(9),k=n(C),S=a(122),w=a(12),R=new w.FileDebugger("withBlur",!0),I=1e3,N=5},1311:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=function(t){function a(e){(0,d.default)(this,a);var t=(0,h.default)(this,(a.__proto__||(0,l.default)(a)).call(this,e));return(0,M.reconciler)(t),t.onInitialized=t.onInitialized.bind(t),t.onTimeUpdate=t.onTimeUpdate.bind(t),t.onEnded=t.onEnded.bind(t),t}return(0,y.default)(a,t),(0,p.default)(a,[{key:"componentWillReceiveProps",value:function(e){(0,M.reconciler)(this,e)}},{key:"onInitialized",value:function(){_.default.onAdStateUpdate({isAdPlaying:this.props.isAdPlaying})}},{key:"onTimeUpdate",value:function(e){var t=e.currentTime,a=e.played,n=e.duration;_.default.onTimeUpdate({currentTime:t,played:a,duration:n})}},{key:"onEnded",value:function(){_.default.onEnded(),_.default.onAdStateUpdate({isAdPlaying:this.props.isAdPlaying})}},{key:"render",value:function(){var t=this;return g.default.createElement(e,(0,i.default)({},this.props,{videoRef:function(e){t.videoRef=e},onInitialized:this.onInitialized,onTimeUpdate:this.onTimeUpdate,onEnded:this.onEnded}))}}]),a}(g.default.Component);return(0,T.default)(t,e),t.displayName="WithCardPlayback("+(0,E.getDisplayName)(e)+")",t.WrappedComponent=e,t.defaultProps={isAdPlaying:!1},t.propTypes={isAdPlaying:g.default.PropTypes.bool.isRequired},t}Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),i=n(s),o=a(5),l=n(o),u=a(1),d=n(u),c=a(2),p=n(c),f=a(7),h=n(f),m=a(6),y=n(m);t.default=r;var v=a(0),g=n(v),b=a(97),T=n(b),E=a(122),P=a(1181),_=n(P),M=a(460)},1312:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(t){function a(e){(0,d.default)(this,a);var t=(0,h.default)(this,(a.__proto__||(0,l.default)(a)).call(this,e));return(0,D.reconciler)(t),t.propsHaveChanged=W.default.propsHaveChanged(),t.setVideoRef=t.setVideoRef.bind(t),t.onMetadata=t.onMetadata.bind(t),t.onInitialized=t.onInitialized.bind(t),t.onCanPlay=t.onCanPlay.bind(t),t.onPlaying=t.onPlaying.bind(t),t.onPlay=t.onPlay.bind(t),t.onPause=t.onPause.bind(t),t.onSeeking=t.onSeeking.bind(t),t.onSeeked=(0,_.default)(t.onSeeked.bind(t),1e3),t.onStalled=t.onStalled.bind(t),t.onTimeUpdate=t.onTimeUpdate.bind(t),t.onEnded=t.onEnded.bind(t),t.onError=t.onError.bind(t),t}return(0,y.default)(a,t),(0,p.default)(a,[{key:"componentWillReceiveProps",value:function(e){(0,D.reconciler)(this,e),this.controlSeeking(e),this.controlPlayback(e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.stalledTimer)}},{key:"mutedChanged",value:function(e){return!(!this.props||!this.props.player)&&this.props.player.muted!==e.player.muted}},{key:"orientationChanged",value:function(e){return!(!this.props||!this.props.player)&&this.props.player.orientation!==e.player.orientation}},{key:"playerModeChanged",value:function(e){return!(!this.props||!this.props.player)&&this.props.player.playerMode!==e.player.playerMode}},{key:"playerStateChanged",value:function(e){return!(!this.props||!this.props.player)&&this.props.player.playerState!==e.player.playerState}},{key:"isReplayMode",value:function(){return!(!this.props||!this.props.player)&&this.props.player.isReplayMode}},{key:"windowDimensionsChanged",value:function(e){return this.propsHaveChanged(["windowWidth","windowHeight"],e)}},{key:"videoDimensionsChanged",value:function(e){return this.propsHaveChanged(["playerWidth","playerHeight"],e)}},{key:"srcChanged",value:function(e){return this.propsHaveChanged("url",e)}},{key:"onMetadata",value:function(e){this.props.dispatch((0,L.playerMetadata)(e))}},{key:"onInitialized",value:function(){G.default.hasInlineAutoplayVideo()&&this.props.dispatch((0,L.playerState)(O.default.CONNECTING))}},{key:"onCanPlay",value:function(){this.props.dispatch((0,L.playerStarted)(!0))}},{key:"onPlay",value:function(){var e=this.props,t=e.dispatch,a=e.player;t((0,B.chatResume)()),G.default.hasInlineVideo()||a.isPlaying||t((0,L.playerState)(O.default.PLAYING))}},{key:"onPlaying",value:function(){var e=this.props,t=e.dispatch,a=e.player;a.isPlaying||(this.isReplayMode()&&t((0,H.replaySeekReset)()),this.props.dispatch((0,L.playerState)(O.default.PLAYING)))}},{key:"onPause",value:function(){var e=this.props,t=e.dispatch,a=e.player;t((0,B.chatPause)()),G.default.hasInlineVideo()||a.isPaused||t((0,L.playerState)(O.default.PAUSED))}},{key:"onSeeking",value:function(){this.isReplayMode()&&this.onStalled()}},{key:"onSeeked",value:function(){var e=this.props,t=e.dispatch,a=e.player;a.isStopped||(t((0,L.playerState)(O.default.PLAYING)),this.isReplayMode()&&t((0,H.replaySeekReset)()))}},{key:"onStalled",value:function(){var e=this.props,t=e.dispatch,a=e.player;a&&(a.isStopped||a.isStalled||(t((0,L.playerState)(O.default.STALLED)),t((0,B.chatPause)()),this.startStalledTimer()))}},{key:"startStalledTimer",value:function(){var e=this;clearTimeout(this.stalledTimer),this.stalledTimer=setTimeout(function(){return e.handleStall()},z)}},{key:"handleStall",value:function(){var e=this;clearTimeout(this.stalledTimer);var t=this.props,a=t.player,n=t.isReplay,r=t.disableStallingRecovery,s=t.dispatch;if(!r&&a&&a.isStalled){if(n)return s((0,U.broadcastForceRequest)()),void this.startStalledTimer();var i=this.props.api;(0,k.fetchBroadcast)(i,this.props.broadcast.id).then(function(e){if(e=(0,S.broadcastWithAccessors)(e.broadcast),e.isEnded)return K.warn("stalledTimer","broadcast ended"),(0,V.endLiveBroadcast)(s,e.id),!0}).catch(function(e){K.warn("stalledTimer","broadcast fetch err",e)}).then(function(t){t?K.warn("stalledTimer","done"):(K.warn("stalledTimer","continue stall"),e.startStalledTimer())})}}},{key:"onTimeUpdate",value:function(e){var t=this.props.dispatch,a=e.currentTime,n=e.duration,r=0===this.props.replay.elapsed||a-this.props.replay.elapsed>.5;this.props.player.isPlayback&&r&&t((0,H.replayPlaybackTime)(a,n))}},{key:"onEnded",value:function(){this.props.dispatch((0,L.playerRequestedTimecode)()),(0,V.resetVideoState)(this.props.dispatch)}},{key:"onError",value:function(){this.props.dispatch((0,L.playerState)(O.default.UNAVAILABLE))}},{key:"controlSeeking",value:function(e){if(this.videoRef&&e.replay){var t=e.replay.requestedPosition;"number"==typeof t&&e.player.isReplayMode&&this.videoRef.setTime(t)}}},{key:"controlPlayback",value:function(e){if(e.player){var t=e.player.playerState;if(this.props.player.playerState!==t)switch(t){case O.default.PAUSED:this.videoRef&&this.videoRef.pause(),e.dispatch((0,B.chatPause)());break;case O.default.STALLED:e.dispatch((0,B.chatPause)());break;case O.default.PLAYING:this.videoRef&&this.videoRef.play(),e.dispatch((0,B.chatResume)())}}}},{key:"setVideoRef",value:function(e){this.videoRef=e}},{key:"render",value:function(){if(this.props.withPlayerDisabled)return K.warn("withPlayerDisabled"),g.default.createElement(e,(0,i.default)({},this.props,{setVideoRef:this.setVideoRef,onSetupCapture:this.onSetupCapture}));var t=this.props,a=t.player,n=t.video,r=a&&a.playerState===O.default.PAUSED,s=a&&a.muted,o=a&&a.orientation||0,l=this.props.isReplay||a&&a.isReplayMode,u=a&&a.requestedTimecode,d=n&&n.needsCredentials;return g.default.createElement(e,(0,i.default)({},this.props,{setVideoRef:this.setVideoRef,needsCredentials:d,isReplay:l,autoplay:!0,muted:s,paused:r,orientation:o,requestedTimecode:u,onMetadata:this.onMetadata,onSetupCapture:this.onSetupCapture,onInitialized:this.onInitialized,onCanPlay:this.onCanPlay,onPlaying:this.onPlaying,onPlay:this.onPlay,onPause:this.onPause,onSeeking:this.onSeeking,onSeeked:this.onSeeked,onStalled:this.onStalled,onTimeUpdate:this.onTimeUpdate,onEnded:this.onEnded,onError:this.onError}))}}]),a}(g.default.Component);return(0,E.default)(a,e),a.displayName="WithPlayer("+(0,j.getDisplayName)(e)+")",a.WrappedComponent=e,a.defaultProps={disableStallingRecovery:!1,player:{}},a.propTypes={isReplay:g.default.PropTypes.bool,withPlayerDisabled:g.default.PropTypes.bool,disableStallingRecovery:g.default.PropTypes.bool.isRequired,video:I.videoPropType.isRequired,broadcast:k.broadcastPropType.isRequired,api:N.wrappedApiShape.isRequired,dispatch:g.default.PropTypes.func,replay:R.replayPropType,player:w.playerPropType.isRequired},t?a:(0,N.injectApi)((0,b.connect)((0,Y.compose)(M.replayFullMapper,C.videoPlayerStateMapper),void 0,void 0,{withRef:!0})(a))}Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),i=n(s),o=a(5),l=n(o),u=a(1),d=n(u),c=a(2),p=n(c),f=a(7),h=n(f),m=a(6),y=n(m);t.default=r;var v=a(0),g=n(v),b=a(15),T=a(97),E=n(T),P=a(466),_=n(P),M=a(1180),C=a(175),k=a(34),S=a(184),w=a(123),R=a(268),I=a(461),N=a(26),A=a(101),O=n(A),D=a(460),L=a(98),H=a(276),B=a(68),U=a(182),V=a(271),F=a(9),W=n(F),j=a(122),x=a(12),q=a(16),G=n(q),Y=a(21),K=new x.FileDebugger("withPlayer",!0),z=5e3},1313:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return{update:e.update+1}}function s(e){var t=function(t){function a(e){(0,c.default)(this,a);var t=(0,m.default)(this,(a.__proto__||(0,u.default)(a)).call(this,e));return(0,_.reconciler)(t),t.playbackTimer=null,t.state={update:0},t.setVideoRef=t.setVideoRef.bind(t),t.runPlaybackTimer=t.runPlaybackTimer.bind(t),t.onEnded=t.onEnded.bind(t),t.handleSkip=t.handleSkip.bind(t),t.handleClick=t.handleClick.bind(t),t.handleMuteClick=t.handleMuteClick.bind(t),t}return(0,v.default)(a,t),(0,f.default)(a,[{key:"componentDidMount",value:function(){this.runPlaybackTimer()}},{key:"componentWillUnmount",value:function(){this.endPlaybackTimer()}},{key:"componentWillReceiveProps",value:function(e){(0,_.reconciler)(this,e)}},{key:"runPlaybackTimer",value:function(){this.setState(r),this.playbackTimer=requestAnimationFrame(this.runPlaybackTimer)}},{key:"endPlaybackTimer",value:function(){cancelAnimationFrame(this.playbackTimer)}},{key:"setVideoRef",value:function(e){this.videoRef=e}},{key:"onEnded",value:function(){this.endPlaybackTimer()}},{key:"handleClick",value:function(){if(this.videoRef&&this.videoRef.videoPlayer){var e=this.videoRef.videoPlayer;e.paused?(D.default.playRequest(),this.runPlaybackTimer(),e.play()):(D.default.pauseRequest(),this.endPlaybackTimer(),this.setState(r),e.pause())}}},{key:"handleSkip",value:function(e){e.stopPropagation(),D.default.adSkipRequest(),this.endPlaybackTimer(),this.props.onEnded()}},{key:"handleMuteClick",value:function(e){if(e.stopPropagation(),this.videoRef&&this.videoRef.videoPlayer){var t=this.videoRef.videoPlayer,a=t.muted;a?D.default.unmuteRequest():D.default.muteRequest(),t.muted=!a,this.setState(r)}}},{key:"getAdCurrentTime",value:function(){if(!this.videoRef||!this.videoRef.videoPlayer)return H;var e=this.videoRef.videoPlayer,t=e.currentTime;return t?t:H}},{key:"getAdDuration",value:function(){if(!this.videoRef||!this.videoRef.videoPlayer)return H;var e=this.videoRef.videoPlayer,t=e.duration;return t?t:H}},{key:"renderTimeLeft",value:function(){var e=this.getAdCurrentTime(),t=this.getAdDuration();return(0,L.getFormattedTime)(Math.round(t-e),t)}},{key:"renderElapsed",value:function(){return(0,L.getFormattedTime)(Math.round(this.getAdCurrentTime()),this.getAdDuration())}},{key:"renderDuration",value:function(){var e=this.getAdDuration();return(0,L.getFormattedTime)(Math.round(e),e)}},{key:"renderPlaybackIcon",value:function(){if(!this.videoRef||!this.videoRef.videoPlayer)return null;var e=this.videoRef.videoPlayer;return b.default.createElement("div",{className:"TwitterAdUI-playbackIcon"},b.default.createElement(S.default,{paused:e.paused}))}},{key:"renderMuteIcon",value:function(){if(!this.videoRef||!this.videoRef.videoPlayer)return null;var e=this.videoRef.videoPlayer;return b.default.createElement("div",{className:"TwitterAdUI-mutedIcon",onClick:this.handleMuteClick},b.default.createElement(C.default,{muted:e.muted}))}},{key:"renderAdCountdown",value:function(){return b.default.createElement("div",{className:"TwitterAdUI-time TwitterAdUI-button"},b.default.createElement(P.FormattedMessage,N.default.advertisement)," ","·"," ",this.renderTimeLeft()," ",b.default.createElement("div",{className:"TwitterAdUI-audioIcon"}))}},{key:"renderSkipButton",value:function(e){if(!(this.getAdDuration()<B)){var t=["TwitterAdUI-skip","TwitterAdUI-rowGroup"];return e&&t.push("TwitterAdUI-button"),[b.default.createElement("div",{className:"TwitterAdUI-controlSpacer"}),b.default.createElement("div",{className:t.join(" "),onClick:this.handleSkip},b.default.createElement(P.FormattedMessage,N.default.skip),b.default.createElement(R.default,null))]}}},{key:"renderControls",value:function(){return b.default.createElement("div",{className:"TwitterAdUI-controls"},b.default.createElement("div",{className:"TwitterAdUI-controlsLeft TwitterAdUI-rowGroup"},b.default.createElement("div",{className:"TwitterAdUI-rowGroup"},this.renderPlaybackIcon(),b.default.createElement(P.FormattedMessage,N.default.advertisement))),b.default.createElement("div",{className:"TwitterAdUI-controlsRight TwitterAdUI-rowGroup"},b.default.createElement("div",{className:"TwitterAdUI-timer"},this.renderElapsed()," / ",this.renderDuration()),this.renderMuteIcon(),this.renderSkipButton(!1)))}},{key:"possiblyRenderAdUI",value:function(){if(this.props.isAdPlaying){var e=["TwitterAdUI-fader","TwitterAdUI-paddedContainer"],t=["TwitterAdUI-container"].concat(e).join(" "),a=["TwitterAdUI-activeBackground"].concat(e).join(" ");return b.default.createElement("div",{className:"TwitterAdUI",onClick:this.handleClick},b.default.createElement("div",{className:t},this.renderAdCountdown(),this.renderSkipButton(!0)),b.default.createElement("div",{className:a},this.renderControls()))}}},{key:"render",value:function(){return b.default.createElement("div",null,b.default.createElement(e,(0,o.default)({},this.props,{onEnded:this.onEnded,setVideoRef:this.setVideoRef})),this.possiblyRenderAdUI())}}]),a}(b.default.Component);return(0,E.default)(t,e),t.displayName="WithTwitterAd("+(0,A.getDisplayName)(e)+")",t.WrappedComponent=e,t.defaultProps={onEnded:function(){}},t.propTypes={intl:P.intlShape,isAdPlaying:b.default.PropTypes.func.isRequired,onEnded:b.default.PropTypes.func},(0,P.injectIntl)(t)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(4),o=n(i),l=a(5),u=n(l),d=a(1),c=n(d),p=a(2),f=n(p),h=a(7),m=n(h),y=a(6),v=n(y),g=a(0),b=n(g),T=a(97),E=n(T),P=a(3),_=a(460),M=a(1366),C=n(M),k=a(1367),S=n(k),w=a(1365),R=n(w),I=a(1258),N=n(I),A=a(122),O=a(1181),D=n(O),L=a(127),H=(0,L.getFormattedTime)(0),B=7;t.default=s},1314:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(t){function a(e){(0,d.default)(this,a);var t=(0,h.default)(this,(a.__proto__||(0,l.default)(a)).call(this,e));return(0,M.reconciler)(t),t.setVideoRef=t.setVideoRef.bind(t),t.onPlay=t.onPlay.bind(t),t.onPlaying=t.onPlaying.bind(t),t.onSeeked=t.onSeeked.bind(t),t.onEnded=t.onEnded.bind(t),t}return(0,y.default)(a,t),(0,p.default)(a,[{key:"componentDidMount",value:function(){this.videoLifeCycle=new _.default(this.props.api),this.lifeCycleTokenPresent(this.props)&&this.updateVideoLifeCycle(this.props)}},{key:"componentWillReceiveProps",value:function(e){(0,M.reconciler)(this,e),this.lifeCycleHasChanged(e)&&this.updateVideoLifeCycle(e)}},{key:"componentDidUpdate",value:function(e){this.lifeCycleHasChanged(e)&&this.updateVideoLifeCycle(this.props),!e.isVideoReady&&this.props.isVideoReady&&this.isVideoState(S.default.PLAYING)&&this.handleStartWatching()}},{key:"componentWillUnmount",value:function(){this.videoLifeCycle.destroy(),this.videoLifeCycle=null}},{key:"handleStartWatching",value:function(){this.props.isVideoPreview?this.videoLifeCycle.startWatchingPreview():this.videoLifeCycle.startWatching()}},{key:"handleStopWatching",value:function(){this.videoLifeCycle.stopWatching()}},{key:"isVideoState",value:function(e){return!!this.videoRef&&this.videoRef.getPlayerState()===e}},{key:"onPlay",value:function(){this.props.isVideoReady&&!this.isVideoState(S.default.PLAYING)&&this.handleStartWatching()}},{key:"onPlaying",value:function(){this.props.isVideoReady&&!this.isVideoState(S.default.PLAYING)&&this.handleStartWatching()}},{key:"onSeeked",value:function(){this.props.isVideoReady&&!this.isVideoState(S.default.STOPPED)&&this.handleStartWatching()}},{key:"onEnded",value:function(){this.handleStopWatching()}},{key:"lifeCycleTokenPresent",value:function(e){var t=e.video;return t&&t.life_cycle_token}},{key:"lifeCycleTokenHasChanged",value:function(e){var t=e.video;return!(!this.props.video||!t)&&this.props.video.life_cycle_token!==t.life_cycle_token}},{key:"replayStateHasChanged",value:function(e){var t=e.isReplay;if(this.props.isReplay!==t)return!0}},{key:"lifeCycleHasChanged",value:function(e){var t=e.video,a=e.isReplay;return!!this.lifeCycleTokenHasChanged({video:t})||!!this.replayStateHasChanged({isReplay:a})}},{key:"updateVideoLifeCycle",value:function(e){var t=e.video,a=void 0===t?{}:t,n=e.isReplay;this.videoLifeCycle.update({lifeCycleToken:a.life_cycle_token,isReplay:n,watchTimeDelay:a.watchTimeDelay})}},{key:"setVideoRef",value:function(e){this.videoRef=e}},{key:"render",value:function(){return this.props.lifecycleDisabled?(I.default.warn("withWatchingLifecycle","lifecycleDisabled"),g.default.createElement(e,(0,i.default)({},this.props,{setVideoRef:this.setVideoRef}))):g.default.createElement(e,(0,i.default)({},this.props,{setVideoRef:this.setVideoRef,onPlay:this.onPlay,onPlaying:this.onPlaying,onSeeked:this.onSeeked,onEnded:this.onEnded}))}}]),a}(g.default.Component);return(0,T.default)(a,e),a.displayName="WithWatchingLifecycle("+(0,w.getDisplayName)(e)+")",a.WrappedComponent=e,a.defaultProps={isReplay:!1,isVideoPreview:!1,isVideoReady:!0},a.propTypes={api:E.wrappedApiShape.isRequired,video:C.videoPropType.isRequired,lifecycleDisabled:g.default.PropTypes.bool,isReplay:g.default.PropTypes.bool,isVideoPreview:g.default.PropTypes.bool,isVideoReady:g.default.PropTypes.bool},t?a:(0,E.injectApi)(a)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),i=n(s),o=a(5),l=n(o),u=a(1),d=n(u),c=a(2),p=n(c),f=a(7),h=n(f),m=a(6),y=n(m),v=a(0),g=n(v),b=a(97),T=n(b),E=a(26),P=a(1295),_=n(P),M=a(460),C=a(461),k=a(101),S=n(k),w=a(122),R=a(12),I=n(R);t.default=r},1315:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return i.default.createElement("div",{className:"AppLinks"},i.default.createElement(f.default,{href:d.default.APP_WEB,platform:c.PLATFORM_TYPE_IOS,dispatch:e.dispatch,trackEventName:"GET_APP_SPLIT_CLICK",trackEventLocation:e.trackEventLocation},i.default.createElement(o.FormattedMessage,l.app.ios)),i.default.createElement(f.default,{href:d.default.PLAY_STORE,platform:c.PLATFORM_TYPE_ANDROID,dispatch:e.dispatch,trackEventName:"GET_APP_SPLIT_ANDROID_CLICK",trackEventLocation:e.trackEventLocation},i.default.createElement(o.FormattedMessage,l.app.android)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s=a(0),i=n(s),o=a(3),l=a(1260),u=a(129),d=n(u),c=a(1211),p=a(1247),f=n(p);r.propTypes={dispatch:i.default.PropTypes.func.isRequired,trackEventLocation:i.default.PropTypes.string}},1316:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(16),v=n(y),g=a(34),b=a(1250),T=n(b),E=a(1247),P=n(E),_=a(1315),M=n(_),C=a(1211),k="BroadcastDetails",S=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return this.isBroadcastError()?null:v.default.ios()?this.getMobileCTA("OPEN_IN_APP_CLICK"):v.default.android()?this.getMobileCTA("OPEN_IN_APP_ANDROID_CLICK"):v.default.isDevice()?null:this.props.broadcast.isRunning?null:this.defaultCTA()}},{key:"isBroadcastError",value:function(){return this.props.broadcastError.isServerError||this.props.broadcastError.isUnavailable||this.props.broadcastError.isNotFound}},{key:"getMobileCTA",value:function(e){return m.default.createElement("div",{className:"BroadcastDetails-appCta BroadcastDetails-appCta--deviceWithApp"},m.default.createElement(P.default,{href:this.props.broadcast.inAppUrl,dispatch:this.props.dispatch,trackEventName:e,trackEventLocation:k,platform:C.PLATFORM_TYPE_NATIVE}))}},{key:"defaultCTA",value:function(){return m.default.createElement("div",{className:"BroadcastDetails-appCta"},m.default.createElement(T.default,{dispatch:this.props.dispatch,broadcast:this.props.broadcast,location:k}),m.default.createElement(M.default,{dispatch:this.props.dispatch,trackEventLocation:k}))}}]),t}(m.default.Component);S.propTypes={dispatch:m.default.PropTypes.func.isRequired,broadcast:g.broadcastPropType.isRequired,broadcastError:m.default.PropTypes.object.isRequired},t.default=S},1317:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),s=n(r),i=a(5),o=n(i),l=a(1),u=n(l),d=a(2),c=n(d),p=a(7),f=n(p),h=a(6),m=n(h),y=a(0),v=n(y),g=a(16),b=n(g),T=a(34),E=a(20),P=a(268),_=a(1253),M=n(_),C=a(1248),k=n(C),S=a(1324),w=n(S),R=a(470),I=n(R),N=a(479),A=n(N),O=a(1320),D=n(O),L=a(1249),H=n(L),B=a(1319),U=n(B),V=a(1299),F=n(V),W=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"possiblyRenderReplayButton",value:function(){if(b.default.isVideoSupported()){var e=v.default.createElement(D.default,{dispatch:this.props.dispatch,player:this.props.player}),t=this.props.broadcast;if(t&&t.isRunning&&!b.default.hasInlineAutoplayVideo())return e;if(this.props.replay.replayAvailable)return e}}},{key:"shouldRenderData",value:function(){return!this.props.broadcastError.isServerError&&(!this.props.broadcastError.isNotFound&&(!this.props.broadcastError.isUnavailable&&!(!this.props.broadcast||!this.props.user)))}},{key:"possiblyRenderBroadcastTitle",value:function(){if(this.shouldRenderData())return v.default.createElement(I.default,{
broadcast:this.props.broadcast})}},{key:"possiblyRenderBroadcastUser",value:function(){if(this.shouldRenderData())return v.default.createElement(A.default,{user:this.props.user,location:"BroadcastDetails",profileIsVisible:this.props.profileIsVisible,toggleProfileSidebar:this.props.toggleProfileSidebar})}},{key:"possiblyRenderCouchmodeCTA",value:function(){if(this.props.broadcastError.isUnavailable&&b.default.isVideoSupported())return v.default.createElement(w.default,null)}},{key:"possiblyRenderBroadcastBackground",value:function(){if(this.props.broadcast)return v.default.createElement(k.default,{broadcast:this.props.broadcast,player:this.props.player,width:this.props.width,dispatch:this.props.dispatch})}},{key:"renderBroadcastStatePreview",value:function(){return b.default.shouldUseMobileLayout()?v.default.createElement(U.default,{broadcast:this.props.broadcast,broadcastError:this.props.broadcastError,player:this.props.player,replay:this.props.replay,viewers:this.props.viewers,dispatch:this.props.dispatch}):v.default.createElement(H.default,{broadcast:this.props.broadcast,player:this.props.player,replay:this.props.replay,broadcastError:this.props.broadcastError})}},{key:"render",value:function(){return v.default.createElement(M.default,(0,s.default)({baseClass:"BroadcastDetails"},this.props),v.default.createElement("div",{className:"BroadcastDetails-overlay u-flexItem u-flexParent"},this.possiblyRenderReplayButton(),this.renderBroadcastStatePreview(),this.possiblyRenderCouchmodeCTA(),this.possiblyRenderBroadcastTitle(),this.possiblyRenderBroadcastUser(),v.default.createElement(F.default,{broadcast:this.props.broadcast,broadcastError:this.props.broadcastError,dispatch:this.props.dispatch})),v.default.createElement("div",{className:"u-flexItem"},this.possiblyRenderBroadcastBackground()))}}]),t}(v.default.Component);t.default=W,W.propTypes={user:E.userPropType,replay:P.replayPropType,broadcastError:v.default.PropTypes.object,profileIsVisible:v.default.PropTypes.bool,width:v.default.PropTypes.number,toggleProfileSidebar:v.default.PropTypes.func,player:v.default.PropTypes.object.isRequired,broadcast:T.broadcastPropType,dispatch:v.default.PropTypes.func.isRequired,viewers:v.default.PropTypes.number}},1318:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=["BroadcastNextButton","u-transition-1"];return e.player.isCinemaPlayer&&t.push("u-opacity-0","u-pointer-events-none"),i.default.createElement("div",{className:t.join(" "),onClick:e.nextBroadcast},i.default.createElement("button",{className:"BroadcastNextButton-button"},i.default.createElement(l.default,null)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s=a(0),i=n(s),o=a(1362),l=n(o);r.propTypes={player:i.default.PropTypes.object,nextBroadcast:i.default.PropTypes.func.isRequired}},1319:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(3),v=a(182),g=a(46),b=a(34),T=a(268),E=a(1249),P=n(E),_=a(1219),M=n(_),C=a(1210),k=n(C),S=a(272),w=n(S),R=5e3,I=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.state={thumbLoaded:!1},a.thumbnailPreviewInterval=null,a.handleThumbClick=a.handleThumbClick.bind(a),a.handleThumbLoaded=a.handleThumbLoaded.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.possiblyLaunchApp(),this.props.broadcast.isRunning&&!this.thumbnailPreviewInterval&&(this.thumbnailPreviewInterval=setInterval(function(){e.props.dispatch((0,v.broadcastForceRequest)(e.props.broadcast.id))},R))}},{key:"componentWillReceiveProps",value:function(e){e.broadcast.isRunning||clearInterval(this.thumbnailPreviewInterval)}},{key:"componentWillUnmount",value:function(){clearInterval(this.thumbnailPreviewInterval)}},{key:"possiblyRenderBroadcastPreview",value:function(){if(this.props.broadcast&&this.props.broadcast.image_url){var e=["BroadcastPreview-imageWrapper"];this.props.broadcast.isRunning&&e.push("BroadcastPreview-imageWrapper--live");var t=this.props.intl;return m.default.createElement("div",{className:"BroadcastPreview-imageContainer",onClick:this.handleThumbClick},m.default.createElement("div",{className:e.join(" "),"data-tag-label":t.formatMessage(w.default.live)},m.default.createElement("img",{className:"BroadcastPreview-image",src:this.props.broadcast.image_url,onLoad:this.handleThumbLoaded})),m.default.createElement("span",{className:"BroadcastPreview-playIcon"},m.default.createElement(k.default,null)))}}},{key:"handleThumbClick",value:function(){this.props.dispatch((0,g.openAppLinkModal)({broadcast:this.props.broadcast}))}},{key:"handleThumbLoaded",value:function(){this.state.thumbLoaded||this.setState({thumbLoaded:!0})}},{key:"possiblyLaunchApp",value:function(){return!1}},{key:"renderSubhead",value:function(){return this.props.broadcast.isRunning?m.default.createElement("div",{className:"BroadcastPreview-subhead"},this.possiblyRenderWatchingCount()):m.default.createElement("div",{className:"BroadcastPreview-subhead"},this.possiblyRenderWatchedCount(),m.default.createElement(P.default,{broadcast:this.props.broadcast,broadcastError:this.props.broadcastError,player:this.props.player,replay:this.props.replay}))}},{key:"possiblyRenderWatchingCount",value:function(){if(this.props.viewers)return m.default.createElement("div",{className:"BroadcastPreview-watching"},m.default.createElement(M.default,{withText:!0,count:this.props.viewers}))}},{key:"possiblyRenderWatchedCount",value:function(){if(this.props.viewers)return m.default.createElement("div",{className:"BroadcastPreview-viewers"},m.default.createElement(M.default,{withText:!0,count:this.props.viewers}))}},{key:"render",value:function(){var e=["BroadcastPreview"];return this.state.thumbLoaded&&e.push("BroadcastPreview--withImage"),m.default.createElement("div",{className:e.join(" ")},this.possiblyRenderBroadcastPreview(),this.renderSubhead())}}]),t}(m.default.Component);I.propTypes={broadcast:b.broadcastPropType,broadcastError:m.default.PropTypes.object,dispatch:m.default.PropTypes.func,intl:y.intlShape.isRequired,viewers:m.default.PropTypes.number,player:m.default.PropTypes.object,replay:T.replayPropType},t.default=(0,y.injectIntl)(I)},1320:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(16),g=n(v),b=a(24),T=a(271),E=a(175),P=a(1363),_=n(P),M=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.togglePlayerMode=a.togglePlayerMode.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"togglePlayerMode",value:function(){return this.playbackNotSupported()?void this.props.dispatch((0,b.trackEvent)("REPLAY_UNSUPPORTED_PLAYBACK_CLICK")):void(this.props.player.isInterstitialPresentation?this.props.dispatchManualPlayStart():(0,T.resetVideoState)(this.props.dispatch))}},{key:"playbackNotSupported",value:function(){return!g.default.isVideoSupported()}},{key:"render",value:function(){var e=["BroadcastReplayButton"],t=this.props.player.isInterstitialPresentation,a=this.props.player.isVideoPresentation,n=this.props.player.isStopped,r=this.props.player.videoHasStarted;return t&&n?e.push("is-stopped"):a&&!r?e.push("is-loading"):r&&e.push("is-playing"),this.playbackNotSupported()&&e.push("BroadcastReplayButton--disabled"),m.default.createElement("div",{className:e.join(" "),onClick:this.togglePlayerMode},m.default.createElement("div",{className:"BroadcastReplayButton-loading"}),m.default.createElement(_.default,null))}}]),t}(m.default.Component);M.propTypes={dispatch:m.default.PropTypes.func,dispatchManualPlayStart:m.default.PropTypes.func,player:m.default.PropTypes.object},t.default=(0,y.connect)(function(){return{}},E.videoPlayerDispatchMapper)(M)},1322:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(11),s=n(r),i=a(25),o=n(i),l=a(5),u=n(l),d=a(1),c=n(d),p=a(2),f=n(p),h=a(7),m=n(h),y=a(6),v=n(y),g=a(0),b=n(g),T=a(3),E=a(1323),P=n(E),_=a(9),M=a(1216),C=a(68),k=a(275),S=a(34),w=a(177),R=n(w),I=a(269),N=n(I),A=a(1256),O=n(A),D=a(516),L=n(D),H=a(12),B=a(1259),U=new H.FileDebugger("CommentInput",!0),V=100,F=/(?:\r\n|\r|\n)/,W="CommentInput-input",j=function(e){if(e)if(e.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var a=window.getSelection();a.removeAllRanges(),a.addRange(t)}else if("undefined"!=typeof document.body.createTextRange){var n=document.body.createTextRange();n.moveToElementText(e),n.collapse(!1),n.select()}},x=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));a.state={html:"",isDisabled:a.getDisabled(e)};var n=e.intl.formatMessage;return a.placeholder=n(B.placeholder),a.setInputReference=a.setInputReference.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.handleKeyUp=a.handleKeyUp.bind(a),a.onBlur=a.onBlur.bind(a),a.onFocus=a.onFocus.bind(a),a.onPaste=a.onPaste.bind(a),a.onChange=a.onChange.bind(a),a}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.checkDisabled(e);a||(e.replyUsername&&e.replyUsername!==this.props.replyUsername?this.setState({html:"@"+e.replyUsername+"&nbsp;"},function(){return t.focusInput()}):e.isFocused&&!this.props.isFocused&&this.focusInput())}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(e,t){this.state.html!==t.html&&this.props.onChange(this.input)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.resetInputTimeout),clearTimeout(this.setModerationTimerTimeout),window.removeEventListener("keydown",this.handleKeyDown)}},{key:"getDisabled",value:function(e){var t=e.broadcast,a=e.chatStreamDisabled,n=e.moderation;return!(!a&&!(0,M.isModeratedForBroadcast)(n,t))}},{key:"checkDisabled",value:function(e){var t=e.broadcast,a=e.chatStreamDisabled,n=e.moderation;if(this.state.isDisabled)return!0;if(a||(0,M.isModeratedForBroadcast)(n,t))return this.setState({isDisabled:!0}),a?this.setState({html:this.getChatStreamDisabledText(a)}):n.sentence_type===O.default.COMMENTING_SUSPENDED||n.sentence_type===O.default.GLOBAL_COMMENTING_SUSPENDED?this.setModerationTimer(e):this.setState({html:this.getModerationText()}),!0}},{key:"getChatStreamDisabledText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.chatStreamDisabled,t=this.props.intl,a=t.formatMessage;switch(e){case L.default.STREAM_TYPE_HLS_TOO_FULL:return a(B.videoStreamDisabledTooFull);case L.default.STREAM_TYPE_HLS_FRIEND_CHAT:return a(B.videoStreamDisabledFriendOnly);default:return a(B.videoStreamDisabledUnkown)}}},{key:"setModerationTimer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,a=t.moderation;if(a){var n=1e3*a.sentence_duration_sec-(Date.now()-a.timestamp);if(n<=0)return this.props.dispatch((0,C.chatClearModeration)()),void this.setState({isDisabled:!1,html:""});var r=this.getTimeoutUnit(n),s=n%r>0?n%r:r;this.setState({html:this.getModerationText(n)}),clearTimeout(this.setModerationTimerTimeout),this.setModerationTimerTimeout=setTimeout(function(){return e.setModerationTimer()},s)}}},{key:"getTimeoutUnit",value:function(e){return e<=6e4?1e3:e<=36e5?6e4:e<=864e5?36e5:864e5}},{key:"getModerationText",value:function(e){var t=this.props.intl,a=t.formatRelative,n=t.formatMessage;if(!e)return n(B.disabledForBroadcast);var r=a(Date.now()+e);return n(B.limited,{relativeTime:r})}},{key:"setInputReference",value:function(e){this.input=e}},{key:"focusInput",value:function(){this.input&&this.input.focus&&(j(this.input),this.props.dispatch((0,k.commentInputSetFocus)(!0)))}},{key:"blurInput",value:function(){this.input&&this.input.blur&&(this.input.blur(),window.getSelection&&window.getSelection().removeAllRanges(),this.props.dispatch((0,k.commentInputSetFocus)(!1)))}},{key:"handleKeyDown",value:function(e){if(!this.state.isDisabled){var t=e.target;if(e.shiftKey||e.keyCode!==R.default.ENTER||(e.stopPropagation(),e.preventDefault(),this.props.isFocused?this.handleEnterPress(t):this.focusInput()),!t||t===this.input){e.stopPropagation();var a=(0,_.containsMetaKey)(e);if(this.props.isFocused){if(e.keyCode===R.default.ESC)return this.blurInput();e.keyCode!==R.default.SPACE_BAR||a||""!==this.serializeInput(t).trim()||e.preventDefault()}t.innerText&&t.innerText.length>V&&!a&&e.preventDefault()}}}},{key:"handleKeyUp",value:function(e){if(!this.state.isDisabled){e.stopPropagation(),e.preventDefault();var t=e.target,a=(0,_.containsMetaKey)(e);if(e.keyCode===R.default.SPACE_BAR&&!a&&""===this.serializeInput(t).trim()){var n=this.props,r=n.authUser,s=n.dispatch;s((0,C.chatAddNewUserHeart)({authUser:r}))}}}},{key:"handleEnterPress",value:function(e){var t=this,a=this.serializeInput(e).trim();if(0!==a.length)return this.shouldSendComment(a)?(this.sendComment(a),clearTimeout(this.resetInputTimeout),void(this.resetInputTimeout=setTimeout(function(){return t.resetInput()},100))):void this.props.commentError()}},{key:"shouldSendComment",value:function(e){return!(this.lastComment&&this.lastComment===e||this.props.isCoolDown)}},{key:"sendComment",value:function(e){var t=this.props.authUser;this.props.dispatch((0,C.chatNewUserChat)({body:e,authUser:t,type:N.default.CHAT})),this.lastComment=e,this.props.startCoolDown()}},{key:"resetInput",value:function(){this.setState({html:""})}},{key:"serializeInput",value:function(e){return e.innerText.split(F).filter(function(e){return e.length>0}).join(" ")}},{key:"onBlur",value:function(e){var t=this.state.html;this.props.dispatch((0,k.commentInputSetFocus)(!1)),""===e.target.innerText.trim()&&(t=""),this.setState({html:t})}},{key:"onFocus",value:function(){this.props.dispatch((0,k.commentInputSetFocus)(!0))}},{key:"onChange",value:function(e,t){this.setState({html:t})}},{key:"onPaste",value:function(e){if(!e||!e.clipboardData||!e.clipboardData.getData)return!0;try{var t=e.clipboardData.getData("text/plain");if(window.getSelection){var a=window.getSelection();a.rangeCount&&!function(){var e=a.getRangeAt(0),n=t.split(F);e.deleteContents(),n.forEach(function(t){e.insertNode(document.createTextNode(t)),e.insertNode(document.createElement("br"))})}()}else if(document.selection&&document.selection.createRange){var n=document.selection.createRange();n.text=t}return this.setState({html:e.target.innerHTML}),e.stopPropagation(),e.preventDefault(),!1}catch(e){}}},{key:"render",value:function(){return b.default.createElement("div",{className:"CommentInput"},b.default.createElement(P.default,{key:"comment-input",getInputReference:this.setInputReference,className:W,html:this.state.html,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onPaste:this.onPaste,onChange:this.onChange,placeholder:this.state.isDisabled?this.state.html:this.placeholder,locked:this.state.isDisabled}))}}]),t}(b.default.Component);x.defaultProps={},["startCooldown","commentError","onChange"].forEach(function(e){x.defaultProps[e]=function(){return U.warn(e+" not provided")}}),x.propTypes={authUser:b.default.PropTypes.object,broadcast:S.broadcastPropType,commentError:b.default.PropTypes.func,chatStreamDisabled:b.default.PropTypes.oneOf([!1].concat((0,o.default)((0,s.default)(L.default).map(function(e){return L.default[e]})))),dispatch:b.default.PropTypes.func.isRequired,intl:T.intlShape.isRequired,isCoolDown:b.default.PropTypes.bool,isFocused:b.default.PropTypes.bool,moderation:b.default.PropTypes.object,replyUsername:b.default.PropTypes.string,startCoolDown:b.default.PropTypes.func,onChange:b.default.PropTypes.func},t.default=x},1323:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),s=n(r),i=a(11),o=n(i),l=a(5),u=n(l),d=a(1),c=n(d),p=a(2),f=n(p),h=a(7),m=n(h),y=a(6),v=n(y),g=a(0),b=n(g),T=["className","onFocus","onBlur","onKeyDown","onKeyUp","onPaste","onChange","placeholder"],E=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.emitChange=a.emitChange.bind(a),a}return(0,v.default)(t,e),(0,f.default)(t,[{key:"shouldComponentUpdate",value:function(e){var t=!this.htmlMatchesInnerHtml(e),a=this.props.locked!==e.locked,n=this.props.onChange!==e.onChange,r=this.props.parser!==e.parser,s=this.props.className!==e.className;return t||a||n||r||s}},{key:"componentDidMount",value:function(){this.props.getInputReference(this.refs.input)}},{key:"componentDidUpdate",value:function(){this.htmlMatchesInnerHtml()||(this.refs.input.innerHTML=this.props.html,this.emitChange())}},{key:"htmlMatchesInnerHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return this.refs.input&&e.html===this.refs.input.innerHTML}},{key:"emitChange",value:function(){this.props.parser&&this.props.parser(this.refs.input);var e=this.refs.input.innerHTML;e!==this.lastHtml&&this.props.onChange(this.refs.input,e),this.lastHtml=e}},{key:"render",value:function(){var e=this,t={};return(0,o.default)(this.props).forEach(function(a){T.indexOf(a)>=0&&(t[a]=e.props[a])}),b.default.createElement("div",(0,s.default)({},t,{ref:"input",onInput:this.emitChange,contentEditable:!this.props.locked,suppressContentEditableWarning:!0}),this.props.html)}}]),t}(b.default.Component);E.defaultProps={onChange:function(){},getInputReference:function(){}},E.propTypes={html:b.default.PropTypes.string.isRequired,getInputReference:b.default.PropTypes.func,className:b.default.PropTypes.string,onChange:b.default.PropTypes.func,parser:b.default.PropTypes.func,locked:b.default.PropTypes.bool},t.default=E},1324:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){return i.default.createElement("div",{className:"CouchmodeCTA"},i.default.createElement("div",{className:"CouchmodeCTA-prompt"},i.default.createElement(o.FormattedMessage,d.default.couchmodePrompt)),i.default.createElement(l.Link,{to:"/couchmode",className:"CouchmodeCTA-button"},i.default.createElement(o.FormattedMessage,d.default.couchmodeButton)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s=a(0),i=n(s),o=a(3),l=a(35),u=a(463),d=n(u)},1325:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(34),v=a(123),g=a(1246),b=n(g),T=a(1252),E=n(T),P=a(1196),_=n(P),M=a(1208),C=n(M),k=a(1209),S=n(k),w=a(16),R=n(w),I=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"renderRightButtons",value:function(){var e=[m.default.createElement(S.default,{key:"MediaExpand",className:"MediaExpand",broadcast:this.props.broadcast})];return R.default.hasAudioControl()&&e.unshift(m.default.createElement(C.default,{key:"MuteButton",muted:this.props.player.muted})),m.default.createElement("div",{className:"EmbedFooter-fixed"},e)}},{key:"renderLiveFooter",value:function(){return m.default.createElement("div",{className:"EmbedFooter"},m.default.createElement(_.default,{viewers:this.props.viewers,is360:this.props.broadcast.has360Video,isLive:!0,isConjoined:!0,includeEndedLabel:!0}),this.renderRightButtons())}},{key:"renderReplayFooter",value:function(){return m.default.createElement("div",{className:"EmbedFooter"},m.default.createElement("div",{className:"EmbedFooter-dynamic"},m.default.createElement(_.default,{viewers:this.props.viewers,is360:this.props.broadcast.has360Video,isConjoined:!0,includeEndedLabel:!0}),m.default.createElement("div",{className:"EmbedFooter-playback"},m.default.createElement(E.default,{player:this.props.player,broadcast:this.props.broadcast}),m.default.createElement(b.default,{videoStartDate:this.props.broadcast.start}))),this.renderRightButtons())}},{key:"render",value:function(){return this.props.player.isLiveMode?this.renderLiveFooter():this.renderReplayFooter()}}]),t}(m.default.Component);I.propTypes={broadcast:y.broadcastPropType.isRequired,viewers:m.default.PropTypes.number.isRequired,player:v.playerPropType.isRequired},t.default=I},1326:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),s=n(r),i=a(5),o=n(i),l=a(1),u=n(l),d=a(2),c=n(d),p=a(7),f=n(p),h=a(6),m=n(h),y=a(0),v=n(y),g=a(15),b=a(527),T=n(b),E=a(34),P=a(20),_=a(1248),M=n(_),C=a(1253),k=n(C),S=a(1196),w=n(S),R=a(1251),I=n(R),N=a(1230),A=n(N),O=a(1328),D=n(O),L=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"getBroadcastUrl",value:function(){var e=this.props,t=e.broadcast,a=e.user,n=e.periscopeResources;return t?a?n.HOST_DOMAIN+"/"+a.username+"/"+t.id:n.HOST_DOMAIN+"/w/"+t.id:"#"}},{key:"render",value:function(){return v.default.createElement(k.default,(0,s.default)({baseClass:"EmbedInterstitial"},this.props),v.default.createElement(M.default,{dispatch:this.props.dispatch,broadcast:this.props.broadcast,player:this.props.player,width:this.props.width,height:this.props.height,shouldBlur:!1}),v.default.createElement(I.default,{player:this.props.player}),v.default.createElement(A.default,{broadcast:this.props.broadcast}),v.default.createElement(w.default,{viewers:this.props.viewers,isLive:this.props.player.isLiveMode,is360:this.props.broadcast&&this.props.broadcast.has360Video,isHidden:this.props.player.isUnknownMode,isConjoined:!0,includeEndedLabel:!0}),v.default.createElement(D.default,{player:this.props.player,url:this.getBroadcastUrl()}))}}]),t}(v.default.Component);L.propTypes={broadcast:E.broadcastPropType,user:P.userPropType,viewers:v.default.PropTypes.number,player:v.default.PropTypes.object,width:v.default.PropTypes.number,height:v.default.PropTypes.number,dispatch:v.default.PropTypes.func.isRequired,periscopeResources:b.periscopeResourcesPropType.isRequired},t.default=(0,g.connect)(T.default)(L)},1327:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(16),g=n(v),b=a(34),T=a(123),E=a(1215),P=a(175),_=a(1373),M=a(1251),C=n(M),k=a(1285),S=n(k),w=a(1230),R=n(w),I=a(1325),N=n(I),A=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.clickHandler=a.clickHandler.bind(a),a.disableOnClick=a.disableOnClick.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"disableOnClick",value:function(){var e=this.props.player;e.isLiveMode?this.props.dispatchAudioOff():this.props.dispatchPauseVideo()}},{key:"clickHandler",value:function(){g.default.isDevice()?this.clickHandlerDevice():this.disableOnClick()}},{key:"togglePlayback",value:function(){var e=this.props.player;e.isExpectingVideo?this.props.dispatchPauseVideo():this.props.dispatchPlayVideo()}},{key:"toggleAudio",value:function(){var e=this.props.player;e.muted?this.props.dispatchAudioOn():this.props.dispatchAudioOff()}},{key:"clickHandlerDevice",value:function(){var e=this.props.player;return e.isReplayMode?void this.togglePlayback():void(g.default.hasInlineVideo()&&g.default.hasAudioControl()?this.toggleAudio():this.togglePlayback())}},{key:"allowVideoInteractivity",value:function(){return this.props.broadcast&&this.props.broadcast.has360Video}},{key:"possiblyRenderPeriscopeClickthrough",value:function(){if(!this.allowVideoInteractivity())return m.default.createElement(S.default,{broadcast:this.props.broadcast,player:this.props.player,onClick:this.clickHandler})}},{key:"render",value:function(){var e=["EmbedOverlay"];return g.default.isDevice()&&e.push("EmbedOverlay--isForced"),this.allowVideoInteractivity()&&e.push("EmbedOverlay--withInteractivity"),m.default.createElement("div",{className:e.join(" ")},m.default.createElement("div",{className:"EmbedOverlay-alpha"}),m.default.createElement(C.default,{player:this.props.player}),this.possiblyRenderPeriscopeClickthrough(),m.default.createElement(R.default,{broadcast:this.props.broadcast,twitterEvent:this.props.twitterEvent,onClick:this.clickHandler}),m.default.createElement(N.default,this.props))}}]),t}(m.default.Component);A.defaultProps={dispatch:function(){},dispatchAudioOff:function(){},dispatchAudioOn:function(){},dispatchPauseVideo:function(){},dispatchPlayVideo:function(){}},A.propTypes={broadcast:b.broadcastPropType,twitterEvent:E.twitterEventPropType,player:T.playerPropType.isRequired,viewers:m.default.PropTypes.number.isRequired,dispatch:m.default.PropTypes.func.isRequired,dispatchAudioOff:m.default.PropTypes.func,dispatchAudioOn:m.default.PropTypes.func,dispatchPauseVideo:m.default.PropTypes.func,dispatchPlayVideo:m.default.PropTypes.func},t.default=(0,y.connect)(_.twitterEventMapper,P.videoPlayerDispatchMapper)(A)},1328:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(175),g=a(1181),b=n(g),T=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.onClickHandler=a.onClickHandler.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"onClickHandler",value:function(e){e.preventDefault(),b.default.playbackRequest({playAction:this.props.dispatchManualPlayStart})}},{key:"render",value:function(){var e=["EmbedPlayButton"];return this.props.player.isStopped&&!this.props.player.isUnknownMode||e.push("EmbedPlayButton--hidden"),this.props.player.isLiveMode&&e.push("EmbedPlayButton--isLive"),this.props.player.isReplayMode&&e.push("EmbedPlayButton--isReplay"),m.default.createElement("a",{className:e.join(" "),href:this.props.url,onClick:this.onClickHandler},m.default.createElement("div",{className:"EmbedPlayButton-liveButton"}),m.default.createElement("div",{className:"EmbedPlayButton-replayButton"}))}}]),t}(m.default.Component);T.propTypes={dispatchManualPlayStart:m.default.PropTypes.func.isRequired,player:m.default.PropTypes.object,url:m.default.PropTypes.string.isRequired},t.default=(0,y.connect)(void 0,v.videoPlayerDispatchMapper)(T)},1329:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(48),s=n(r),i=a(4),o=n(i),l=a(5),u=n(l),d=a(1),c=n(d),p=a(2),f=n(p),h=a(7),m=n(h),y=a(6),v=n(y),g=a(0),b=n(g),T=a(186),E=a(1192),P=20,_=200,M=function(e){var t=-1*e;return{top:t}},C=function(e){var t=(0,T.spring)(-1*(e+P));return{top:t}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stiffness:190,damping:19},t=(0,T.spring)(-1*P,e);return{top:t}},S=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.drawerRef=null,a.drawerHeight=_,a.renderInterpolatedStyles=a.renderInterpolatedStyles.bind(a),a}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentDidUpdate",value:function(){if(this.drawerRef){var e=this.drawerRef.getBoundingClientRect();this.drawerHeight=e.height}}},{key:"handleDismiss",value:function(e){var t=this;return function(){return t.props.dispatchHideDrawer(e)}}},{key:"getVisibleStyles",value:function(){var e=this.props.drawer;return e.visible?[{key:"drawer",style:k(e.options.springConfig)}]:[]}},{key:"possiblyRenderChild",value:function(){return this.props.drawer.component?b.default.createElement(this.props.drawer.component,(0,o.default)({},this.props.drawer.componentProps,{dismiss:this.handleDismiss("drawer-content"),dispatch:this.props.dispatch,isVisible:this.props.drawer.visible})):null}},{key:"renderInterpolatedStyles",value:function(e){var t=this,a=(0,s.default)(e,1),n=a[0];return n?b.default.createElement("div",{className:"GlobalDrawer",ref:function(e){t.drawerRef=e},style:{top:Math.round(n.style.top)+"px"}},b.default.createElement("div",{className:"GlobalDrawer-content"},this.possiblyRenderChild()),b.default.createElement("img",{className:"GlobalDrawer-close",src:"/v/images/icon_close.svg",onClick:this.props.dispatchHideDrawer})):null}},{key:"render",value:function(){var e=this;return b.default.createElement(T.TransitionMotion,{styles:this.getVisibleStyles(),willEnter:function(){return M(e.drawerHeight)},willLeave:function(){return C(e.drawerHeight)}},this.renderInterpolatedStyles)}}]),t}(b.default.Component);S.propTypes={dispatch:b.default.PropTypes.func,dispatchHideDrawer:b.default.PropTypes.func,drawer:E.drawerPropType.isRequired},t.default=S},1330:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=Y[e];return t?T.default.resolve(t):new T.default(function(t){C.default.get("/assets/resources/svg/"+e+".svg").end(function(a,n){return!a&&n.type.indexOf("svg")>=0&&n.text&&n.text.indexOf("<svg")>=0?(Y[e]=n.text,t(Y[e])):t(q)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.HeartsClass=void 0;var s=a(25),i=n(s),o=a(4),l=n(o),u=a(5),d=n(u),c=a(1),p=n(c),f=a(2),h=n(f),m=a(7),y=n(m),v=a(6),g=n(v),b=a(17),T=n(b),E=a(0),P=n(E),_=a(15),M=a(298),C=n(M),k=a(1385),S=n(k),w=a(176),R=a(505),I=a(270),N=a(9),A=a(34),O=a(269),D=n(O),L=a(481),H=a(67),B=n(H),U=a(178),V=void 0,F="FeedbackItem",W=6,j=90,x={HEART:"heart",SCREENSHOT:"screenshot"},q=a(1296)(),G=a(1297)(),Y={heart:q,screenshot:G},K=100,z=2,J=function(e){function t(e){(0,p.default)(this,t);var a=(0,y.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.state={hearts:[],userHearts:[]},a}return(0,g.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.setupHearts(this.props),this.currentHeartIntervalCount=0,this.maxHeartIntervalID=setInterval(function(){e.currentHeartIntervalCount=0},K),this.heartsSub=w.eventManager.subscribe(I.CHAT_HEARTS,function(t){e.setState({hearts:t})}),this.userHeartsSub=w.eventManager.subscribe(I.CHAT_USER_HEARTS,function(t){e.setState({userHearts:t})})}},{key:"componentWillReceiveProps",value:function(e){this.setupHearts(e)}},{key:"componentWillUnmount",value:function(){clearInterval(this.maxHeartIntervalID),this.heartsSub.remove(),this.userHeartsSub.remove()}},{key:"shouldComponentUpdate",value:function(e){return!e.tabHidden}},{key:"setupHearts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.broadcast;t&&t.heart_theme&&t.heart_theme.forEach(function(e){Y[e]||r(e)})}},{key:"getBroadcastThemes",value:function(){var e=this.props.broadcast.heart_theme||[];return e}},{key:"getRandomValueForRange",value:function(e,t){return Math.floor(Math.random()*(t-e))+e}},{key:"getHeartTheme",value:function(){if(this.shouldUseHeartTheme()){var e=this.getBroadcastThemes(),t=this.getRandomValueForRange(0,e.length);return e[t]||x.HEART}return x.HEART}},{key:"shouldUseHeartTheme",value:function(){var e=this.getBroadcastThemes();if(!e||0===e.length)return!1;var t=this.getRandomValueForRange(1,W+1);return t===W}},{key:"generateElement",value:function(e){var t=e.svg,a=e.eggmojiOverride,n=document.createDocumentFragment(),r=document.createElement("body"),s=void 0;for(a?r.innerHTML="<span>"+a+"</span>":t?r.innerHTML=t:r.innerHTML="<span></span>";s=r.firstChild;)n.appendChild(s);return n}},{
key:"getParticipantColorName",value:function(e){return e.userHeart&&!this.props.isLive?L.REPLAY_COLOR_NAME:(0,N.getParticipantColorName)(e.participant_index)}},{key:"getFeedbackTypeForItem",value:function(e){switch(e.type){case D.default.SCREENSHOT:return x.SCREENSHOT;case D.default.HEART:return this.getHeartTheme();default:return}}},{key:"getIdForItem",value:function(e){return"item-"+e.uuid}},{key:"getHeartContainerElement",value:function(e){this.currentHeartIntervalCount++;var t=this.getIdForItem(e);if(!document.getElementById(t)){var a={emojiOverride:e.eggmojiOverride};return e.eggmojiOverride||e.isSparkled||(a.svg=Y[this.getFeedbackTypeForItem(e)]),this.generateElement(a)}}},{key:"getHeartContainerWithHeart",value:function(e){var t="u-participant"+this.getParticipantColorName(e),a=this.getHeartContainerElement(e);if(a){var n=a.querySelector("svg")||a.querySelector("span"),r=parseInt(n.getAttribute("width"),10)||170,s="number"==typeof this.props.width?this.props.width:j,i=(s-r)/2,o=[F,F+"--"+this.getFeedbackTypeForItem(e),t];if(e.userHeart&&(o.push(F+"--userHeart"),e.eggmojiOverride&&o.push("isEggmoji")),n.setAttribute("class",o.join(" ")),n.setAttribute("id",this.getIdForItem(e)),e.isSparkled){var l=170;n.setAttribute("style","\n        right: "+i+"px;\n        top: -120px;\n        width: "+l+"px;\n        height: "+l+"px;\n        display: block;\n      ")}else n.setAttribute("style","right: "+i+"px");return a}}},{key:"setupAnimation",value:function(e){var t=this.getIdForItem(e);if(e.isSparkled){var a=(0,N.getParticipantColor)(e.participant_index).replace("rgb(","").replace(")","").split(", ").map(function(e){return e/255}),n=(0,l.default)({},(0,R.getSparkle)(e.sparkle_id));n.layers[27].shapes[0].it[2].c.k=[].concat((0,i.default)(a),[1]);var r={container:document.getElementById(t),name:t,renderer:"canvas",loop:!0,autoplay:!0,animationData:n},s=V.loadAnimation(r);this.animateEl(t,s)}else this.animateEl(t)}},{key:"addHeart",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(n&&!e.userHeart&&this.currentHeartIntervalCount>=z)){if(e.isSparkled&&!V)return void a.e(159).then(function(r){V=a(1394),t.addHeart(e,n)}.bind(null,a)).catch(a.oe);var r=this.getHeartContainerWithHeart(e);r&&(this.refs.heartsContainer.appendChild(r),this.setupAnimation(e))}}},{key:"appendHearts",value:function(){var e=this;(this.state.hearts.length||this.state.userHearts.length)&&((0,S.default)(this.state.hearts,"uuid").forEach(function(t){return e.addHeart(t)}),(0,S.default)(this.state.userHearts,"uuid").forEach(function(t){return e.addHeart(t,!1)}))}},{key:"removeHeart",value:function(e){var t=document.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"flushHearts",value:function(){for(var e=this.refs.heartsContainer;e.firstChild;)e.removeChild(e.firstChild)}},{key:"animateEl",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="thru",r=1.5,s=.5,i=80,o=100,l=5,u=this.props.dimensions.height,d=.25,c=100,p=3,f=0,h=.3,m=.6,y=document.getElementsByClassName(F).length,v=y*l+u*d;v=Math.min(v,u),v+=Math.random()*c;var g=Math.random()*s-s/2,b=-(v/2),T=i/2-Math.random()*i,E=-v,P=o/2-Math.random()*o,_="#"+e;TweenLite.to(_,h,{scaleY:m,scaleX:m,ease:Back.easeOut}),TweenLite.to(_,p,{opacity:f,rotation:g+"rad",ease:Linear.easeNone,bezier:{type:n,curviness:r,autoRotate:!1,values:[{x:T,y:b},{x:P,y:E}]},onComplete:function(){a&&a.destroy(),t.removeHeart(e)}})}},{key:"componentDidUpdate",value:function(){this.appendHearts()}},{key:"render",value:function(){return P.default.createElement("ul",{className:"Hearts",ref:"heartsContainer",id:"heartsContainer"})}}]),t}(P.default.Component);J.defaultProps={dimensions:{height:0,width:0}},J.propTypes={dimensions:P.default.PropTypes.object,broadcast:A.broadcastPropType,isLive:P.default.PropTypes.bool,tabHidden:P.default.PropTypes.bool,width:P.default.PropTypes.number};t.HeartsClass=J;t.default=(0,_.connect)((0,B.default)(["dimensions","tabHidden"]))((0,U.purify)(J))},1331:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(3),v=a(1348),g=n(v),b=a(274),T=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"possiblyRenderIcon",value:function(){return this.props.withIcon?m.default.createElement("div",{className:"LoginSignupButton-AvatarImage"},m.default.createElement(g.default,{white:!0})):null}},{key:"renderJoinedButton",value:function(){return this.props.onlyIcon?null:m.default.createElement("div",{className:"LoginSignupButton-SignInText"},m.default.createElement(y.FormattedMessage,b.login),m.default.createElement("span",{className:"LoginSignupButton-separator"},"|"),m.default.createElement(y.FormattedMessage,b.signup))}},{key:"render",value:function(){var e=this;return m.default.createElement("a",{href:"#",className:"LoginSignupButton-SignInButton "+(this.props.buttonClass||""),onClick:function(t){return e.props.onClick(t)}},this.possiblyRenderIcon(),this.renderJoinedButton())}}]),t}(m.default.Component);T.propTypes={buttonClass:m.default.PropTypes.string,withIcon:m.default.PropTypes.bool,onlyIcon:m.default.PropTypes.bool,onClick:m.default.PropTypes.func},t.default=T},1332:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),s=n(r),i=a(25),o=n(i),l=a(5),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(1),m=n(h),y=a(2),v=n(y),g=a(0),b=n(g),T=a(15),E=a(466),P=n(E),_=a(176),M=a(270),C=a(1290),k=n(C),S=a(67),w=n(S),R=a(1179),I=n(R),N=a(465),A=a(34),O=a(269),D=n(O),L=a(178),H=a(21),B=15,U=4500,V=1e3,F=7e3,W=1e3,j=500,x=3e3,q=400,G=function(){function e(){(0,m.default)(this,e),this.isDelayed=!1,this.mouseEnter=this.mouseEnter.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.mouseMove=(0,P.default)(this.mouseMove.bind(this),200,{maxWait:1e3,leading:!0,trailing:!1})}return(0,v.default)(e,[{key:"setDelay",value:function(e){e||this.clearTimeouts(),this.isDelayed=e}},{key:"mouseEnter",value:function(){this.isDelayed||this.setDelay(Date.now())}},{key:"mouseLeave",value:function(){this.isDelayed&&this.setDelay(!1)}},{key:"mouseMove",value:function(){this.isDelayed&&this.inactivityTimeout()}},{key:"inactivityTimeout",value:function(){var e=this;clearTimeout(this._inactivityTimeout),this._inactivityTimeout=setTimeout(function(){e.setDelay(!1)},x)}},{key:"clearTimeouts",value:function(){clearTimeout(this._inactivityTimeout),clearTimeout(this._maxPauseTimeout)}}]),e}(),Y=function(e){function t(e){(0,m.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.state={forceUpdate:0},a.lastUpdate=null,a.activeMessages=[],a.messagePauser=new G,a.flushQueuedMessages(),a}return(0,f.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){this.eventManagerSubscribe()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.forceUpdateTimeout),this.messagePauser.clearTimeouts(),this.eventManagerUnsubscribe()}},{key:"eventManagerSubscribe",value:function(){var e=this;this.commentSub=_.eventManager.subscribe(M.CHAT_COMMENTS,function(t){e.queuedMessages.comments=e.queuedMessages.comments.concat(t),e.queueForcedUpdate()}),this.userCommentSub=_.eventManager.subscribe(M.CHAT_USER_COMMENTS,function(t){e.queuedMessages.userComments=e.queuedMessages.userComments.concat(t),e.queueForcedUpdate()}),this.systemMessageSub=_.eventManager.subscribe(M.CHAT_SYSTEM_MESSAGES,function(t){e.queuedMessages.systemMessages=e.queuedMessages.systemMessages.concat(t),e.queueForcedUpdate()}),this.joinSub=_.eventManager.subscribe(M.CHAT_JOINS,function(t){e.queuedMessages.joins=e.queuedMessages.joins.concat(t),e.queueForcedUpdate()})}},{key:"eventManagerUnsubscribe",value:function(){this.commentSub.remove(),this.userCommentSub.remove(),this.systemMessageSub.remove(),this.joinSub.remove()}},{key:"componentWillReceiveProps",value:function(e){e.chat.shouldFlush&&this.flush(e)}},{key:"isNextTick",value:function(){var e=this.queuedMessages.userComments.length||this.queuedMessages.systemMessages.length;return e||new Date-this.lastUpdate>=j}},{key:"shouldComponentUpdate",value:function(e){return this.props.tabHidden===e.tabHidden&&!!this.isNextTick()}},{key:"flush",value:function(){this.activeMessages.length=0,this.flushQueuedMessages()}},{key:"flushQueuedMessages",value:function(){this.queuedMessages={queue:[],userComments:[],systemMessages:[],comments:[],joins:[]}}},{key:"isImmediateMessage",value:function(e){switch(e.type){case D.default.USER_CHAT:case D.default.SYSTEM:return!0;default:return!1}}},{key:"queueForcedUpdate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;clearTimeout(this.forceUpdateTimeout),this.forceUpdateTimeout=setTimeout(function(){var t=e.state.forceUpdate;t++,e.setState({forceUpdate:t})},t)}},{key:"getUsersTimelineTime",value:function(){var e=Date.now(),t=this.messagePauser.isDelayed,a=t||e,n=this.props.tabHidden?e:a;return{usersTimelineTime:n,now:e}}},{key:"updateActiveMessages",value:function(){this.lastUpdate=new Date;var e=this.getUsersTimelineTime(),t=e.usersTimelineTime,a=e.now,n=B+this.queuedMessages.userComments.length+this.queuedMessages.systemMessages.length+this.queuedMessages.queue.length,r=[].concat((0,o.default)(this.queuedMessages.queue),(0,o.default)(this.queuedMessages.userComments),(0,o.default)(this.queuedMessages.systemMessages),(0,o.default)(this.queuedMessages.comments),(0,o.default)(this.queuedMessages.joins)).slice(0,n);if(this.messagePauser.isDelayed)return r.length&&this.queueForcedUpdate(200),this.activeMessages;this.flushQueuedMessages();var s=this.props.dimensions,i=s&&s.height||q,l=Math.max(Math.floor((i+50)/100)-2,1);this.activeMessages=this.activeMessages.reduce(function(e,a){return a.exiting&&(t>a.exiting+U||a.exitNow&&t>a.exiting+V)?e:(!a.exiting&&t>a.displayDate+W+F&&(a.exiting=t,a.sticky&&(a.slideOut=!0)),e.push(a),e)},[]);var u=r.findIndex(function(e,t,a){var n=a[t+1];return 0!==t&&e.isJoin&&!!n&&n.isJoin});if(u>=0){var d=r.splice(u,r.length);this.queuedMessages.queue=[].concat((0,o.default)(this.queuedMessages.queue),(0,o.default)(d))}for(var c=r.shift();c;)this.addMessage(c,t,a),c=r.shift();this.activeMessages.slice(0,-1*l).forEach(function(e){e.exiting||(e.exiting=t),e.exitNow=!0}),(r.length||this.activeMessages.length||this.queuedMessages.queue.length)&&this.queueForcedUpdate(200)}},{key:"addMessage",value:function(e,t,a){var n=void 0;for(n=this.activeMessages.length-1;n>=0&&this.activeMessages[n].sticky;n--);var r=this.activeMessages[n];if(e.isJoin&&r&&r.isJoin){var i=r.usernames?[].concat((0,o.default)(r.usernames),[e.username]):[r.username,e.username];this.activeMessages[n]=(0,s.default)({},this.activeMessages[n],{displayDate:a,collapsed:!0,usernames:i,exiting:void 0})}else e.displayDate=a,this.activeMessages.splice(n+1,0,e)}},{key:"renderMessages",value:function(){var e=this;return this.updateActiveMessages(),this.activeMessages.map(function(t){return b.default.createElement(k.default,{key:t.uuid,message:t,isLive:e.props.isLive,broadcast:e.props.broadcast,blocked:e.props.blocked,mutedUsers:e.props.chat.mutedUsers,dispatch:e.props.dispatch})})}},{key:"render",value:function(){var e=["Messages"].concat(this.props.classNames).join(" ");return b.default.createElement("div",{className:e,onMouseEnter:this.messagePauser.mouseEnter,onMouseLeave:this.messagePauser.mouseLeave,onMouseMove:this.messagePauser.mouseMove},b.default.createElement("ul",null,this.renderMessages()))}}]),t}(b.default.Component);Y.propTypes={broadcast:A.broadcastPropType,isLive:b.default.PropTypes.bool,classNames:b.default.PropTypes.array,dispatch:b.default.PropTypes.func,chat:N.chatPropType,dimensions:b.default.PropTypes.object,tabHidden:b.default.PropTypes.bool,blocked:b.default.PropTypes.object},t.default=(0,T.connect)((0,H.compose)(I.default,(0,w.default)(["dimensions","tabHidden","blocked"])))((0,L.purify)(Y))},1334:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),s=n(r),i=a(5),o=n(i),l=a(1),u=n(l),d=a(2),c=n(d),p=a(7),f=n(p),h=a(6),m=n(h),y=a(0),v=n(y),g=a(15),b=a(175),T=a(1265),E=n(T),P=a(1255),_=n(P),M=a(1210),C=n(M),k=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.handleClick=a.handleClick.bind(a),a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"handleClick",value:function(){E.default.togglePlayback(this.props)}},{key:"render",value:function(){var e=["PlaybackControlsOverlay"].concat((0,s.default)(E.default.buildStateClasses(this.props.player)));return v.default.createElement("div",{className:e.join(" ")},v.default.createElement("div",{className:"PlaybackControlsOverlay-cover",onClick:this.handleClick},v.default.createElement("div",{className:"PlaybackControlsOverlay-hud"},v.default.createElement("div",{className:"PlaybackControlsOverlay-icon PlaybackControlsOverlay-pause"},v.default.createElement(_.default,null)),v.default.createElement("div",{className:"PlaybackControlsOverlay-icon PlaybackControlsOverlay-play"},v.default.createElement(C.default,null)))))}}]),t}(v.default.Component);k.propTypes={dispatch:v.default.PropTypes.func.isRequired,dispatchPauseVideo:v.default.PropTypes.func.isRequired,dispatchPlayVideo:v.default.PropTypes.func.isRequired,player:v.default.PropTypes.object.isRequired},t.default=(0,g.connect)(function(){return{}},b.videoPlayerDispatchMapper)(k)},1335:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return i.default.createElement("div",{className:"PlaybackTime"},(0,c.getFormattedTime)(e.replay.elapsed))}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),i=n(s),o=a(15),l=a(21),u=a(1180),d=a(268),c=a(127);r.propTypes={replay:d.replayPropType.isRequired},t.default=(0,o.connect)((0,l.compose)(u.replayFullMapper))(r)},1337:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=[o];return e.player.isStalled&&t.push(l),i.default.createElement("div",{className:t.join(" ")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s=a(0),i=n(s),o="SeekingOverlay",l="SeekingOverlay--isSeeking";r.propTypes={player:i.default.PropTypes.object.isRequired}},1338:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(3),v=a(15),g=a(21),b=a(1180),T=a(1302),E=n(T),P=a(24),_=a(46),M=a(34),C=a(268),k=a(1222),S=n(k),w=a(288),R=n(w),I=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.handleClick=a.handleClick.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.dispatch,a=e.location,n=e.broadcast,r=e.replay,s=this.getShareComponents();t((0,P.trackEvent)("SHARE_BROADCAST_CLICK",{location:a})),t((0,_.openShareOverlay)({shareComponents:s,broadcast:n,videoStartTime:r.elapsed,videoDuration:r.duration}))}},{key:"generateBroadcastTitle",value:function(){return this.props.broadcastTitle?this.props.broadcastTitle:this.props.intl.formatMessage(R.default.title)}},{key:"getShareComponents",value:function(){var e=this.props,t=e.broadcast,a=e.useBroadcastUrl,n=this.generateBroadcastTitle(),r="";t.twitter_username&&""!==t.twitter_username&&(r=".@"+t.twitter_username);var s=a?t.url:t.urlWithUsername;return{text:r,title:n,url:s}}},{key:"render",value:function(){var e=this.props,t=e.intl,a=e.active;return m.default.createElement("a",{href:"#",className:"ShareBroadcastButton",title:t.formatMessage(S.default.button.linkTitle),onClick:this.handleClick},m.default.createElement(E.default,{active:a}))}}]),t}(m.default.Component);I.defaultProps={location:"VideoOverlay",broadcast:null,useBroadcastUrl:!1},I.propTypes={broadcast:M.broadcastPropType,broadcastTitle:m.default.PropTypes.string,dispatch:m.default.PropTypes.func.isRequired,intl:m.default.PropTypes.object.isRequired,location:m.default.PropTypes.string,replay:C.replayPropType.isRequired,useBroadcastUrl:m.default.PropTypes.bool,active:m.default.PropTypes.bool},t.default=(0,v.connect)((0,g.compose)(b.replayFullMapper))((0,y.injectIntl)(I))},1339:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(1245),g=n(v),b=a(297),T=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"renderUserListItems",value:function(){return this.props.users.map(function(e){return m.default.createElement(b.ListViewItem,{key:e.user_id,height:38},m.default.createElement("div",{className:"UserActivityList-item"},m.default.createElement(g.default,{user:e,withDisplayName:!0})))})}},{key:"render",value:function(){var e=["UserActivityList","UserActivityList--"+this.props.users.length+"items"];return m.default.createElement("div",{className:e.join(" ")},m.default.createElement(b.ListView,{aveCellHeight:38,runwayItems:3,runwayItemsOpposite:3},this.renderUserListItems()))}}]),t}(m.default.Component);T.defaultProps={users:[]},T.propTypes={dispatch:m.default.PropTypes.func.isRequired,users:m.default.PropTypes.array},t.default=(0,y.connect)()(T)},1340:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserHeartClass=void 0;var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(1179),g=a(68),b=a(46),T=a(24),E=a(1347),P=n(E),_=a(177),M=n(_),C=a(481),k=a(9),S=700,w=200,R=3e4,I=R/w+1,N={INACTIVE:"INACTIVE",ACTIVE_VIA_CLICK:"ACTIVE_VIA_CLICK",ACTIVE_VIA_KEY:"ACTIVE_VIA_KEY"},A=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.state={currentState:N.INACTIVE,eggmoji:!1},a.heartsFromBlast=0,a.sendHeart=a.sendHeart.bind(a),a.handleClick=a.handleClick.bind(a),a.handleKeyPress=a.handleKeyPress.bind(a),a.handleKeyUp=a.handleKeyUp.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress),window.addEventListener("keyup",this.handleKeyUp,!0)}},{key:"componentWillUnmount",value:function(){this.setState({currentState:N.INACTIVE,eggmoji:!1}),this.clearTimeouts(),window.removeEventListener("keydown",this.handleKeyPress),window.removeEventListener("keyup",this.handleKeyUp,!0)}},{key:"handleClick",value:function(){this.state.currentState===N.ACTIVE_VIA_KEY&&this.handleKeyUp(),this.sendHeart()}},{key:"targetIsInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target;return!!t&&("INPUT"===t.tagName||void 0)}},{key:"keyPressIsValid",value:function(e){return(!this.props.chat||!this.props.chat.paused)&&(e.keyCode===M.default.SPACE_BAR&&(!(this.heartsFromBlast>I)&&(!this.targetIsInput(e)&&!this.props.commentIsFocused)))}},{key:"handleKeyPress",value:function(e){var t=this;this.keyPressIsValid(e)&&this.setState({currentState:N.ACTIVE_VIA_KEY},function(){t.props.isAuthed&&!t.spaceTimer&&(clearTimeout(t.spaceTimer),t.spaceTimer=setTimeout(function(){t.state.currentState===N.ACTIVE_VIA_KEY&&t.blastHearts()},S))})}},{key:"handleKeyUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.clearTimeouts(),this.heartsFromBlast=0,this.setState({currentState:N.INACTIVE}),this.keyPressIsValid(e)&&e.keyCode===M.default.SPACE_BAR&&this.sendHeart()}},{key:"clearTimeouts",value:function(){this.spaceTimer&&(clearTimeout(this.spaceTimer),this.spaceTimer=null),this.eggModeTimer&&(clearTimeout(this.eggModeTimer),this.eggModeTimer=null),clearTimeout(this.heartBlastTimer),clearTimeout(this.blastHeartsTimeout)}},{key:"blastHearts",value:function(){var e=this;return this.props.commentIsFocused||this.props.chat&&this.props.chat.paused||this.heartBlastTimer||this.state.currentState!==N.ACTIVE_VIA_KEY||this.heartsFromBlast>I?this.clearTimeouts():(clearTimeout(this.heartBlastTimer),void(this.heartBlastTimer=setTimeout(function(){e.heartBlastTimer=null,e.props.isLive&&!e.eggModeTimer&&(clearTimeout(e.eggModeTimer),e.eggModeTimer=setTimeout(function(){return e.eggMode()},R)),e.heartsFromBlast++,e.sendHeart(),clearTimeout(e.blastHeartsTimeout),e.blastHeartsTimeout=setTimeout(function(){return e.blastHearts()})},w)))}},{key:"eggMode",value:function(){var e=this.props.chat;return e&&e.paused?this.clearTimeouts():this.state.currentState===N.INACTIVE?this.clearTimeouts():(this.props.dispatch((0,T.trackEvent)("EGGMOJI_MODE"),{color:(0,k.getParticipantColorName)(e.chatSession.participant_index)}),void this.setState({eggmoji:(0,k.getParticipantEggmoji)(e.chatSession.participant_index)}))}},{key:"sendHeart",value:function(){var e=this.props.chat;if(!e||!e.paused){if(!this.props.isAuthed)return void this.props.dispatch((0,b.openSignInModal)({openedFrom:"HEART"}));var t=this.props,a=t.authUser,n=t.dispatch;n((0,g.chatAddNewUserHeart)({authUser:a,eggmojiOverride:this.state.eggmoji}))}}},{key:"getParticipantColorName",value:function(){return this.props.isLive?(0,k.getParticipantColorName)(this.props.chat.chatSession.participant_index):C.REPLAY_COLOR_NAME}},{key:"render",value:function(){var e=this.props.isAuthed,t=["UserHeart"];if(e){var a=this.getParticipantColorName();this.state.currentState!==N.INACTIVE&&t.push("UserHeart--active"),a&&t.push("UserHeart--participant"+a),this.state.eggmoji&&t.push("UserHeart-eggmoji")}else t.push("UserHeart--inactive");return m.default.createElement("div",{className:t.join(" "),onClick:this.handleClick},this.state.eggmoji||m.default.createElement(P.default,null))}}]),t}(m.default.Component);A.propTypes={authUser:m.default.PropTypes.object,chat:v.chatSessionPropType,commentIsFocused:m.default.PropTypes.bool,dispatch:m.default.PropTypes.func.isRequired,isAuthed:m.default.PropTypes.bool,isLive:m.default.PropTypes.bool};t.UserHeartClass=A;t.default=(0,y.connect)(v.chatSessionMapper)(A)},1341:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),s=n(r),i=a(5),o=n(i),l=a(1),u=n(l),d=a(2),c=n(d),p=a(7),f=n(p),h=a(6),m=n(h),y=a(0),v=n(y),g=a(466),b=n(g),T=a(1339),E=n(T),P=a(1245),_=n(P),M=a(1232),C=n(M),k=a(78),S=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.showOverflow=a.showOverflow.bind(a),a.tooltipRef=null,a.userActivityRef=null,a.overflowIsOpen=!1,a.debouncedTooltipResize=(0,b.default)(a.debouncedTooltipResize.bind(a),150),a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"shouldComponentUpdate",value:function(e){return this.getUsers()!==this.getUsers(e)}},{key:"componentDidUpdate",value:function(){this.overflowIsOpen&&this.showOverflow()}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,k.hideTooltip)())}},{key:"showOverflow",value:function(){var e=this,t=this.props.dispatch,a=this.getOverflowUsers();return a.length?(this.addResizeListener(),this.overflowIsOpen=!0,void t((0,k.showTooltip)({component:E.default,target:this.tooltipRef,position:"top",componentProps:{users:a},onClose:function(){e.overflowIsOpen=!1}}))):(this.overflowIsOpen=!1,void t((0,k.hideTooltip)()))}},{key:"addResizeListener",value:function(){this.removeEventListener(),this.overflowIsOpen&&window.addEventListener("resize",this.debouncedTooltipResize,!1)}},{key:"removeEventListener",value:function(){window.removeEventListener("resize",this.debouncedTooltipResize,!1)}},{key:"debouncedTooltipResize",value:function(){this.overflowIsOpen&&this.showOverflow()}},{key:"userHasRequiredInformation",value:function(e){return e&&e.username&&e.display_name&&e.participant_index}},{key:"getUsers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,a=t.following,n=t.roster;return a&&n?n.filter(function(t){return e.userHasRequiredInformation(t)&&a.indexOf(t.user_id)>=0}):[]}},{key:"getOverflowUsers",value:function(){var e=this.getUsers(),t=e.length-Math.floor(this.userActivityRef.clientWidth/34);return t<1?[]:[e[0]].concat((0,s.default)(e.slice(t*-1).reverse()))}},{key:"render",value:function(){var e=this,t=this.getUsers().map(function(e){return v.default.createElement(_.default,{user:e})});return t.length?v.default.createElement("div",{className:"UsersActivity",ref:function(t){e.userActivityRef=t}},v.default.createElement("div",{onClick:this.showOverflow,ref:function(t){e.tooltipRef=t},className:"UsersActivity-overflowContainer"},v.default.createElement("div",{className:"UsersActivity-overflowClickHandler"}),v.default.createElement("div",{className:"UsersActivity-overflow"},v.default.createElement(C.default,{isVertical:!1}))),t):null}}]),t}(v.default.Component);S.defaultProps={roster:[],following:[]},S.propTypes={dispatch:v.default.PropTypes.func.isRequired,following:v.default.PropTypes.arrayOf(v.default.PropTypes.string),roster:v.default.PropTypes.arrayOf(v.default.PropTypes.object)},t.default=S},1342:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(176),v=a(270),g=a(1346),b=n(g),T=a(275),E=a(20),P=a(9),_=3e3,M=200,C=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.handleClick=a.handleClick.bind(a),a.onNewHeart=a.onNewHeart.bind(a),a.isMyHeart=a.isMyHeart.bind(a),a.state={showHeart:!1,isBeating:!1},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.heartsSub=y.eventManager.subscribe(v.CHAT_HEARTS,this.onNewHeart,this.isMyHeart)}},{key:"isMyHeart",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;t<e.length;t++){var a=e[t];if(a.user_id===this.props.user.user_id)return!0}return!1}},{key:"onNewHeart",value:function(){var e=this;this.setState({showHeart:!0,isBeating:!0}),clearTimeout(this.beatTimer),this.beatTimer=setTimeout(function(){return e.setState({isBeating:!1})},M),clearTimeout(this.showHeartTimer),this.showHeartTimer=setTimeout(function(){return e.setState({showHeart:!1})},_)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.beatTimer),clearTimeout(this.showHeartTimer),this.heartsSub.remove(),this.heartsSub=null}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.user!==e.user||this.state.showHeart!==t.showHeart||this.state.isBeating!==t.isBeating}},{key:"handleClick",value:function(){var e=this.props,t=e.dispatch,a=e.user;t((0,T.commentInputSetReply)(a.username))}},{key:"hasUserInformation",value:function(){var e=this.props.user;return e&&e.username&&e.display_name&&e.participant_index}},{key:"render",value:function(){if(!this.hasUserInformation())return null;var e=this.props,t=e.user,a=e.withDisplayName,n=this.state,r=n.showHeart,s=n.isBeating,i=["UsersActivityItem","UsersActivityItem--participant"+(0,P.getParticipantColorName)(t.participant_index)];r&&(i.push("UsersActivityItem--withHeart"),s&&i.push("UsersActivityItem--withBeat"));var o=t.profile_image_url||E.DEFAULT_AVATAR_URL;return m.default.createElement("div",{className:i.join(" "),onClick:this.handleClick,title:"@"+t.username+" – "+t.display_name},m.default.createElement("div",{className:"UsersActivityItem-avatarContainer"},m.default.createElement(b.default,null),m.default.createElement("img",{className:"UsersActivityItem-avatar",src:o})),a?m.default.createElement("div",{className:"UsersActivityItem-displayName"},t.display_name):null)}}]),t}(m.default.Component);C.propTypes={dispatch:m.default.PropTypes.func.isRequired,user:E.userPropType,showHeart:m.default.PropTypes.bool,withDisplayName:m.default.PropTypes.bool},t.default=C},1343:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(11),m=n(h),y=a(0),v=n(y),g=a(15),b=a(35),T=a(477),E=n(T),P=a(488),_=n(P),M=a(16),C=n(M),k=a(34),S=a(20),w=a(461),R=a(268),I=a(1192),N=a(178),A=a(1283),O=n(A),D=a(1307),L=n(D),H=a(1300),B=n(H),U=a(1358),V=n(U),F=a(1359),W=n(F),j=a(1317),x=n(j),q=a(1327),G=n(q),Y=a(1326),K=n(Y),z=a(271),J=a(175),Z=a(1263),Q=a(21),X=a(57),$=(n(X),a(27)),ee=a(26),te=(0,m.default)(E.default).map(function(e){return E.default[e]}),ae=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.locationHasChanged=a.locationHasChanged.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.handleAutoplayQuery(e),this.handleSafari360Drawer(e),this.handleSafari360DrawerDismissal(e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.connectingTimer),this.unlistenRouter&&this.unlistenRouter()}},{key:"locationHasChanged",value:function(e){this.location=e}},{key:"setupRouterListener",value:function(){this.props.router&&(this.unlistenRouter=this.props.router.listen(this.locationHasChanged))}},{key:"getLocation",value:function(){if(!this.location){if(!this.props.router)return{};this.setupRouterListener()}return this.location}},{key:"isAutoplay",value:function(){var e=(0,Q.getUrlQueryParam)({location:this.getLocation(),name:$.AUTOPLAY});return"undefined"!=typeof e}},{key:"broadcastHasChanged",value:function(e){return!this.props.broadcast&&e.broadcast||this.props.broadcast&&e.broadcast&&(e.broadcast.id!==this.props.broadcast.id||e.broadcast.state!==this.props.broadcast.state)}},{key:"handleAutoplayQuery",value:function(e){this.isAutoplay()&&e.player&&e.player.isStoppedInterstitial&&C.default.hasInlineAutoplayVideo()?e.dispatchAutoPlayStart():this.isAutoplay()&&(0,z.removeParamFromURL)(e.dispatch,"autoplay")}},{key:"handleSafari360Drawer",value:function(e){!C.default.has360Support()&&!this.props.player.isExpectingVideo&&e.player.isExpectingVideo&&e.broadcast.has360Video&&e.dispatchShowSafari360Drawer()}},{key:"handleSafari360DrawerDismissal",value:function(e){e.drawer.isSafari360AlertVisible&&e.player.isStopped&&e.dispatchHideDrawer()}},{key:"getVideoUrl",value:function(){return!!this.props.video&&(this.props.broadcast.isRunning?this.props.video.https_hls_url||this.props.video.hls_url:this.props.video.autoUrl)}},{key:"getViewerCount",value:function(){var e=this.props,t=e.broadcast,a=e.n_watching,n=e.n_watched;return t.isRunning?a:n}},{key:"isPlayerFormat",value:function(e){return this.props.playerFormat===e}},{key:"getFillMode",value:function(){switch(this.props.playerFormat){case E.default.EMBED:return _.default.COVER;case E.default.APP:default:return _.default.CONTAIN}}},{key:"canRenderVideo",value:function(){var e=this.props,t=e.player,a=e.playerFormat;if(!t)return!1;var n=!t.isStoppedInterstitial;return C.default.hasInlineAutoplayVideo()||(n=!0),(a!==E.default.APP||!C.default.shouldUseMobileLayout())&&(n&&this.getVideoUrl())}},{key:"possiblyRenderVideo",value:function(){if(this.canRenderVideo()){var e=this.props,t=e.broadcast,a=e.player,n=e.width,r=e.height,s=t?t.width:0,i=t?t.height:0,o=this.getFillMode(),l=this.getVideoUrl(),u=a.dimensions.width||s,d=a.dimensions.height||i,c=this.isPlayerFormat(E.default.EMBED),p=a.isAutoplay&&c;return v.default.createElement("div",null,v.default.createElement(W.default,{disableCapture:this.props.disableCapture,
url:l,video:this.props.video,broadcast:this.props.broadcast,isVideoPreview:p,isReplay:t.isEnded,is360:t.has360Video,fillMode:o,playerWidth:u,playerHeight:d,windowWidth:n,windowHeight:r,dispatch:this.props.dispatch,player:this.props.player,couchmode:this.props.couchmode,playerFormat:this.props.playerFormat,disableStallingRecovery:c,setVideoRef:this.props.setVideoRef,disableBlur:this.props.disableBlur,onBlurCapture:this.props.onBlurCapture}),this.possiblyRenderVideoOverlay())}}},{key:"shouldIncludeVideoOverlay",value:function(){return!!this.props.player.includeVideoUI&&!this.props.player.adPlaylist}},{key:"possiblyRenderVideoOverlay",value:function(){if(!this.shouldIncludeVideoOverlay())return null;var e=this.getViewerCount();switch(this.props.playerFormat){case E.default.EMBED:return v.default.createElement(G.default,{dispatch:this.props.dispatch,broadcast:this.props.broadcast,viewers:e,player:this.props.player});case E.default.APP:default:return v.default.createElement(V.default,{broadcast:this.props.broadcast,viewers:e,user:this.props.user,player:this.props.player,profileIsVisible:this.props.profileIsVisible,toggleProfileSidebar:this.props.toggleProfileSidebar,dispatch:this.props.dispatch,couchmode:this.props.couchmode,nextBroadcastCallback:this.props.nextBroadcastCallback})}}},{key:"renderInterstitial",value:function(){var e=this.getViewerCount();switch(this.props.playerFormat){case E.default.EMBED:return v.default.createElement(K.default,{user:this.props.user,broadcast:this.props.broadcast,viewers:e,player:this.props.player,width:this.props.width,height:this.props.height});case E.default.APP:default:return v.default.createElement(x.default,{broadcast:this.props.broadcast,viewers:e,user:this.props.user,player:this.props.player,replay:this.props.replay,profileIsVisible:this.props.profileIsVisible,width:this.props.width,toggleProfileSidebar:this.props.toggleProfileSidebar,dispatch:this.props.dispatch,broadcastError:this.props.broadcastError})}}},{key:"possibleIncludeChatFunctional",value:function(){return this.shouldIncludeVideoOverlay()?v.default.createElement(O.default,{isPlayback:this.props.player.isPlayback,broadcast:this.props.broadcast,user:this.props.user}):null}},{key:"render",value:function(){return v.default.createElement("div",{className:"VideoPlayer u-fullHeight"},v.default.createElement(L.default,this.props),this.possiblyRenderVideo(),this.renderInterstitial(),v.default.createElement(B.default,null),this.possibleIncludeChatFunctional())}}]),t}(v.default.Component);ae.defaultProps={playerFormat:E.default.APP,disableCapture:!1},ae.propTypes={broadcast:k.broadcastPropType,broadcastError:v.default.PropTypes.object,couchmode:v.default.PropTypes.bool,dispatch:v.default.PropTypes.func.isRequired,dispatchAutoPlayStart:v.default.PropTypes.func.isRequired,dispatchShowSafari360Drawer:v.default.PropTypes.func.isRequired,dispatchHideDrawer:v.default.PropTypes.func.isRequired,drawer:I.drawerPropType.isRequired,playerFormat:v.default.PropTypes.oneOf(te),height:v.default.PropTypes.number,n_watched:v.default.PropTypes.number,n_watching:v.default.PropTypes.number,nextBroadcastCallback:v.default.PropTypes.func,player:v.default.PropTypes.object,profileIsVisible:v.default.PropTypes.bool,replay:R.replayPropType.isRequired,router:v.default.PropTypes.object,toggleProfileSidebar:v.default.PropTypes.func,user:S.userPropType,video:w.videoPropType,width:v.default.PropTypes.number,api:ee.wrappedApiShape.isRequired,disableCapture:v.default.PropTypes.bool,setVideoRef:v.default.PropTypes.func,disableBlur:v.default.PropTypes.bool,onBlurCapture:v.default.PropTypes.func},t.default=(0,g.connect)((0,Q.compose)(Z.drawerStateToProps,J.videoPlayerStateMapper),(0,Q.compose)(Z.drawerDispatchToProps,J.videoPlayerDispatchMapper))((0,b.withRouter)((0,ee.injectApi)((0,N.purify)(ae))))},1344:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),s=n(r),i=function(e){var t=e.onClick,a=e.children;return s.default.createElement("div",{className:"ClickCatcher"},s.default.createElement("div",{className:"ClickCatcher-catcher",onClick:t}),a)};i.defaultProps={onClick:function(){}},i.propTypes={onClick:s.default.PropTypes.func,children:s.default.PropTypes.oneOfType([s.default.PropTypes.element,s.default.PropTypes.arrayOf(s.default.PropTypes.element)])},t.default=i},1345:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){return i.default.createElement("svg",{className:"CaretDisclosure",width:"15px",height:"20px",viewBox:"0 0 15 20"},i.default.createElement("defs",null,i.default.createElement("path",{d:"M1125.07107,1901.51472 C1124.68054,1901.90524 1124.68054,1902.53841 1125.07107,1902.92893 C1125.46159,1903.31946 1126.09476,1903.31946 1126.48528,1902.92893 L1131.59619,1897.81802 C1131.98672,1897.4275 1131.98672,1896.79433 1131.59619,1896.40381 L1126.48528,1891.29289 C1126.09476,1890.90237 1125.46159,1890.90237 1125.07107,1891.29289 C1124.68054,1891.68342 1124.68054,1892.31658 1125.07107,1892.70711 L1129.47487,1897.11091 L1125.07107,1901.51472 Z",id:"path-1"}),i.default.createElement("filter",{x:"-98.4%",y:"-40.9%",width:"296.9%",height:"214.5%",filterUnits:"objectBoundingBox",id:"filter-2"},i.default.createElement("feOffset",{dx:"0",dy:"2",in:"SourceAlpha",result:"shadowOffsetOuter1"}),i.default.createElement("feGaussianBlur",{stdDeviation:"2",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),i.default.createElement("feComposite",{in:"shadowBlurOuter1",in2:"SourceAlpha",operator:"out",result:"shadowBlurOuter1"}),i.default.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0",type:"matrix",in:"shadowBlurOuter1"}))),i.default.createElement("g",{id:"new",stroke:"none",strokeWidth:"1",fill:"none","fill-rule":"evenodd"},i.default.createElement("g",{transform:"translate(-1121.000000, -1889.000000)","fill-rule":"nonzero"},i.default.createElement("g",null,i.default.createElement("use",{fill:"#FFFFFF","fill-rule":"evenodd",xlinkHref:"#path-1"})))))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s=a(0),i=n(s)},1346:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s.default.createElement("div",{className:"HeartIcon"},s.default.createElement("svg",{viewBox:"0 0 59 51"},s.default.createElement("path",{className:"shape",d:"M29.49943,7.65161487 C25.9971398,3.36065766 21.3354001,1.00688573 16.3190991,1.00688573 C8.89269356,1.00688573 1,6.61990304 1,17.0265358 C1,27.7304026 10.4295058,35.2014193 17.3143789,40.6549172 C19.9228554,42.7252266 21.8347501,44.191887 23.3909435,45.3865611 C25.850071,47.2709558 27.083625,48.216596 28.4140848,49.5478371 C28.7025222,49.839333 29.0890053,50 29.49943,50 C29.9087145,50 30.2940576,49.8404806 30.5847751,49.5489847 C32.3439006,47.7885332 33.9411365,46.569759 38.2209533,43.3036279 L41.6628198,40.6721315 C47.3722823,36.3042837 58,28.1733845 58,16.919807 C58,6.57858866 50.116427,1 42.6991419,1 C37.6760006,1 33.0051403,3.35721479 29.49943,7.65161487 Z"}),s.default.createElement("path",{fill:"#ffffff",className:"border",d:"M28.8489053,5.43563138 C25.3562996,1.92109055 20.983681, 0.00688572968 16.3190991,0.00688572968 C7.42056774,0.00688572968 0,6.9226236 0,17.0265358 C0,22.1855834 2.04040306,26.8994736 5.8050462,31.4472774 C8.51671937,34.7230613 11.1601088, 37.0558326 16.6934678,41.4387983 C18.8340729,43.1377656 20.2000846,44.1976641 22.7820008, 46.1797754 C25.8185185,48.5066165 26.5846544,49.1319613 27.7067705,50.2547363 C28.1795143, 50.7325106 28.8219412,51 29.49943,51 C30.174979,51 30.8149096,50.7343422 31.2928267, 50.2551454 C31.3897022,50.1581975 31.4862687,50.0627605 31.5823952,49.9689814 C31.8413936, 49.7163076 32.0991169,49.4737977 32.3655459,49.2321313 C33.5909252, 48.1206415 34.6153918, 47.3131352 38.8276213,44.0985832 L42.2701943,41.4665472 C47.2216019,37.6786259 49.9293458, 35.342457 52.7360007,32.0238757 C56.7562017,27.2704007 59,22.282734 59,16.919807 C59, 6.87456591 51.5862887,0 42.6991419,0 C37.7334993,0 33.0959278,2.16670511 29.499546, 6.12003291 C29.4876099,6.1038208 29.3420814,5.93190494 28.8489053,5.43563138 Z M28.7247217,8.28393371 L29.4993625,9.2330129 L30.2740843, 8.28399976 C33.5968976,4.21364357 37.9880426,2 42.6991419,2 C50.5140427,2 57,8.01428071 57,16.919807 C57,21.7505742 54.9485974,26.3105708 51.208916,30.7323601 C48.5231058, 33.908055 45.8965364,36.1741887 41.0552127,39.8778937 L37.6135788,42.5092122 C33.3470424, 45.7652079 32.307475,46.584617 31.0218502,47.7507529 C30.7374152,48.0087518 30.4620483, 48.2678638 30.1857688,48.5373967 C30.0835118,48.6371567 29.9809075,48.7385608 29.877402, 48.8421444 C29.7739718,48.9458508 29.6435344,49 29.49943,49 C29.3554589,49 29.2251022, 48.945723 29.124911,48.8444694 C27.9147064,47.6335365 27.1074652,46.9746403 23.9991846, 44.5928088 C21.4258429,42.6172797 20.0670532,41.5629847 17.9360533,39.8716415 C12.5104884,35.5740588 9.93892334,33.304672 7.34567784,30.1719523 C3.85559722,25.9558284 2,21.6688903 2,17.0265358 C2,8.05990959 8.49487798,2.00688573 16.3190991,2.00688573 C21.0231751,2.00688573 25.4052305,4.21693921 28.7247217,8.28393371 L28.7247217, 8.28393371 Z"})))};var r=a(0),s=n(r)},1347:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s.default.createElement("div",{className:"OutlineHeart"},s.default.createElement("svg",{viewBox:"0 0 59 51"},s.default.createElement("path",{strokeDasharray:"1,3",className:"shape",strokeLinejoin:"round",d:"M29.49943,7.65161487 C25.9971398,3.36065766 21.3354001,1.00688573 16.3190991, 1.00688573 C8.89269356,1.00688573 1,6.61990304 1,17.0265358 C1,27.7304026 10.4295058, 35.2014193 17.3143789,40.6549172 C19.9228554,42.7252266 21.8347501, 44.191887 23.3909435,45.3865611 C25.850071,47.2709558 27.083625,48.216596 28.4140848, 49.5478371 C28.7025222,49.839333 29.0890053,50 29.49943,50 C29.9087145,50 30.2940576, 49.8404806 30.5847751,49.5489847 C32.3439006,47.7885332 33.9411365,46.569759 38.2209533, 43.3036279 L41.6628198,40.6721315 C47.3722823,36.3042837 58,28.1733845 58,16.919807 C58, 6.57858866 50.116427,1 42.6991419,1 C37.6760006,1 33.0051403,3.35721479 29.49943, 7.65161487 Z"}),s.default.createElement("path",{className:"fill",d:"M29.49943,7.65161487 C25.9971398,3.36065766 21.3354001,1.00688573 16.3190991, 1.00688573 C8.89269356,1.00688573 1,6.61990304 1,17.0265358 C1,27.7304026 10.4295058, 35.2014193 17.3143789,40.6549172 C19.9228554,42.7252266 21.8347501, 44.191887 23.3909435,45.3865611 C25.850071,47.2709558 27.083625,48.216596 28.4140848, 49.5478371 C28.7025222,49.839333 29.0890053,50 29.49943,50 C29.9087145,50 30.2940576, 49.8404806 30.5847751,49.5489847 C32.3439006,47.7885332 33.9411365,46.569759 38.2209533, 43.3036279 L41.6628198,40.6721315 C47.3722823,36.3042837 58,28.1733845 58,16.919807 C58, 6.57858866 50.116427,1 42.6991419,1 C37.6760006,1 33.0051403,3.35721479 29.49943, 7.65161487 Z"})))};var r=a(0),s=n(r)},1348:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=["ProfileIcon"];return e.white&&t.push("ProfileIcon--white"),i.default.createElement("div",{className:t.join(" ")},i.default.createElement("svg",{viewBox:"6 7 61 61"},i.default.createElement("path",{d:"M25.5,38.9v1.7C25.5,46.9,30.6,52,37,52c6.4,0,11.5-5.1,11.5-11.5v-1.7c1.2-0.4,2-1.5,2-2.8s-0.8-2.4-2-2.8 v-1.7C48.5,25.2,43.3,20,37,20c-6.4,0-11.5,5.1-11.5,11.5v1.7c-1.2,0.4-2,1.5-2,2.8S24.3,38.5,25.5,38.9z"}),i.default.createElement("path",{d:"M36.5,7c-16.6,0-30,13.4-30,30s13.4,30,30,30s30-13.4,30-30S53.1,7,36.5,7z M56.2,57c-0.9-2.3-2.2-4.5-3.9-6.4 c-0.4-0.4-0.9-0.7-1.5-0.6c-0.6,0-1.1,0.2-1.5,0.7C46.1,54,41.7,56,37,56c-4.5,0-8.7-1.8-11.8-5c-0.4-0.4-0.9-0.6-1.5-0.6 c-0.6,0-1.1,0.3-1.5,0.7c-1.8,2.1-3.1,4.6-3.9,7.2c-6-5.1-9.8-12.8-9.8-21.3c0-15.5,12.5-28,28-28s28,12.5,28,28 C64.5,44.8,61.3,51.9,56.2,57z"})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s=a(0),i=n(s);r.propTypes={white:i.default.PropTypes.bool}},1350:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(508),v=n(y),g=a(57),b=n(g),T=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.messageClasses=["JoinMessage","Join-participant"+e.participantColor],b.default.isEnabled("BroadcastRedesign")&&a.messageClasses.push("JoinMessageRedesign"),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"shouldComponentUpdate",value:function(e){return!!e.collapsed}},{key:"componentWillReceiveProps",value:function(e){e.collapsed&&!this.props.collapsed&&(this.messageClasses=this.messageClasses.filter(function(t){return t!=="Join-participant"+e.participantColor}),this.messageClasses.push("Join-participantDefault"))}},{key:"render",value:function(){var e=this.props.message,t=e.usernames?e.usernames[e.usernames.length-1]:e.username;return t?m.default.createElement("li",{className:this.messageClasses.join(" "),onClick:this.props.messageClick},m.default.createElement("div",{className:"JoinMessage-message"},m.default.createElement("strong",null,"@",t)," ",m.default.createElement(v.default,{message:e,withLeadingIcon:!0})," joined")):null}}]),t}(m.default.Component);t.default=T,T.propTypes={collapsed:m.default.PropTypes.bool.isRequired,messageClick:m.default.PropTypes.func.isRequired,participantColor:m.default.PropTypes.string,message:m.default.PropTypes.object},T.defaultProps={collapsed:!1,message:{}}},1351:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(3),g=a(463),b=n(g),T=a(34),E=a(46),P=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.openInApp=a.openInApp.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"openInApp",value:function(){this.props.dispatch((0,E.openAppLinkModal)({broadcast:this.props.broadcast}))}},{key:"render",value:function(){return m.default.createElement("li",{className:"OpenInAppMessage",onClick:this.openInApp},m.default.createElement("img",{className:"OpenInAppMessage-logo",src:"/v/images/largepin.svg"}),m.default.createElement("div",{className:"OpenInAppMessage-message"},m.default.createElement(v.FormattedMessage,b.default.open)))}}]),t}(m.default.Component);P.propTypes={broadcast:T.broadcastPropType,intl:v.intlShape,dispatch:m.default.PropTypes.func},t.default=(0,y.connect)()((0,v.injectIntl)(P))},1352:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),s=n(r),i=a(5),o=n(i),l=a(1),u=n(l),d=a(2),c=n(d),p=a(7),f=n(p),h=a(6),m=n(h),y=a(0),v=n(y),g=a(3),b=a(269),T=n(b),E=a(278),P=n(E),_=a(1351),M=n(_),C=a(1216),k=a(1262),S=n(k),w=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.displayDate=a.props.message.displayDate,a.messageClasses=["SystemMessage"],a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"renderSystemMessageType",value:function(){var e=this.props.message;switch(e.systemMessageType){case P.default.MUTE:return this.renderMute();case P.default.COMMENT_REPORTED:return this.renderCommentReported();default:return null}}},{key:"renderMute",value:function(){var e=this.props.message,t=e.data?e.data.username:"";return v.default.createElement("span",{className:"SystemMessage-message"},v.default.createElement(g.FormattedMessage,(0,s.default)({},S.default.userMuted,{values:{username:v.default.createElement("strong",null,"@",t)}})))}},{key:"renderCommentReported",value:function(){var e=this.props.message,t=e.data?e.data.username:"";return v.default.createElement("span",{className:"SystemMessage-message"},v.default.createElement(g.FormattedMessage,(0,s.default)({},S.default.commentReported,{values:{username:v.default.createElement("strong",null,"@",t)}})))}},{key:"renderSentence",value:function(){return v.default.createElement("span",{className:"SystemMessage-message"},(0,C.getModerationPrompt)(this.props.message,this.props.intl))}},{key:"renderMessage",value:function(){var e=this.props.message;switch(e.type){case T.default.SYSTEM:return this.renderSystemMessageType();case T.default.SENTENCE:return this.renderSentence();default:return null}}},{key:"renderOpenInApp",value:function(){return v.default.createElement(M.default,{broadcast:this.props.message.broadcast})}},{key:"renderPressHoldSeek",value:function(){return v.default.createElement("span",{className:"SystemMessage-message"},v.default.createElement(g.FormattedMessage,(0,s.default)({},S.default.pressHoldSeek,{values:{pressAndHold:v.default.createElement("strong",null,v.default.createElement(g.FormattedMessage,S.default.pressAndHold))}})))}},{key:"render",value:function(){var e=this.props.message;switch(e.systemMessageType){case P.default.OPEN_IN_APP:return this.renderOpenInApp();case P.default.PRESS_HOLD_SEEK:return this.renderPressHoldSeek();default:return v.default.createElement("li",{key:this.props.message.uuid,className:this.messageClasses.join(" ")},v.default.createElement("div",{className:"SystemMessage-message"},this.renderMessage()))}}}]),t}(v.default.Component);w.propTypes={message:v.default.PropTypes.object.isRequired,intl:g.intlShape.isRequired},t.default=(0,g.injectIntl)(w)},1353:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){return i.default.createElement("div",{className:"AnalyticsCalloutTooltip",style:{background:"white",padding:"24px 21px",borderRadius:8,margin:"0 10px"}},i.default.createElement("div",{style:{display:"flex",flexDirection:"column"}},i.default.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start",fontSize:16,color:"rgb(63, 77, 81)"}},i.default.createElement(o.FormattedMessage,f.default.myStats),i.default.createElement(u.default,{style:{marginLeft:13}})),i.default.createElement("div",{style:{width:165,margin:"11px 0 0 0",fontSize:14,lineHeight:"20px",fontFamily:'"museo_sans300", sans-serif',color:"rgb(63, 77, 81)"}},i.default.createElement(o.FormattedMessage,c.default.analytics))))}Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsCalloutTooltipClass=void 0;var s=a(0),i=n(s),o=a(3),l=a(1231),u=n(l),d=a(1223),c=n(d),p=a(1197),f=n(p);r.propTypes={dismiss:i.default.PropTypes.func.isRequired};t.AnalyticsCalloutTooltipClass=r;t.default=r},1354:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileMenuTooltipClass=void 0;var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(3),g=a(35),b=a(1231),T=n(b),E=a(67),P=n(E),_=a(26),M=a(36),C=a(20),k=a(1197),S=n(k),w=a(45),R=a(57),I=n(R),N=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.logout=a.logout.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"logout",value:function(){(0,M.logout)(this.props.api)}},{key:"maybeRenderAccountStatsLink",value:function(){return m.default.createElement("li",null,m.default.createElement(g.Link,{className:"ProfileMenuTooltip-link",to:w.ACCOUNT_STATS_PATH},m.default.createElement(v.FormattedMessage,S.default.myStats),m.default.createElement(T.default,{style:{margin:"0 0 0 9px",verticalAlign:"text-bottom"}})))}},{key:"maybeRenderAccountSettingsLink",value:function(){return I.default.isEnabled("AccountSettings")?m.default.createElement("li",null,m.default.createElement(g.Link,{className:"ProfileMenuTooltip-link",to:w.ACCOUNT_SETTINGS_PATH},m.default.createElement(v.FormattedMessage,S.default.settings))):null}},{key:"maybeRenderProducerLink",value:function(){var e=this.props.hello;return I.default.isEnabled("Producer")&&e.features&&e.features.external_encoders?m.default.createElement("li",null,m.default.createElement(g.Link,{className:"ProfileMenuTooltip-link",to:w.ACCOUNT_PRODUCER_PATH},m.default.createElement(v.FormattedMessage,S.default.producer))):null}},{key:"maybeRenderAccountDeveloper",value:function(){var e=this.props.hello;return e.features&&e.features.public_api_application_admin?m.default.createElement("li",null,m.default.createElement(g.Link,{className:"ProfileMenuTooltip-link",to:w.ACCOUNT_DEVELOPER_PATH},m.default.createElement(v.FormattedMessage,S.default.developer))):null}},{key:"render",value:function(){var e=this.props.user;return m.default.createElement("div",{className:"ProfileMenuTooltip",onClick:this.props.dismiss},m.default.createElement("ul",null,m.default.createElement("li",null,m.default.createElement(g.Link,{className:"ProfileMenuTooltip-link",to:"/"+e.username},m.default.createElement(v.FormattedMessage,S.default.myProfile))),this.maybeRenderAccountStatsLink(),this.maybeRenderAccountDeveloper(),this.maybeRenderAccountSettingsLink(),this.maybeRenderProducerLink(),m.default.createElement("li",null,m.default.createElement("div",{className:"ProfileMenuTooltip-link",onClick:this.logout},m.default.createElement(v.FormattedMessage,S.default.logout)))))}}]),t}(m.default.Component);N.propTypes={dismiss:m.default.PropTypes.func.isRequired,user:C.userPropType,intl:v.intlShape.isRequired,api:_.wrappedApiShape.isRequired,dispatch:m.default.PropTypes.func.isRequired,hello:m.default.PropTypes.object};t.ProfileMenuTooltipClass=N;t.default=(0,y.connect)((0,P.default)(["hello"]))((0,_.injectApi)((0,v.injectIntl)(N)))},1355:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(1286),v=n(y),g=a(470),b=n(g),T=a(1229),E=n(T),P=a(479),_=n(P),M=a(493),C=n(M),k=a(1220),S=n(k),w=a(177),R=n(w),I=a(9),N=a(57),A=n(N),O=a(1190),D=n(O),L=a(1254),H=n(L),B=4e3,U=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.state={classes:["VideoOverlay-container"],showTitle:null},a.toggleTitle=a.toggleTitle.bind(a),a.handleKeyDownListener=a.handleKeyDown.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDownListener)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.playbackAffordanceTimeout),window.removeEventListener("keydown",this.handleKeyDownListener)}},{key:"handleKeyDown",value:function(e){if((0,I.hasKeyboardMetas)(e,{}))switch(e.keyCode){case R.default.I:return this.toggleTitle(e)}}},{key:"toggleTitle",value:function(e){e&&e.preventDefault&&e.preventDefault(),this.setState({showTitle:!this.state.showTitle})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.user,r=t.auth,s=t.broadcast,i=t.profileIsVisible,o=t.toggleProfileSidebar,l=this.state.classes;this.shouldRenderReplayElement()&&(l.indexOf("VideoOverlay-container--forPlayback")===-1&&l.push("VideoOverlay-container--forPlayback"),this.playbackAffordanceTimeout||(l.push("VideoOverlay-container--playbackAffordance"),clearTimeout(this.playbackAffordanceTimeout),this.playbackAffordanceTimeout=setTimeout(function(){l=l.filter(function(e){return"VideoOverlay-container--playbackAffordance"!==e}),e.setState({classes:l})},B)));var u=["u-transition-1"];if(null===s)return m.default.createElement("div",{className:"VideoOverlay"},m.default.createElement("div",{className:l.join(" ")}));var d=!this.shouldRenderReplayElement(),c=["VideoOverlay","VideoOverlay--signIn"];return this.state.showTitle?c.push("VideoOverlay--showTitle"):this.state.showTitle===!1&&c.push("VideoOverlay--hideTitle"),m.default.createElement("div",{className:c.join(" ")},this.renderSeekingOverlay(),this.possiblyIncludePlaybackControlsOverlay(),m.default.createElement("div",{className:l.join(" ")},!A.default.isEnabled("BroadcastRedesign")&&this.renderMessages(),m.default.createElement(E.default,{broadcast:s,isLive:!A.default.isEnabled("BroadcastRedesign")&&d},m.default.createElement("a",{className:"CommentContainer-titleToggle",href:"#",onClick:this.toggleTitle},m.default.createElement(S.default,{isActive:this.props.isActive}))),m.default.createElement("div",{className:"VideoOverlay-broadcastTitleAndLocation"},m.default.createElement(b.default,{dispatch:a,broadcast:s,classNames:u,canReportBroadcast:r.isNotUser(n)}),m.default.createElement(C.default,{className:"BroadcastLocation-container",broadcast:s})),m.default.createElement("div",{className:"VideoOverlay-footer"},n?m.default.createElement(_.default,{ref:"username",user:n,isLink:!0,withAvatar:!0,includeUsername:!1,profileIsVisible:i,toggleProfileSidebar:o}):null,this.renderShareBroadcastButton(),this.renderMuteButton(),this.possiblyIncludePlaybackControls(),this.possiblyIncludeVideoSeeker(),this.possiblyIncludeUsersActivity(),this.renderViewerBadge()),m.default.createElement(v.default,{disabled:!0,feature:"BroadcastRedesign"},m.default.createElement("div",{className:"VideoOverlay-Hearts"},this.renderHeartsContainer()))),this.possiblyIncludeNextBroadcastButton())}}]),t}(H.default);U.propTypes=D.default,t.default=U},1356:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(176),v=a(269),g=n(v),b=a(278),T=n(b),E=a(270),P=a(1229),_=n(P),M=a(1335),C=n(M),k=a(495),S=n(k),w=a(1220),R=n(w),I=a(1301),N=n(I),A=a(510),O=n(A),D=a(1190),L=n(D),H=a(1254),B=n(H),U=a(1357),V=n(U),F=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.gesturesRef=null,a.state={isInfoPanelVisible:!0,showPlaybackControls:!1},a.showInfoPanel=function(){a.setState({isInfoPanelVisible:!0})},a.hideInfoPanel=function(){a.setState({isInfoPanelVisible:!1})},a.showPlaybackControls=function(){a.setState({showPlaybackControls:!0})},a.blurFocus=function(){document.activeElement.blur()},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.shouldRenderReplayElement();clearTimeout(this.startupMessagesTimeout),this.startupMessagesTimeout=setTimeout(function(){var a=[{uuid:"OpenInAppMessage",type:g.default.SYSTEM,systemMessageType:T.default.OPEN_IN_APP,sticky:!0,broadcast:e.props.broadcast}];t&&a.push({uuid:"PressHoldSeekMessage",type:g.default.SYSTEM,systemMessageType:T.default.PRESS_HOLD_SEEK}),y.eventManager.publish(E.CHAT_SYSTEM_MESSAGES,a)},1e3),t&&(clearTimeout(this.showPlaybackControlsTimeout),this.showPlaybackControlsTimeout=setTimeout(function(){e.showPlaybackControls()},2e3))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.startupMessagesTimeout),clearTimeout(this.showPlaybackControlsTimeout)}},{key:"renderPlaybackControls",value:function(){return m.default.createElement("div",{className:"VideoOverlayMobile-PlaybackControls"},m.default.createElement(C.default,null),this.possiblyIncludePlaybackControls())}},{key:"renderChat",value:function(e){var t=["VideoOverlayMobile-Viewers"];return this.state.showPlaybackControls&&t.push("VideoOverlayMobile-Viewers--showPlaybackControls"),m.default.createElement("div",{className:"VideoOverlayMobile-Chat"},m.default.createElement("div",{className:"VideoOverlayMobile-Comments"},this.renderMessages(),e&&this.renderSidebarShareAudioButtons()),m.default.createElement("div",{className:"VideoOverlayMobile-ViewersAndHearts"},m.default.createElement("div",{className:"VideoOverlayMobile-Hearts"},this.renderHeartsContainer()),m.default.createElement("div",{className:t.join(" ")},this.renderViewerBadge(),e&&this.renderPlaybackControls())))}},{key:"renderInfo",value:function(e){var t=this.props,a=t.broadcast,n=t.commentInputState;if(e)return null;var r=["VideoOverlayMobile-InfoPanel"],s=this.state.isInfoPanelVisible;return e&&r.push("VideoOverlayMobile-InfoPanel--isReplay"),s&&r.push("VideoOverlayMobile-InfoPanel--isActive"),m.default.createElement("div",{className:r.join(" ")},m.default.createElement("div",{className:"VideoOverlayMobile-Divider"}),m.default.createElement("div",{className:"VideoOverlayMobile-Info"},m.default.createElement("div",{className:"VideoOverlayMobile-UserChat"},m.default.createElement(_.default,{broadcast:a,isLive:!e})),n.isFocused?m.default.createElement("div",{className:"VideoOverlayMobile-UserChat-Close",onClick:this.blurFocus},m.default.createElement(S.default,null)):this.renderSidebarShareAudioButtons()))}},{key:"renderSidebarShareAudioButtons",value:function(){return m.default.createElement("div",{className:"VideoOverlayMobile-Buttons"},m.default.createElement("div",{className:"VideoOverlayMobile-Sidebar",onClick:this.props.toggleProfileSidebar},m.default.createElement(R.default,null)),m.default.createElement("div",{className:"VideoOverlayMobile-Share"},this.renderShareBroadcastButton()),m.default.createElement("div",{className:"VideoOverlayMobile-Audio"},this.renderMuteButton()))}},{key:"render",value:function(){var e=this,t=this.state.isInfoPanelVisible,a=this.shouldRenderReplayElement(),n=["VideoOverlayMobile"];return a&&n.push("VideoOverlayMobile--isReplay"),t&&n.push("VideoOverlayMobile--isActiveInfoPanel"),m.default.createElement("div",{className:"VideoOverlay-container VideoOverlay-container--isMobile"},a&&m.default.createElement(V.default,{gesturesRef:this.gesturesRef,broadcast:this.props.broadcast}),m.default.createElement(O.default,{gesturesRef:this.gesturesRef,onSwipeUp:this.showInfoPanel,onSwipeDown:this.hideInfoPanel}),this.renderSeekingOverlay(),m.default.createElement("div",{ref:function(t){e.gesturesRef=t}},m.default.createElement(N.default,null,m.default.createElement("div",{className:n.join(" ")},this.renderChat(a),this.renderInfo(a)))))}}]),t}(B.default);F.propTypes=L.default,t.default=F},1357:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(15),v=a(1180),g=a(67),b=n(g),T=a(489),E=n(T),P=a(175),_=a(34),M=a(123),C=a(268),k=a(476),S=a(509),w=n(S),R=a(21),I=a(491),N=n(I),A=a(127),O=a(9),D=a(514),L=[D.PAN_START,D.PAN_END,D.PAN_UP,D.PAN_DOWN,D.PAN_LEFT,D.PAN_RIGHT].join(" "),H=[D.PRESS,D.PRESS_UP].join(" "),B="PanSeekOverlay",U=250,V=.5,F=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.elementRef=null,a.gestureHandler=null,a.isPanning=!1,a.state={isSeeking:!1,seekTimes:{seconds:0}},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillUpdate",value:function(e,t){var a=e.replay,n=e.player,r=t.isSeeking,s=t.seekTimes;r&&n.isExpectingVideo&&this.props.dispatchPauseVideo(),!this.state.isSeeking||r||n.isExpectingVideo||(Math.abs(s.seconds-a.elapsed)<V?this.props.dispatchPlayVideo():this.props.dispatchSeekTo(s))}},{key:"componentDidUpdate",value:function(){var e=this;this.gestureHandler||this.props.gesturesRef&&a.e(3).then(function(t){a(478),window.Hammer&&(e.gestureHandler=new window.Hammer(e.props.gesturesRef),e.initGestures())}.bind(null,a)).catch(a.oe)}},{key:"componentWillUnmount",value:function(){this.gestureHandler&&(this.gestureHandler.off(L),this.gestureHandler.off(H))}},{key:"initGestures",value:function(){var e=this;this.gestureHandler.get(D.PAN).set({direction:window.Hammer.DIRECTION_ALL}),this.gestureHandler.get(D.PRESS).set({time:U}),this.gestureHandler.on(D.PRESS,function(){var t=e.getSeekTimes(0);e.setState({isSeeking:!0,seekTimes:t})}),this.gestureHandler.on(D.PRESS_UP,function(){
e.setState({isSeeking:!1})}),this.gestureHandler.on(L,function(t){if(t.type===D.PAN_START&&(e.isPanning=!0),t.type===D.PAN_END&&(e.isPanning=!1,e.setState({isSeeking:!1})),!e.isPanning||t.type!==D.PAN_LEFT&&t.type!==D.PAN_RIGHT?t.type!==D.PAN_UP&&t.type!==D.PAN_DOWN||(e.isPanning=!1):e.setState({isSeeking:!0}),e.state.isSeeking){var a=e.getSeekTimes(-1*t.deltaX);e.setState({seekTimes:a})}})}},{key:"getSeekTimes",value:function(e){return(0,k.getSeekTimes)(this.props.replay.elapsed,e,this.props.dimensions.width,this.props.replay.duration,this.props.broadcast.start)}},{key:"getPreviewThumbnail",value:function(){var e=this.props.thumbnailIndex,t=this.state.seekTimes;return N.default.getThumbnailForPosition(e,t.seconds)}},{key:"render",value:function(){var e=this.state,t=e.isSeeking,a=e.seekTimes,n=(0,A.getFormattedTime)(a.seconds),r=(0,O.toPercentage)(a.seconds/this.props.replay.duration),s=(0,O.toPercentage)(this.props.replay.elapsed/this.props.replay.duration),i=[B];return t&&i.push("PanSeekOverlay--isSeeking"),m.default.createElement("div",{className:i.join(" ")},m.default.createElement("div",{className:"PanSeekOverlay-seeker"},m.default.createElement("div",{className:"PanSeekOverlay-thumbnail"},m.default.createElement("img",{src:this.getPreviewThumbnail()})),m.default.createElement("div",{className:"PanSeekOverlay-seekTime"},n),m.default.createElement("div",{className:"PanSeekOverlay-bar",style:{transform:"translateX(-"+r+"%)"}},m.default.createElement("div",{className:"PanSeekOverlay-currentTime",style:{left:s+"%"}}),m.default.createElement(w.default,{hideTimes:!0,hideMarker:!0,currentTimecode:a.seconds,duration:this.props.replay.duration,seekSeconds:a.seconds,thumbnailIndex:this.props.thumbnailIndex}))))}}]),t}(m.default.Component);F.propTypes={gesturesRef:m.default.PropTypes.object,broadcast:_.broadcastPropType,replay:C.replayPropType.isRequired,dimensions:m.default.PropTypes.object,thumbnailIndex:m.default.PropTypes.array,player:M.playerPropType,dispatchSeekTo:m.default.PropTypes.func.isRequired,dispatchPlayVideo:m.default.PropTypes.func.isRequired,dispatchPauseVideo:m.default.PropTypes.func.isRequired},t.default=(0,y.connect)((0,R.compose)(v.replayFullMapper,E.default,P.videoPlayerStateMapper,(0,b.default)(["dimensions"])),(0,R.compose)(v.replayDispatchMapper,P.videoPlayerDispatchMapper))(F)},1358:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return d.default.mobile()?i.default.createElement(E.default,e):i.default.createElement(b.default,e)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),i=n(s),o=a(15),l=a(178),u=a(16),d=n(u),c=a(21),p=a(472),f=n(p),h=a(47),m=a(1213),y=a(1190),v=n(y),g=a(1355),b=n(g),T=a(1356),E=n(T);r.propTypes=v.default,t.default=(0,o.connect)((0,c.compose)(h.authStateToProps,m.commentInputStateToProps))((0,f.default)((0,l.purify)(r)))},1359:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.VideoClass=void 0;var r=a(4),s=n(r),i=a(5),o=n(i),l=a(1),u=n(l),d=a(2),c=n(d),p=a(7),f=n(p),h=a(6),m=n(h),y=a(0),v=n(y),g=a(15),b=a(183),T=n(b),E=a(98),P=a(1291),_=function(){return{isAdPlaying:!1}},M=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e)),n=e.player.adPlaylist;return a.state={hasAd:!!n,isAdPlaying:!!n,adPlaylist:n},a.onPlayingAd=a.onPlayingAd.bind(a),a.onEndedAd=a.onEndedAd.bind(a),a.onPlayingPeriscope=a.onPlayingPeriscope.bind(a),a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"onPlayingAd",value:function(){this.props.dispatch((0,E.playerStarted)(!0))}},{key:"onEndedAd",value:function(){this.props.dispatch((0,E.removeAdVariant)()),this.props.dispatch((0,E.playerStarted)(!1)),this.props.dispatch((0,E.playerPresentation)(T.default.INTERSTITIAL)),this.setState(_)}},{key:"onPlayingPeriscope",value:function(){this.props.player.isPlaying||(this.props.dispatch((0,E.playerStarted)(!0)),this.props.dispatch((0,E.playerPresentation)(T.default.VIDEO)))}},{key:"render",value:function(){if(!this.state.hasAd)return v.default.createElement(P.PeriscopeVideo,this.props);var e=this.state,t=e.isAdPlaying,a=e.adPlaylist,n=void 0;return n=t?{lifecycleDisabled:!0,withPlayerDisabled:!0,is360:!1,url:a,needsCredentials:!1,muted:!0,onPlaying:this.onPlayingAd,onEnded:this.onEndedAd,playerWidth:this.props.windowWidth,playerHeight:this.props.windowHeight}:{onPlaying:this.onPlayingPeriscope},n.isAdPlaying=t,v.default.createElement(P.PeriscopeVideoWithAd,(0,s.default)({},this.props,n))}}]),t}(v.default.Component);M.propTypes={dispatch:v.default.PropTypes.func,player:v.default.PropTypes.object.isRequired,windowWidth:v.default.PropTypes.number.isRequired,windowHeight:v.default.PropTypes.number.isRequired};t.VideoClass=M;t.default=(0,g.connect)()(M)},1362:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){return i.default.createElement("svg",{className:"CaretRight",viewBox:"0 0 35 20"},i.default.createElement("g",{transform:"translate(17.500000, 10.000000) rotate(180.000000) translate(-17.500000, -10.000000)",fill:"#FFFFFF"},i.default.createElement("path",{d:"M17.337,19.225 C16.831,19.225 16.327,19.033 15.941,18.648 L0.877,3.584 C0.106,2.812 0.106,1.563 0.877,0.793 C1.648,0.021 2.897,0.021 3.668,0.793 L17.337,14.461 L31.006,0.793 C31.777,0.021 33.026,0.021 33.797,0.793 C34.568,1.564 34.568,2.812 33.797,3.584 L18.732,18.648 C18.347,19.033 17.842,19.225 17.337,19.225 L17.337,19.225 Z",transform:"translate(17.337000, 9.719500) rotate(90.000000) translate(-17.337000, -9.719500)"})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s=a(0),i=n(s)},1363:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s.default.createElement("svg",{width:"180px",height:"180px",viewBox:"0 0 182 180",className:"ReplayIcon"},s.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.default.createElement("g",{transform:"translate(-629, -319)"},s.default.createElement("g",{transform:"translate(-80.000000, -57.000000)"},s.default.createElement("g",{className:"replay-button",transform:"translate(710.000000, 376.000000)"},s.default.createElement("circle",{className:"circle",stroke:"#FFFFFF",strokeWidth:"2",fillOpacity:"0",fill:"#000000",cx:"90",cy:"90",r:"90"}),s.default.createElement("polygon",{className:"icon-play",fill:"#FFFFFF",transform:"translate(100.000000, 91.000000) rotate(90.000000) translate(-100.000000, -91.000000)",points:"100 62 129 120 71 120"}),s.default.createElement("path",{className:"icon-pause",d:"M71,61 L71,120 L84,120 L84,61 L71,61 Z M96,61 L96,120 L109,120 L109,61 L96,61 Z",id:"pause",fill:"#FFFFFF"}))))))};var r=a(0),s=n(r)},1364:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.active,a=["ShareIconContainer"];return t&&a.push("active"),i.default.createElement("div",{className:a.join(" ")},i.default.createElement("svg",{className:"ShareIcon",width:"18px",height:"18px",viewBox:"0 0 18 18"},i.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.default.createElement("g",null,i.default.createElement("path",{d:"M1.9999997,14.0007869 C1.9999999,14.0005246 2,14.0002623 2,14 C2,13.4477153 1.55228475,13 1,13 C0.44771525,13 0,13.4477153 0,14 L0,16 C0,17.1054293 0.893203454,18 2.00087166,18 L15.9991283,18 C17.1047241,18 18,17.1078829 18,16 L18,14 C18,13.4477153 17.5522847,13 17,13 C16.4477153,13 16,13.4477153 16,14 L16,16 C16,16.0017278 2.00087166,16 2.00087166,16 C1.99847802,16 1.99997514,14.0324605 1.9999997,14.0003962 Z"}),i.default.createElement("g",{transform:"translate(4.000000, 0.400000)"},i.default.createElement("rect",{x:"4",y:"2",width:"2",height:"10",rx:"1"}),i.default.createElement("polyline",{strokeWidth:"2",strokeLinecap:"round",points:"-2.83608236e-16 6 5 1 10 6"}))))))}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),i=n(s);r.propTypes={active:i.default.PropTypes.bool},t.default=r},1365:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.size,a=void 0===t?24:t,n=a+"px";return i.default.createElement("svg",{viewBox:"0 0 2304 2304",width:n,height:n},i.default.createElement("metadata",null,"Created by FontPrep 20130207 at Tue Jul 12 19:39:10 2016 By Sofo copyright missing"),i.default.createElement("path",{style:{fill:"#FFFFFF"},transform:"translate(0,2048) scale(1, -1)",d:"M1459 1548q45 0 77 -32t32 -76v-1088q0 -46 -32 -78t-76 -32t-77 33t-33 77v464l-4 -6l-690 -544q-30 -24 -61 -24t-53 12q-62 30 -62 98v1088q0 68 61 98t115 -14l690 -544l4 -4v464q0 44 32 76t77 32z"}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s=a(0),i=n(s);r.propTypes={size:i.default.PropTypes.number}},1366:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.muted,a=e.size,n=void 0===a?24:a,r=n+"px",s=t?l:o;return i.default.createElement("svg",{viewBox:"0 0 2304 2304",width:r,height:r},i.default.createElement("metadata",null,"Created by FontPrep 20130207 at Tue Jul 12 19:39:10 2016 By Sofo copyright missing"),i.default.createElement("path",{style:{fill:"#FFFFFF"},transform:"translate(0,2048) scale(1, -1)",d:s}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s=a(0),i=n(s),o="M1365 554q-35 0 -60 24t-25 59t24 61q90 96 90 198t-90 198q-24 26 -24 61t26 59t61 23t61 -27q136 -144 136 -314t-136 -314q-28 -28 -63 -28zM1622 384q-36 0 -61 24t-25 59t24 61q146 152 146 368t-146 368q-24 26 -24 61t26 59t61 24t61 -26q190 -200 194 -486 q-4 -286 -194 -486q-26 -26 -62 -26zM1194 1578v-1364q0 -60 -53 -80t-93 20l-430 458h-334q-34 0 -59 25t-25 59v400q0 34 25 59t59 25h334l430 458q40 40 93 20t53 -80z",l="M1934 669q0 -35 -24 -61q-26 -24 -60 -24t-62 24l-166 168l-168 -168q-24 -24 -60 -24t-61 25t-25 60t26 59l166 168l-166 168q-26 24 -26 59t25 61t60 26t61 -26l168 -168l166 168q26 26 61 26t60 -26t25 -61t-24 -59l-168 -168l168 -168q24 -24 24 -59zM1194 1578 v-1364q0 -60 -53 -80t-93 20l-430 458h-334q-34 0 -59 25t-25 59v400q0 34 25 59t59 25h334l430 458q40 40 93 20t53 -80z";r.propTypes={muted:i.default.PropTypes.bool,size:i.default.PropTypes.number}},1367:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.paused,a=e.size,n=void 0===a?24:a,r=n+"px",s=t?l:o;return i.default.createElement("svg",{viewBox:"0 0 2304 2304",width:r,height:r},i.default.createElement("metadata",null,"Created by FontPrep 20130207 at Tue Jul 12 19:39:10 2016 By Sofo copyright missing"),i.default.createElement("path",{style:{fill:"#FFFFFF"},transform:"translate(0,2048) scale(1, -1)",d:s}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s=a(0),i=n(s),o="M1480 270q0 -24 -17 -40t-41 -16h-198q-24 0 -41 16t-17 40v1252q0 24 17 40t41 16h198q24 0 41 -16t17 -40v-1252zM882 270q0 -24 -17 -40t-41 -16h-198q-24 0 -41 16t-17 40v1252q0 24 17 40t41 16h198q24 0 41 -16t17 -40v-1252z",l="M1622 896q0 -42 -36 -68l-768 -570q-22 -16 -47 -16t-41 8q-48 26 -48 78v1136q0 52 46 76t90 -6l768 -570q36 -26 36 -68z";r.propTypes={paused:i.default.PropTypes.bool,size:i.default.PropTypes.number}},1368:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.prompt=void 0;var r=a(519),s=n(r);t.default={prompt:s.default},t.prompt=s.default},1369:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.banned=void 0;var r=a(1261),s=n(r);t.default={banned:s.default},t.banned=s.default},1370:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.prompt=t.logout=void 0;var r=a(291),s=n(r),i=a(274),o=n(i);t.default={logout:s.default,prompt:o.default},t.logout=s.default,t.prompt=o.default},1371:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.email=void 0;var r=a(524),s=n(r);t.default={email:s.default},t.email=s.default},1372:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.icon=void 0;var r=a(526),s=n(r);t.default={icon:s.default},t.icon=s.default},1373:function(e,t,a){"use strict";function n(e,t){var a={},n=t.params,s=t.broadcastId,i=t.broadcast,o=s||i.id||n&&n.broadcastId;if(o&&(a.broadcastId=o),e.EventCache&&o){var l=(0,r.getEventFromCache)(o,e.EventCache);l&&(a.twitterEvent=l)}return a}Object.defineProperty(t,"__esModule",{value:!0}),t.twitterEventMapper=n;var r=a(61)},1381:function(e,t,a){function n(e,t){for(var a=e?t.length:0,n=a-1;a--;){var d=t[a];if(a==n||d!==p){var p=d;if(s(d))c.call(e,d,1);else if(i(d,e))delete e[u(d)];else{var f=r(d),h=l(e,f);null!=h&&delete h[u(o(f))]}}}return e}var r=a(190),s=a(106),i=a(107),o=a(1267),l=a(1382),u=a(105),d=Array.prototype,c=d.splice;e.exports=n},1382:function(e,t,a){function n(e,t){return 1==t.length?e:r(e,s(t,0,-1))}var r=a(295),s=a(296);e.exports=n},1383:function(e,t,a){var n=a(294),r=a(185),s=a(125),i=a(135),o=a(1267),l=a(133),u=l(function(e,t){var a=o(t);return i(a)&&(a=void 0),i(e)?n(e,r(t,1,i,!0),s(a)):[]});e.exports=u},1384:function(e,t,a){function n(e,t){var a=[];if(!e||!e.length)return a;var n=-1,i=[],o=e.length;for(t=r(t,3);++n<o;){var l=e[n];t(l,n,e)&&(a.push(l),i.push(n))}return s(e,i),a}var r=a(125),s=a(1381);e.exports=n},1385:function(e,t,a){function n(e,t){return e&&e.length?s(e,r(t)):[]}var r=a(125),s=a(531);e.exports=n},1408:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;var r=a(5),s=n(r),i=a(1),o=n(i),l=a(2),u=n(l),d=a(7),c=n(d),p=a(6),f=n(p),h=a(0),m=n(h),y=a(3),v=a(129),g=n(v),b=a(1250),T=n(b),E=a(1281),P=n(E),_=a(16),M=n(_),C=a(20),k=a(34),S=a(24),w=a(472),R=n(w),I=a(463),N=n(I),A=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.trackClick=a.trackClick.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getAppStoreLink",value:function(){return M.default.ios()?g.default.APP_STORE:M.default.android()?g.default.PLAY_STORE:"/"}},{key:"trackClick",value:function(){return M.default.ios()?this.props.dispatch((0,S.trackEvent)("GET_APP_CLICK")):M.default.android()?this.props.dispatch((0,S.trackEvent)("GET_APP_ANDROID_CLICK")):void 0}},{key:"renderMobileHeader",value:function(){if(M.default.ios()||M.default.android())return m.default.createElement("div",{className:"Header-container"},m.default.createElement("a",{href:this.getAppStoreLink(),onClick:this.trackClick,className:"Header-mobileLinkContainer"},m.default.createElement("div",{className:"Header-getAppPill"},m.default.createElement(y.FormattedMessage,N.default.get))),m.default.createElement(P.default,{withIcon:!0,onlyIcon:!0}))}},{key:"renderDesktopHeader",value:function(){var e=["Header-topRight","u-transition-1"];return m.default.createElement("div",{className:"Header-container"},m.default.createElement("div",{className:e.join(" ")},m.default.createElement(T.default,{dispatch:this.props.dispatch,broadcast:this.props.broadcast,user:this.props.user,location:"Header",withoutBottomMargin:!0}),m.default.createElement(P.default,null)))}},{key:"renderLayoutHeader",value:function(e){return e?this.renderMobileHeader():this.renderDesktopHeader()}},{key:"render",value:function(){var e=["Header"],t=M.default.mobile();return t&&e.push("Header--isMobile"),m.default.createElement("header",{className:e.join(" ")},this.renderLayoutHeader(t))}}]),t}(m.default.Component);A.propTypes={dispatch:m.default.PropTypes.func.isRequired,user:C.userPropType,broadcast:k.broadcastPropType},t.Header=A,t.default=(0,R.default)(A)},1434:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return i.default.createElement("div",{className:"BroadcastFeed u-fullHeight"},i.default.createElement(u.default,{broadcast:e.broadcast,dispatch:e.dispatch}),e.isTransitioning?null:i.default.createElement(c.default,{height:e.height,width:e.width,broadcast:e.broadcast,n_watching:e.n_watching,n_watched:e.n_watched,user:e.user,profileIsVisible:e.profileIsVisible,toggleProfileSidebar:e.toggleProfileSidebar,video:e.video,replay:e.replay,nextBroadcastCallback:e.nextBroadcastCallback,couchmode:e.couchmode,dispatch:e.dispatch,broadcastError:e.broadcastError}),i.default.createElement(f.default,null))}Object.defineProperty(t,"__esModule",{value:!0}),t.BroadcastFeed=void 0;var s=a(0),i=n(s),o=a(178),l=a(1408),u=n(l),d=a(1343),c=n(d),p=a(1218),f=n(p),h=a(34),m=a(20),y=a(461),v=a(268);r.defaultProps={couchmode:!1,profileIsVisible:!1},r.propTypes={n_watching:i.default.PropTypes.number,n_watched:i.default.PropTypes.number,broadcast:h.broadcastPropType,broadcastError:i.default.PropTypes.object,user:m.userPropType,height:i.default.PropTypes.number.isRequired,width:i.default.PropTypes.number.isRequired,profileIsVisible:i.default.PropTypes.bool,couchmode:i.default.PropTypes.bool,nextBroadcastCallback:i.default.PropTypes.func,toggleProfileSidebar:i.default.PropTypes.func,video:y.videoPropType,replay:v.replayPropType,dispatch:i.default.PropTypes.func,isTransitioning:i.default.PropTypes.bool},t.BroadcastFeed=r,t.default=(0,o.purify)(r)}});